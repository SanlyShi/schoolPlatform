webpackJsonp([231],{"+SRa":function(t,n){},"5Wls":function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("lC5x"),a=e.n(i),o=e("J0Oq"),s=e.n(o),r=e("MVd6"),p=e("DkpT"),l=e("Se9A"),c=e("XfSg"),u=e("p+qa"),f=e("+X9P"),d=e("0FSR"),y=e("G1RR"),m=e("PUN0"),h=(Number,Boolean,Object,l.a,f.a,d.a,m.a,y.a,{props:{id:Number,fromList:Boolean,props:Object},components:{ModuleContainer:l.a,BaseInfo:f.a,UnitsInfo:d.a,UnitOjfApply:m.a,UnitOjfApplyDetail:y.a},data:function(){return{page:"DETAIL",loading:!0,ojfUnitApplyId:null,ojf:null,myUnit:null,myApplyInfo:null,isMyUnitDisabled:!1}},computed:{ojfId:function(){return this.ojf?this.ojf.id:this.id||this.props.id},hasApplied:function(){return!!this.ojf&&!(!this.myApplyInfo||this.myApplyInfo.status!==p.a.PASSED)},canApply:function(){return!!this.ojf&&(!this.hasApplied&&this.ojf.isApplying()&&!this.isMyUnitDisabled)}},watch:{"props.id":function(t){t&&(this.ojf=null,this.initOjf())}},created:function(){var t=this;return s()(a.a.mark(function n(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.initOjf();case 2:t.$attrs&&t.$attrs.userInfo&&("COMPANY"==t.$attrs.userInfo.type&&t.initMyUnitDisabled(),"/student/onlineJobFair/detail"!=t.$attrs.content&&t.initMyUnit()),t.initMyApplyInfo(),t.loading=!1;case 5:case"end":return n.stop()}},n,t)}))()},methods:{addBread:function(t){this.$emit("toSomePage",{path:t.route})},initOjf:function(){var t=this;return s()(a.a.mark(function n(){var e,i,o,s;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.a.getPublic(t.ojfId);case 2:e=n.sent,i=e.state,o=e.message,s=e.data,i?t.ojf=r.a.fromApi(s):t.$toast(o);case 7:case"end":return n.stop()}},n,t)}))()},initMyUnit:function(){var t=this;return s()(a.a.mark(function n(){var e,i,o,s;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(u.k)();case 2:e=n.sent,i=e.state,o=e.message,s=e.data,i?t.myUnit=s:t.$toast(o);case 7:case"end":return n.stop()}},n,t)}))()},initMyUnitDisabled:function(){var t=this;return s()(a.a.mark(function n(){var e,i,o,s;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(u.c)();case 2:e=n.sent,i=e.state,o=e.message,s=e.data,i?t.isMyUnitDisabled=!s:"41004"!==code&&t.$toast(o);case 7:case"end":return n.stop()}},n,t)}))()},initMyApplyInfo:function(){var t=this;return s()(a.a.mark(function n(){var e,i,o,s,p;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.a.getPublicOjfUnitApplyById(t.ojfId);case 2:e=n.sent,i=e.state,o=e.code,s=e.message,p=e.data,i?p&&(t.myApplyInfo=r.b.fromApi(p)):"50001"===o?t.myApplyInfo=null:"41004"!==o&&t.$toast(s);case 8:case"end":return n.stop()}},n,t)}))()},showMyApplyInfo:function(){this.page="UNIT_APPLY_DETAIL",this.ojfUnitApplyId=this.myApplyInfo.id},showOjfUnitApply:function(t,n){this.page="UNIT_APPLY_DETAIL",this.ojfUnitApplyId=t.id},toApply:function(){this.page="APPLY"},bakcToMyList:function(){this.$router.push({name:"employment",params:{toPage:"/unit/onlineJobFair/list"}})},backToHomePage:function(){this.$emit("toSomePage","/index")},back:function(){this.fromList?this.$emit("back-to-list"):this.backToHomePage()}}}),j={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return"DETAIL"===t.page?e("div",{attrs:{id:"studentOjfDetails"}},[e("div",{staticClass:"studentOjfDetails"},[e("div",{staticClass:"module-container"},[e("el-button",{staticStyle:{color:"#666"},attrs:{type:"text",icon:"el-icon-back"},on:{click:t.back}},[t._v("返回")]),t._v(" "),t.ojf?e("div",[e("base-info",{model:{value:t.ojf,callback:function(n){t.ojf=n},expression:"ojf"}}),t._v(" "),e("units-info",{on:{"show-ojf-unit-apply":t.showOjfUnitApply},model:{value:t.ojf.units,callback:function(n){t.$set(t.ojf,"units",n)},expression:"ojf.units"}}),t._v(" "),e("module-container",{attrs:{actions:"",loader:t.loading}},[t.hasApplied?e("el-button",{attrs:{type:"primary",size:"large"},on:{click:t.showMyApplyInfo}},[t._v("查看我的参会信息")]):t.isMyUnitDisabled?e("el-button",{attrs:{type:"primary",size:"large",disabled:""}},[t._v("单位已被停用")]):t.myApplyInfo?e("el-button",{attrs:{type:"primary",size:"large",disabled:""}},[t._v("申请中")]):this.ojf.isApplying()?t.myUnit?e("el-button",{attrs:{type:"primary",size:"large"},on:{click:t.toApply}},[t._v("申请")]):t._e():e("el-button",{attrs:{type:"info",size:"large",disabled:""}},[t._v("不在报名时间内")])],1)],1):e("module-container",{attrs:{loader:""}})],1)])]):"UNIT_APPLY_DETAIL"===t.page?e("div",[e("unit-ojf-apply-detail",{attrs:{ojf:t.ojf,"ojf-unit-apply-id":t.ojfUnitApplyId,"hide-status":"","hide-oplog":"","only-look":""},on:{back:function(n){t.page="DETAIL"}}})],1):"APPLY"===t.page?e("div",[e("unit-ojf-apply",{attrs:{ojf:t.ojf,"my-unit":t.myUnit},on:{"back-to-list":function(n){t.page="DETAIL"},"back-to-my-list":t.bakcToMyList}})],1):t._e()},staticRenderFns:[]};var A=e("C7Lr")(h,j,!1,function(t){e("+SRa")},null,null);n.default=A.exports}});