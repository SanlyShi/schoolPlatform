webpackJsonp([110],{"7pQD":function(t,a){},IEqX:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});e("WqNi");var i=e("dXYr"),s={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"activityUserStar"}},[e("view-box",[e("x-header",{staticClass:"search-page-header",style:{"box-shadow":t.isShowBoxShadow?"0 0 4px 0 rgba(0,0,0,0.12), 0 4px 4px 0 rgba(0,0,0,0.12)":"none"}},[e("i",{staticClass:"maticon back-icon",attrs:{slot:"overwrite-left"},domProps:{innerHTML:t._s(t.icons("navigate_before"))},on:{click:t._back},slot:"overwrite-left"},[t._v("navigate_before")]),t._v(" "),e("div",{staticClass:"search-page-container",attrs:{slot:"overwrite-title"},slot:"overwrite-title"},[e("search",{ref:"search",staticClass:"header-search activityUserStar-search",attrs:{position:"absolute",placeholder:"请输入","auto-scroll-to-top":"",top:"0"},on:{"on-change":t.getResult,"on-submit":t.onSubmit},model:{value:t.searchName,callback:function(a){t.searchName=a},expression:"searchName"}})],1),t._v(" "),t.data.data.haveFeedback?t._e():e("i",{staticClass:"maticon sumbit-icon",attrs:{slot:"right"},domProps:{innerHTML:t._s(t.icons("check_circle"))},on:{click:t._submitUserStar},slot:"right"},[t._v("check_circle")])]),t._v(" "),e("div",{staticClass:"activityUserStar-content"},[t.listData.length>0?e("group",{staticClass:"activityUserStar-group"},t._l(t.listData,function(a,i){return e("cell",{key:i,staticClass:"activityUserStar-cell",attrs:{title:a.participantName+(a.isSign?"":"(未签到)"),"inline-desc":(a.college||"")+(a.grade||"")+(a.studentType||"")}},[e("rater",{attrs:{"active-color":"rgb(255,145,2)",disabled:t.data.data.haveFeedback,"font-size":17,margin:6},nativeOn:{click:function(a){t.isChage=!0}},model:{value:a.point,callback:function(e){t.$set(a,"point",e)},expression:"item.point"}})],1)}),1):e("div",{staticClass:"nodataText"},[t._v(t._s(t.noDataTips))])],1)],1)],1)},staticRenderFns:[]};var n=function(t){e("7pQD")},o=e("C7Lr")(i.a,s,!1,n,null,null);a.default=o.exports},WqNi:function(t,a,e){"use strict";(function(t){e("C331")}).call(a,e("qqHy"))},dXYr:function(t,a,e){"use strict";(function(t){var i=e("C331");a.a={props:{data:{default:""}},data:function(){return{signInStar:4,noSignInStar:0,pageIndex:0,pageSize:20,listData:[],userStarList:[],searchTimeOut:null,searchName:"",noDataTips:"",isShowBoxShadow:!1,isChage:!1}},computed:{lastPage:function(){return this.data.data.lastPage},userStars:function(){return this.data.data.newUserAndPoints}},created:function(){this._initPage()},methods:{_back:function(){var t=this;this.isChage&&!this.data.data.haveFeedback?this.$vux.confirm.show({title:"您未保存评星，是否要保存评星?",onConfirm:function(){t._submitUserStar()},onCancel:function(){t.$emit("removeBread",t.data)}}):this.$emit("removeBread",this.data)},getResult:function(t){var a=this;this.searchTimeOut&&clearTimeout(this.searchTimeOut),this.searchTimeOut=setTimeout(function(){a._initPage()},600)},onSubmit:function(){this._initPage()},_initPage:function(){var t=this;Object(i.e)({url:"/api/sc/activityProcesses/activityFeedback/users/"+this.data.data.activityId,type:"get",data:{page:this.pageIndex,size:this.pageSize,keyWord:this.searchName},success:function(a){a.state?(a.data.length>0?t.noDataTips="":t.noDataTips="---暂无相关数据---",t.listData=a.data,t.listData.forEach(function(a){t.userStars.forEach(function(t){a.participantUserId===t.userId&&(a.point=t.point)})})):t._toast(a.message)}})},_monitorScroll:function(){var a=this;t(".activityUserStar-content").off("scroll").on("scroll",function(){var e=t(this).scrollTop();a.isShowBoxShadow=e>=100})},_submitUserStar:function(){var t=this;this.listData.forEach(function(a){t.userStarList.push({userId:a.participantUserId,point:a.point})}),this._toast("操作成功"),this.lastPage.userStarList=this.userStarList,this.isChage=!1,setTimeout(function(){t._back()},100)},_toast:function(t){this.$vux.toast.show({text:t,position:"bottom",type:"text"})}},mounted:function(){this._monitorScroll()}}}).call(a,e("qqHy"))}});