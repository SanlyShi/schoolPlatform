webpackJsonp([53],{EMVJ:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("UnxZ");var s=i("wF8H"),n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"navManage"}},[s("div",{staticClass:"first-nav"},[s("div",{staticClass:"flex",attrs:{id:"first"}},[t._l(t.navList,function(e,n){return s("div",{key:n,staticClass:"first-item",class:{on:t.pIndex==n,border:t.edit.first.idx==n}},[s("div",{staticClass:"item-name nav-name",on:{click:function(e){return t.selectFirstNav(n)}}},[t.edit.first.idx!==n?s("span",{on:{dblclick:function(e){return t.editNavName(n,"first")}}},[t._v(t._s(e.title))]):s("input",{directives:[{name:"model",rawName:"v-model",value:t.edit.first.value,expression:"edit.first.value"}],attrs:{maxlength:"5",type:"text"},domProps:{value:t.edit.first.value},on:{blur:function(e){return t.editNavName(-1,"first")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onBlur(n,"first")},input:function(e){e.target.composing||t.$set(t.edit.first,"value",e.target.value)}}})]),t._v(" "),0!==n&&n!==t.edit.first.idx?s("div",{staticClass:"del-img",on:{click:function(e){return t.delNav(n,"del","first")}}},[s("img",{attrs:{src:i("eOHs"),alt:""}})]):t._e()])}),t._v(" "),t.navList.length<5?s("div",{staticClass:"add-img",on:{click:t.addFirstNav}},[s("img",{attrs:{src:i("DW+B"),alt:""}})]):t._e()],2)]),t._v(" "),s("div",{staticClass:"second-nav"},[s("div",{staticClass:"sec-top"},[s("div",{staticClass:"sec-cnt",attrs:{id:"second"}},t._l(t.navList[t.pIndex].sonNavigationList,function(e,i){return s("div",{directives:[{name:"dragging",rawName:"v-dragging",value:{item:e,list:t.navList[t.pIndex].sonNavigationList,group:"nav"},expression:"{ item: item, list: navList[pIndex].sonNavigationList, group: 'nav' }"}],key:i,staticClass:"sec-item",on:{click:function(e){return t.selectSecondNav(i)}}},[t.edit.second.idx!=i?s("div",{staticClass:"item-name",class:{active:i==t.cIndex}},[t._v("\n              "+t._s(e.title)+"\n            ")]):t._e(),t._v(" "),s("div",{staticClass:"nav-name"},[t.edit.second.idx==i?s("input",{directives:[{name:"model",rawName:"v-model",value:t.edit.second.value,expression:"edit.second.value"}],attrs:{type:"text"},domProps:{value:t.edit.second.value},on:{blur:function(e){return t.editNavName(-1,"second")},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onBlur(i,"second")},input:function(e){e.target.composing||t.$set(t.edit.second,"value",e.target.value)}}}):t._e()])])}),0),t._v(" "),s("div",{staticClass:"sec-r"},[t.navList[t.pIndex].sonNavigationList&&t.navList[t.pIndex].sonNavigationList.length>0?s("button",{staticClass:"sec-btn del-btn",on:{click:function(e){return t.delNav(t.cIndex,"del","second")}}},[t._v("删除")]):t._e(),t._v(" "),s("button",{staticClass:"sec-btn add-btn",on:{click:t.addSecondNav}},[t._v("添加")])])]),t._v(" "),t.navList[t.pIndex].sonNavigationList&&t.navList[t.pIndex].sonNavigationList.length>0?s("el-form",{ref:"secondNav",staticClass:"sec-body",attrs:{rules:t.rules,"label-width":"100px",model:t.editObj}},[s("el-form-item",{attrs:{required:"",label:"二级导航:",prop:"title"}},[s("el-input",{staticClass:"w340",model:{value:t.editObj.title,callback:function(e){t.$set(t.editObj,"title",e)},expression:"editObj.title"}})],1),t._v(" "),s("el-form-item",{attrs:{required:"",label:"内容类型:",prop:"type"}},[s("el-radio-group",{on:{change:t.changeRadio},model:{value:t.editObj.type,callback:function(e){t.$set(t.editObj,"type",e)},expression:"editObj.type"}},t._l(t.cmsTypeList,function(e,i){return s("el-radio",{key:i,attrs:{label:e.value}},[t._v(t._s(e.name))])}),1)],1),t._v(" "),s("el-form-item",{attrs:{label:"",prop:"content"}},["OUTSIDE_LINK"==t.editObj.type?s("el-input",{staticClass:"w340",model:{value:t.editObj.linkUrl,callback:function(e){t.$set(t.editObj,"linkUrl",e)},expression:"editObj.linkUrl"}}):"MODULE_CONTENT"==t.editObj.type?s("el-select",{staticClass:"w340",attrs:{placeholder:"请选择"},model:{value:t.editObj.moduleName,callback:function(e){t.$set(t.editObj,"moduleName",e)},expression:"editObj.moduleName"}},t._l(t.moduleList,function(t){return s("el-option",{key:t.value,attrs:{label:t.title,value:t.title}})}),1):s("el-select",{staticClass:"w340",attrs:{placeholder:"请选择"},model:{value:t.editObj.employmentUrl,callback:function(e){t.$set(t.editObj,"employmentUrl",e)},expression:"editObj.employmentUrl"}},t._l(t.cmsTypeList[1].sonConstantList,function(t){return s("el-option",{key:t.value,attrs:{label:t.name,value:t.listPageUrl}})}),1)],1),t._v(" "),s("el-form-item",{staticClass:"mt50"},[s("el-button",{staticClass:"sec-btn line mr80",on:{click:t.initSecondNavInfo}},[t._v("取消")]),t._v(" "),s("el-button",{staticClass:"sec-btn add-btn",on:{click:t.saveSecNavInfo}},[t._v("保存")])],1)],1):t._e()],1)])},staticRenderFns:[]};var a=function(t){i("HWnz"),i("uAJc")},d=i("C7Lr")(s.a,n,!1,a,"data-v-f6fe23e2",null);e.default=d.exports},HWnz:function(t,e){},UnxZ:function(t,e,i){"use strict";(function(t){i("C331"),i("C331")}).call(e,i("qqHy"))},eOHs:function(t,e){t.exports="data:image/png;base64,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"},uAJc:function(t,e){},wF8H:function(t,e,i){"use strict";(function(t){var s=i("C331"),n=i("C331");e.a={components:{},data:function(){return{systemId:"",page:"navPage",navList:[{id:null,systemId:null,title:"",type:null,url:null,parentId:null,sort:null,newWindow:null,sonNavigationList:[]}],pIndex:0,cIndex:0,edit:{first:{value:"",idx:-1},second:{value:"",idx:-1}},hasAdd:{first:!1,second:!1},hasEdit:!1,editObj:{type:"",title:"",linkUrl:"",employmentUrl:"",employmentName:"",moduleName:""},cmsTypeList:[],moduleList:[],sortList:[],rules:{title:[{required:!0,message:"名称不能为空",trigger:"change"}],type:[{required:!0,message:"情选择内容类型",trigger:"change"}]}}},watch:{sortList:function(t){t.length>1&&this.dragNav(t)}},created:function(){this.systemId=sessionStorage.getItem("_SYSTEM_ID"),this.initNav(),this.getDict()},mounted:function(){var t=this;this.$dragging.$on("dragged",function(e){var i=e.value;"nav"==i.group&&(t.sortList=i.list)})},methods:{changeRadio:function(t){var e=this.cmsTypeList.find(function(e){return e.value==t});this.editObj.newWindow=e.newWindow},initNav:function(){var t=this;Object(s.d)("/api/cms/navigation/getNavigationList?systemId="+this.systemId).then(function(e){e.state?(t.navList=e.data,t.initSecondNavInfo()):t.$toast(e.message)})},getDict:function(){var t=this;Object(s.d)("/api/cms/system/getConstantByType?type=NAVIGATION_CONTENT_TYPE&systemId="+this.systemId).then(function(e){e.state?(t.cmsTypeList=e.data,t.getModuleList(t.cmsTypeList[2].datalistUrl)):t.$toast(e.message)})},getModuleList:function(t){var e=this;t&&Object(s.d)("/api"+t+this.systemId+"&size=99999").then(function(t){t.state?e.moduleList=t.data.content:e.$toast(t.message)})},dragNav:function(t){var e=this,i=t.map(function(t,e){return{id:t.id,sort:e+1}});Object(s.d)("/api/cms/navigation/sortChange",{navigationVOList:i},"post").then(function(t){t.state?e.initSecondNavInfo():e.$toast(t.message)})},selectFirstNav:function(t){this.pIndex=t,this.cIndex=0,this.initSecondNavInfo()},selectSecondNav:function(t){this.cIndex=t,this.initSecondNavInfo()},initSecondNavInfo:function(){this.editObj={type:"",title:"",linkUrl:"",employmentUrl:"",employmentName:"",moduleName:""};var t=this.navList[this.pIndex].sonNavigationList;if(t&&0!=t.length){var e=t[this.cIndex];switch(this.editObj.type=e.type,this.editObj.id=e.id,this.editObj.systemId=e.systemId,this.editObj.title=e.title,this.editObj.newWindow=e.newWindow,e.type){case"OUTSIDE_LINK":this.editObj.linkUrl=e.url;break;case"MODULE_CONTENT":this.editObj.moduleName=e.chooseName,this.editObj.moduleUrl=e.url;break;default:this.editObj.employmentName=e.chooseName,this.editObj.employmentUrl=e.url}}},addFirstNav:function(){this.navList.push({systemId:this.systemId,title:null,url:null,type:null,parentId:0}),this.addNav(this.navList.length-1,"first")},addSecondNav:function(){var t=this.navList[this.pIndex].sonNavigationList;t&&t.length+1>10?this.$toast("最多只能有10个二级导航栏"):(t||(t=[]),t.push({systemId:this.systemId,title:null,url:null,type:this.cmsTypeList[0].value,newWindow:this.cmsTypeList[0].newWindow,parentId:this.navList[this.pIndex].id}),this.navList[this.pIndex].sonNavigationList=t,this.addNav(this.navList[this.pIndex].sonNavigationList.length-1,"second"))},addNav:function(t,e){var i=this;this.hasAdd[e]=!0,this.$nextTick(function(){i.editNavName(t,e)})},editNavName:function(t,e){var i=this.edit[e].idx;this.edit[e].idx=t;var s=-1;if(-1!==t)return this.edit[e].value="first"===e?this.navList[t].title:this.navList[this.pIndex].sonNavigationList[t].title,void this.onFocus(t,e);this.edit[e].value?(s=this.isTitleRepeat(this.edit[e].value,i,e))>-1?s!==i&&(this.delNav(t,"edit",e),this.$toast("导航栏名称重复")):("first"===e?this.navList[i].title=this.edit[e].value:"second"===e&&(this.navList[this.pIndex].sonNavigationList[i].title=this.edit[e].value),this.addOrUpdateNav(i,e)):this.delNav(t,"edit",e)},saveSecNavInfo:function(){var t=this;this.$refs.secondNav.validate(function(e){if(!e)return!1;var i={};switch(i.title=t.editObj.title,i.type=t.editObj.type,i.id=t.editObj.id,i.systemId=t.editObj.systemId,i.newWindow=t.editObj.newWindow,t.editObj.type){case"OUTSIDE_LINK":i.url=t.editObj.linkUrl;break;case"MODULE_CONTENT":i.chooseName=t.editObj.moduleName;var s=t.moduleList.find(function(t){return t.title==i.chooseName});i.url="/contentManageIndex,"+s.id;break;default:i.url=t.editObj.employmentUrl,i.chooseName=t.editObj.employmentName}i.url?t.execUpdateNav(i):t.$toast("跳转链接不能为空")})},addOrUpdateNav:function(t,e){var i=this,s="first"==e?this.navList[t]:this.navList[this.pIndex].sonNavigationList[t];this.hasAdd[e]?Object(n.e)({url:"/api/cms/navigation/addNavigation",dataType:"json",type:"post",data:s,success:function(s){s.state?(i.hasAdd[e]=!1,"second"==e&&(i.cIndex=t),i.initNav()):(i.delNav(t,"del",e),i.$toast(s.message))}}):this.execUpdateNav(s)},execUpdateNav:function(t){var e=this;Object(s.d)("/api/cms/navigation/updateNavigation",t,"post").then(function(t){t.state?(e.$toast("修改成功"),e.initNav()):e.$toast(t.message)})},delNav:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"del",s=arguments[2];if(this.hasAdd[s])return"first"===s?this.navList.splice(t,1):this.navList[this.pIndex].sonNavigationList.splice(t,1),void(this.hasAdd[s]=!1);if("edit"!==i&&("del"!==i||confirm("您确定要删除"+("first"===s?"一级":"二级")+"导航？"))){var a="first"===s?this.navList[t].id:this.navList[this.pIndex].sonNavigationList[t].id;Object(n.e)({url:"/api/cms/navigation/"+a,dataType:"json",type:"post",success:function(i){i.state?("first"==s?(e.navList.splice(t,1),t==e.navList.length&&(e.pIndex=0)):(e.navList[e.pIndex].sonNavigationList.splice(t,1),t==e.navList[e.pIndex].sonNavigationList.length&&(e.cIndex=0)),e.initSecondNavInfo()):e.$toast(i.message)}})}},onFocus:function(e,i){var s=t("#"+i).children("div").eq(e).find(".nav-name");this.$nextTick(function(){s.find("input").focus()})},onBlur:function(e,i){var s=t("#"+i).children("div").eq(e).find(".nav-name");this.$nextTick(function(){s.find("input").blur()})},isTitleRepeat:function(t,e,i){return"first"===i?this.navList.findIndex(function(e){return e.title===t}):this.navList[this.pIndex].sonNavigationList.findIndex(function(e){return e.title===t})}}}}).call(e,i("qqHy"))}});