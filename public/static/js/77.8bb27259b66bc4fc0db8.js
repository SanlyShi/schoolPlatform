webpackJsonp([77],{"6tBE":function(e,t,a){"use strict";(function(e){var t=a("a3Yh"),i=(a.n(t),a("C331"),a("y0ro")),s=a("JUJb");i.a,s.a}).call(t,a("qqHy"))},K1Cl:function(e,t){},"Nr4+":function(e,t,a){"use strict";(function(e){var i=a("a3Yh"),s=a.n(i),n=a("C331"),r=a("y0ro"),l=a("JUJb");t.a={mixins:[r.a,l.a],data:function(){var e;return{showSign:!1,showImgDetailStatus:!1,deleteImgWidth:1,imgDetailSrc:"",enrollUrl:"/table-data/archives/enroll/getListEnroll",enrollColumns:[],showDetailStatus:!1,imgList:[],timestamp:"?timestamp=",enrollUserNo:"",enrollAddColumns:[],enrollAddList:[],lang:"zh-cn",checkRows:[],isEdit:!0,addParams:(e={id:"",year:"",studentNo:"",studentImage:a("rsUi"),province:"",name:"",sex:"",idCardNo:"",batch:"",division:"",castArchivesScore:"",enrollmentModels:"",majorName:"",adviceNoteNo:"",emsNo:""},s()(e,"studentImage",""),s()(e,"publish",""),s()(e,"registerTime",""),s()(e,"registerLocation",""),s()(e,"educationLevel",""),s()(e,"examinationRanking",""),s()(e,"updateExaminationRanking",""),s()(e,"examinationRankingData",""),s()(e,"examinationRankingDataList",""),e),addOptions:[{name:"年份",type:"input",value:"year",require:!1,noEdit:!0},{name:"考生号",type:"input",value:"studentNo",require:!1,noEdit:!0},{name:"省份",type:"input",value:"province",require:!1,noEdit:!0},{name:"名字",type:"input",value:"name",require:!1,noEdit:!0},{name:"性别",type:"input",value:"sex",require:!1,noEdit:!0},{name:"身份证",type:"input",value:"idCardNo",require:!1,noEdit:!0},{name:"批次",type:"input",value:"batch",require:!1,noEdit:!0},{name:"科类",type:"input",value:"division",require:!1,noEdit:!0},{name:"投档成绩",type:"input",value:"castArchivesScore",require:!1,noEdit:!0},{name:"录取方式",type:"input",value:"enrollmentModels",require:!1,noEdit:!0},{name:"专业名称",type:"longInput",value:"majorName",require:!1,noEdit:!0},{name:"通知书单号",type:"input",value:"adviceNoteNo",require:!1,noEdit:!0},{name:"EMS单号",type:"input",value:"emsNo",require:!1,noEdit:!1},{name:"报道时间",type:"date",value:"registerTime",require:!1,noEdit:!1},{name:"报道地点",type:"input",value:"registerLocation",require:!1,noEdit:!1},{name:"培养层次",type:"input",value:"educationLevel",require:!1,noEdit:!0},{name:"高考排名",type:"input",value:"examinationRanking",require:!1,noEdit:!0}],importUrl:{add:{type:"导入",downloadTemplateUrl:"/archives/enroll/template",downloadErrorTemplateUrl:"/archives/batch/errorFile",checkTemplateUrl:"/archives/enroll/excel",url:"/archives/batch"},edit:{type:"编辑",downloadTemplateUrl:"/archives/enroll/updateTemplate",downloadErrorTemplateUrl:"/archives/batch/errorUpdateFile",checkTemplateUrl:"/archives/enroll/updateExcel",url:"/archives/updateBatch"}}}},props:{selectItem:{default:function(){}},orgM:{default:!1}},created:function(){var e=localStorage.getItem("lang"),t=this;this.enrollColumns=[{id:"year",title:"年份",className:"text-left",hidden:!1,search:{type:"select",data:{url:"/api/archives/enroll/getListYear",optionsLabel:"label",optionsValue:"value",placeholder:""}}},{id:"studentNo",title:"考生号",className:"text-left",hidden:!1,search:{type:"input",data:{placeholder:""}}},{id:"province",title:"省份",className:"text-left",hidden:!1,search:{type:"select",data:{optionsLabel:"label",optionsValue:"label",url:"/api/archives/permissions/getProvinceList"}}},{id:"name",title:"姓名",className:"text-left",hidden:!1,search:{type:"input",data:{placeholder:""}}},{id:"batch",title:"批次",className:"text-left",hidden:!1,search:{type:"input",data:{placeholder:""}}},{id:"division",title:"科类",className:"text-left",hidden:!0,search:{type:"input",data:{placeholder:""}}},{id:"examinationRanking",title:"高考排名",className:"text-left",hidden:!1},{id:"castArchivesScore",title:"投档成绩",className:"text-left",hidden:!0,search:{type:"input",data:{placeholder:""}}},{id:"enrollmentModels",title:"录取方式",className:"text-left",hidden:!1,search:{type:"input",data:{placeholder:""}}},{id:"majorName",title:"招生专业名称",className:"text-left",hidden:!1,search:{type:"input",data:{placeholder:""}}},{id:"adviceNoteNo",title:"通知书单号",className:"text-left",hidden:!1,search:{type:"input",data:{placeholder:""}}},{id:"emsNo",title:"EMS单号",className:"text-left",hidden:!0,search:{type:"input",data:{placeholder:""}}},{id:"educationLevel",title:"培养层次",className:"text-left",hidden:!0,search:{type:"input",data:{placeholder:""}}},{id:"opt",title:"操作",className:"text-center",width:"230px",hidden:!1,formatter:function(e){return[{tag:"a",text:t.translate.check,className:"opt-btn",callback:function(e,a){t.showDetail(e)}}]}}],Object(n.g)(e)&&(this.lang=e)},methods:{importImg:function(){e("#uploadImg").click()},submitImg:function(e){var t,a=new FormData;t=e.target.files[0],a.append("file",t),this.$waiting.show({text:"上传中...",container:"body"});var i=this;Object(n.e)({url:"upload/archives/enroll/importImages",dataType:"json",data:a,processData:!1,contentType:!1,type:"post",success:function(e){"88888"===e.code?(i.$toast("上传成功!"),i.timestamp="?timestamp="+(new Date).getTime()):i.$toast(e.message)},complete:function(){i.$waiting.close()}})},changgeImportParams:function(e){var t=this;this.importParams={parentPageTitle:"",downloadTemplateUrl:this.importUrl[e].downloadTemplateUrl,downloadErrorTemplateUrl:this.importUrl[e].downloadErrorTemplateUrl,checkTemplateUrl:this.importUrl[e].checkTemplateUrl,templateName:"批量"+this.importUrl[e].type+"模板",importBtnType:[{url:this.importUrl[e].url,method:"post",isShowBtn:!0,name:"增量导入",success:function(e){t.timestamp="?timestamp="+(new Date).getTime(),t.curRoute="allStaff"}}]},this.quickAddRecord()},showImgDetail:function(e){this.showImgDetailStatus=!0,this.imgDetailSrc=e,window.onmousewheel=document.onmousewheel=this.scrollImg},scrollImg:function(e){this.showImgDetailStatus&&(e.deltaY>0?this.deleteImgWidth<2&&(this.deleteImgWidth+=.1):this.deleteImgWidth>.2&&(this.deleteImgWidth-=.1))},save:function(){var e=this,t={id:this.addParams.id,emsNo:this.addParams.emsNo,registerTime:this.addParams.registerTime,registerLocation:this.addParams.registerLocation};Object(n.d)("api/archives/enroll/updateEms",t,"post").then(function(t){t.state&&(e.$toast("编辑成功!"),e.timestamp="?timestamp="+(new Date).getTime(),e.showDetailStatus=!1)})},batchExport:function(){if(this.checkRows.length){var e="enrollId=",t=(this.checkRows.map(function(t){return e+=t.id+",",t.id}),"/downloads/archives/getEnrollExcel?"+(e=e.substr(0,e.length-1)));window.location.href=t}else this.$toast("请选择导出学生!")},afterChecked:function(e){this.checkRows=e},showDetail:function(e){this.addParams=e,this.showDetailStatus=!0;this.imgList=e.examinationRankingDataList.map(function(e){return"/downloads/archives/query/getImageDate?fileName="+e})},getSelectOptions:function(e){return"province"===e?this.provinceList:[{id:1,text:"hh"},{id:2,text:"haha"}]},deleteImg:function(e){this.imgList.splice(e,1)},onSelectImage:function(e){var t=event.target.files[0],a=this;if(t){event.target.value="";var i=new FileReader;i.onloadend=function(e){var t=new Image;t.src=e.target.result,t.onload=function(){a.imgList.push(t.src)}},i.readAsDataURL(t)}},selectImage:function(){e("#imageInput").click()}},computed:{translate:function(){return Object(n.g)(this.lang).enrollManage}}}}).call(t,a("qqHy"))},neC0:function(e,t){},"vnc+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("6tBE");var i=a("Nr4+"),s={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.showDetailStatus?i("div",{staticClass:"detail_wrap"},[i("label",{staticClass:"back pull-left",staticStyle:{padding:"0",width:"100%"},on:{click:function(t){e.showDetailStatus=!1}}},[i("i",{staticClass:"maticon pull-left",domProps:{innerHTML:e._s(e.icons("arrow_back"))}},[e._v("arrow_back")]),e._v(" "),i("span",[e._v("返回")])]),e._v(" "),i("div",{staticClass:"form-wrap box_flex align_center input_wrap face_wrap"},[i("div",{staticClass:"face"},[i("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.addParams.studentImage?"/downloads/archives/query/getIdCardImage?fileName="+e.addParams.studentImage:a("rsUi"),alt:""}})]),e._v(" "),e._l(e.addOptions.filter(function(e,t){return t<6}),function(t,a){return i("div",{key:a,staticClass:"form-group box_flex align_center"},["face"!==t.type?i("div",{staticClass:"label",class:{require:t.require}},[i("span",[e._v(e._s(t.name)+":")])]):e._e(),e._v(" "),"input"==t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:e.addParams[t.value],expression:"addParams[item.value]"}],staticClass:"form-control search-input organization-input",attrs:{type:"text",disabled:e.isEdit&&t.noEdit},domProps:{value:e.addParams[t.value]},on:{input:function(a){a.target.composing||e.$set(e.addParams,t.value,a.target.value)}}}):e._e(),e._v(" "),"longInput"==t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:e.addParams[t.value],expression:"addParams[item.value]"}],staticClass:"long-input form-control search-input organization-input",attrs:{type:"text",disabled:e.isEdit&&t.noEdit},domProps:{value:e.addParams[t.value]},on:{input:function(a){a.target.composing||e.$set(e.addParams,t.value,a.target.value)}}}):e._e(),e._v(" "),"address"==t.type?i("v-select",{attrs:{options:e.getAddressOptions("province"),search:!0,"options-value":"name","options-label":"name","data-index":a},model:{value:e.addParams.province,callback:function(t){e.$set(e.addParams,"province",t)},expression:"addParams['province']"}}):e._e(),e._v(" "),e.addParams.province&&"address"==t.type?i("v-select",{attrs:{options:e.getAddressOptions("city",e.addParams.province),search:!0,"options-value":"name","options-label":"name"},model:{value:e.addParams.city,callback:function(t){e.$set(e.addParams,"city",t)},expression:"addParams['city']"}}):e._e(),e._v(" "),e.addParams.city&&"address"==t.type?i("v-select",{attrs:{options:e.getAddressOptions("area",e.addParams.city,e.addParams.province),search:!0,"options-value":"name","options-label":"name"},model:{value:e.addParams.area,callback:function(t){e.$set(e.addParams,"area",t)},expression:"addParams['area']"}}):e._e(),e._v(" "),"detect"==t.type?i("detect",{attrs:{url:t.url,searchVal:e.addParams[t.label],placeholder:t.placeholder},on:{afterSelected:function(a){e.afterDetect(a,t)}}}):e._e(),e._v(" "),"select"==t.type?i("v-select",{attrs:{options:e.getSelectOptions(t.value),"options-value":"id","options-label":"text","close-on-select":"",justify:""},model:{value:e.addParams[t.value],callback:function(a){e.$set(e.addParams,t.value,a)},expression:"addParams[item.value]"}}):e._e(),e._v(" "),"date"==t.type?i("v-datepicker",{model:{value:e.addParams[t.value],callback:function(a){e.$set(e.addParams,t.value,a)},expression:"addParams[item.value]"}}):e._e()],1)})],2),e._v(" "),i("div",{staticClass:"form-wrap box_flex align_center input_wrap"},e._l(e.addOptions.filter(function(e,t){return t>=6}),function(t,a){return i("div",{key:a,staticClass:"form-group box_flex align_center"},["face"!==t.type?i("div",{staticClass:"label",class:{require:t.require}},[i("span",[e._v(e._s(t.name)+":")])]):e._e(),e._v(" "),"input"==t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:e.addParams[t.value],expression:"addParams[item.value]"}],staticClass:"form-control search-input organization-input",attrs:{type:"text",disabled:e.isEdit&&t.noEdit},domProps:{value:e.addParams[t.value]},on:{input:function(a){a.target.composing||e.$set(e.addParams,t.value,a.target.value)}}}):e._e(),e._v(" "),"longInput"==t.type?i("input",{directives:[{name:"model",rawName:"v-model",value:e.addParams[t.value],expression:"addParams[item.value]"}],staticClass:"long-input form-control search-input organization-input",attrs:{type:"text",disabled:e.isEdit&&t.noEdit},domProps:{value:e.addParams[t.value]},on:{input:function(a){a.target.composing||e.$set(e.addParams,t.value,a.target.value)}}}):e._e(),e._v(" "),"address"==t.type?i("v-select",{attrs:{options:e.getAddressOptions("province"),search:!0,"options-value":"name","options-label":"name","data-index":a},model:{value:e.addParams.province,callback:function(t){e.$set(e.addParams,"province",t)},expression:"addParams['province']"}}):e._e(),e._v(" "),e.addParams.province&&"address"==t.type?i("v-select",{attrs:{options:e.getAddressOptions("city",e.addParams.province),search:!0,"options-value":"name","options-label":"name"},model:{value:e.addParams.city,callback:function(t){e.$set(e.addParams,"city",t)},expression:"addParams['city']"}}):e._e(),e._v(" "),e.addParams.city&&"address"==t.type?i("v-select",{attrs:{options:e.getAddressOptions("area",e.addParams.city,e.addParams.province),search:!0,"options-value":"name","options-label":"name"},model:{value:e.addParams.area,callback:function(t){e.$set(e.addParams,"area",t)},expression:"addParams['area']"}}):e._e(),e._v(" "),"detect"==t.type?i("detect",{attrs:{url:t.url,searchVal:e.addParams[t.label],placeholder:t.placeholder},on:{afterSelected:function(a){e.afterDetect(a,t)}}}):e._e(),e._v(" "),"select"==t.type?i("v-select",{attrs:{options:e.getSelectOptions(t.value),"options-value":"id","options-label":"text","close-on-select":"",justify:""},model:{value:e.addParams[t.value],callback:function(a){e.$set(e.addParams,t.value,a)},expression:"addParams[item.value]"}}):e._e(),e._v(" "),"date"==t.type?i("v-datepicker",{model:{value:e.addParams[t.value],callback:function(a){e.$set(e.addParams,t.value,a)},expression:"addParams[item.value]"}}):e._e()],1)}),0),e._v(" "),e._m(0),e._v(" "),i("div",{staticClass:"form-wrap box_flex align_center"},e._l(e.imgList,function(t,a){return i("div",{key:a,staticClass:"img-div"},[i("img",{staticClass:"img",attrs:{src:t},on:{click:function(a){return e.showImgDetail(t)}}})])}),0),e._v(" "),i("div",{staticClass:"box_flex flex_center",staticStyle:{padding:"30px 0"}},[i("button",{staticClass:"btn submit-btn",on:{click:e.save}},[e._v("保存")])]),e._v(" "),i("v-modal",{staticClass:"img_modal",attrs:{show:e.showImgDetailStatus,backdrop:"true"},on:{onHide:function(t){e.showImgDetailStatus=!1}}},[i("div",{staticClass:"modal-body box_flex flex_center",style:{transform:"scale("+e.deleteImgWidth+")"},attrs:{slot:"modal-body",tyle:"width:400px;"},on:{click:function(t){e.showImgDetailStatus=!1}},slot:"modal-body"},[i("img",{staticStyle:{width:"100%"},attrs:{id:"detailImg",src:e.imgDetailSrc,alt:""}})])])],1):i("div",{staticClass:"enroll"},[i("v-table",{ref:"enrollTable",attrs:{title:"录取列表",url:e.enrollUrl+e.timestamp,columnsControl:!0,pagesize:"10",idField:"id",columns:e.enrollColumns,multiple:"true",order:!0,search:!1},on:{afterChecked:e.afterChecked}},[i("div",{staticClass:"btn-group pull-right",attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[i("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"uploadImg"},on:{change:e.submitImg}}),e._v(" "),i("button",{staticClass:"btn batch-add-btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:e.importImg}},[e._v("图片导入")]),e._v(" "),i("button",{staticClass:"btn batch-add-btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:function(t){return e.changgeImportParams("add")}}},[e._v(e._s(e.translate.batch)+e._s(e.translate.add))]),e._v(" "),i("button",{staticClass:"btn batch-add-btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:function(t){return e.changgeImportParams("edit")}}},[e._v(e._s(e.translate.batch)+e._s(e.translate.edit))]),e._v(" "),i("button",{staticClass:"btn batch-add-btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:e.batchExport}},[e._v(e._s(e.translate.batch)+e._s(e.translate.export))])])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"importPage"===e.curRoute,expression:"curRoute === 'importPage'"}],staticClass:"importPageClass"},[i("v-import",e._b({on:{backParentPage:function(t){e.curRoute="allStaff"}}},"v-import",e.importParams,!1))],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"form-wrap box_flex align_center"},[t("div",{staticClass:"form-group box_flex align_center"},[t("div",{staticClass:"label require"},[this._v("高考排名材料:")])])])}]};var n=function(e){a("K1Cl"),a("neC0")},r=a("C7Lr")(i.a,s,!1,n,"data-v-7dcc48c8",null);t.default=r.exports}});