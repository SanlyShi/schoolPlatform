webpackJsonp([80],{O4De:function(t,e,a){"use strict";(function(t){var i=a("kV13"),s=a("C331");e.a={props:{account:{userId:"",userName:"",type:"",schoolId:""}},data:function(){return{tabList:[{id:"system",name:"系统应用",isShow:!0},{id:"teacher",name:"教职工应用",isShow:!0},{id:"instructor",name:"辅导员应用",isShow:!0},{id:"student",name:"学生应用",isShow:!0},{id:"freshman",name:"新生应用",isShow:!0},{id:"payment",name:"缴费应用",isShow:!1}],applyType:[{id:"teacher",name:"教职工应用"},{id:"instructor",name:"辅导员应用"},{id:"student",name:"学生应用"},{id:"freshman",name:"新生应用"}],curIndex:0,systemApps:[],typeList:{student:{bigType:"student",types:[]},freshman:{bigType:"freshman",types:[]},instructor:{bigType:"instructor",types:[]},teacher:{bigType:"teacher",types:[]}},appTypeSearchList:{student:{bigType:"student",types:[]},freshman:{bigType:"freshman",types:[]},instructor:{bigType:"instructor",types:[]},teacher:{bigType:"teacher",types:[]}},searchName:"",systemAppList:[{id:"hygienism",name:"卫生检查",route:"",isShow:!0,imgPath:"people",imgType:"1",background:"linear-gradient(-135deg, rgb(90, 193, 95) 0%, rgb(73, 174, 78) 100%)"},{id:"iSign",name:"i签到",route:"/ISignIn/MISignInList",isShow:!0,imgPath:"i_sign.png",imgType:"5",background:"linear-gradient(-135deg, rgb(90, 193, 95) 0%, rgb(73, 174, 78) 100%)"},{id:"appointment",name:"教室预约",route:"",isShow:!1,imgPath:"appointment.png",imgType:"5",background:"linear-gradient(-135deg, #5067d7 0%, #3f53b8 100%)"},{id:"partTime",name:"勤工助学",route:"/partTime/positionList",isShow:!1,imgPath:"people",imgType:"1",background:"linear-gradient(-135deg, rgb(130, 193, 95) 0%, rgb(230, 204, 250) 100%)"},{id:"psychology",name:"心理咨询",route:"/psychology/MCampus",isShow:!0,imgPath:"psychology.png",imgType:"5",background:"linear-gradient(-135deg, rgb(130, 193, 95) 0%, rgb(230, 204, 250) 100%)"},{id:"stuInfo",name:"学生信息",route:"/studentInfo/studentInfo",isShow:!1,imgPath:"people",imgType:"1",background:"linear-gradient(-135deg, rgb(90, 193, 95) 0%, rgb(73, 174, 78) 100%)"}],paymentAppList:[],popularApply:[],favoriteAppList:[],isStudent:!1}},created:function(){var t=this;this.getSystemApp(),Object(s.e)({url:"/api/relationship/instructor/check",type:"get",success:function(e){e.state&&e.data&&(t.isStudent=!!(e.data.findIndex(function(t){return"student"===t})>-1),t.systemAppList.forEach(function(e){"partTime"==e.id&&(e.isShow=t.isStudent,t.$set(e,"isShow",t.isStudent)),"stuInfo"==e.id&&(t.$set(e,"isShow",!t.isStudent),e.isShow=!t.isStudent)}))}}),Object(s.e)({url:"/api/payment/userallproject",type:"get",data:{page:0,size:9999},success:function(e){e.state?(t.paymentAppList=e.data.content,t.paymentAppList.forEach(function(e){t.$set(e,"imgPath","tuition"),t.$set(e,"imgType","2")}),t.paymentAppList.length>0&&t.tabList.forEach(function(t){"payment"==t.id&&(t.isShow=!0)})):t._toast(e.message)}}),this.initPageData()},methods:{isEmpty:function(t){var e=0;return t.map(function(t){t.appList.length>0&&e++}),!!e},getCollectApp:function(){var t=this;Object(s.d)("/api/app/search?category=COLLECTED").then(function(e){e.state&&(t.favoriteAppList=e.data)})},getCookie:function(t){var e,a=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(a))?unescape(e[2]):null},getSystemApp:function(){var t=this,e="/api/official/schools/empower/config?schoolId="+this.getCookie("SAAS_S_ID");Object(s.d)(e).then(function(e){if(e.state&&e.data&&e.data.system&&(t.systemApps=e.data.system,t.systemApps.findIndex(function(t){return"appointment"===t.name})>-1)){var a=t.systemAppList.findIndex(function(t){return"appointment"==t.id});t.systemAppList[a].isShow=!0}})},_containsSearchName:function(t){var e=this,a=!1;return t&&t.length>0&&t.forEach(function(t){t.appList&&t.appList.length>0&&e._containsSearchName(t.appList)?a=!0:!(t.appList&&t.appList.length>0)&&t.name&&t.name.indexOf(e.searchName)>=0&&(a=!0)}),a},initPageData:function(){var t=this;this.getCollectApp(),this.initTypes("1","list"),this.initTypes("2","list"),this.initTypes("3","list"),this.initTypes("4","list"),Object(s.e)({url:"/api/app/search?category=POPULAR&typeId=&userType=&keyword=&capital=",type:"get",data:{isPublished:!0},success:function(e){t.popularApply=e.data.sort(function(t,e){return t.sort-e.sort})}})},initTypes:function(t,e){var a=this;"search"===e&&(a.appTypeSearchList.student.types.splice(0,a.appTypeSearchList.student.types.length),a.appTypeSearchList.freshman.types.splice(0,a.appTypeSearchList.freshman.types.length),a.appTypeSearchList.instructor.types.splice(0,a.appTypeSearchList.instructor.types.length),a.appTypeSearchList.teacher.types.splice(0,a.appTypeSearchList.teacher.types.length)),Object(s.e)({url:"/api/app/type",type:"get",data:{userType:t},success:function(s){s.state?(s.data.forEach(function(s,n){var p={};for(var c in s)i.default.set(p,c,s[c]);i.default.set(p,"appList",[]),"list"===e?"1"===t?a.typeList.student.types.push(p):"2"===t?a.typeList.teacher.types.push(p):"3"===t?a.typeList.freshman.types.push(p):a.typeList.instructor.types.push(p):"1"===t?a.appTypeSearchList.student.types.push(p):"2"===t?a.appTypeSearchList.teacher.types.push(p):"3"===t?a.appTypeSearchList.freshman.types.push(p):a.appTypeSearchList.instructor.types.push(p)}),a.initAppList(t,e)):a._toast(s.message)}})},initAppList:function(t,e){var a=this,i=null;"list"===e?(i="1"===t?a.typeList.student:"2"===t?a.typeList.teacher:"3"===t?a.typeList.freshman:a.typeList.instructor,a.searchName=""):i="1"===t?a.appTypeSearchList.student:"2"===t?a.appTypeSearchList.teacher:"3"===t?a.appTypeSearchList.freshman:a.appTypeSearchList.instructor,Object(s.e)({url:"/api/app",type:"get",data:{name:a.searchName,userType:t,isPublished:!0},success:function(t){t.state?t.data.forEach(function(t,e){i.types.forEach(function(e,a){e.id===t.appType.id&&e.appList.push(t)})}):a._toast(t.message)}})},_checkDetail:function(t,e,a){var i=this;Object(s.e)({url:"/api/app/"+t.id+"/business/now",type:"get",success:function(s){s.state?s.data.length>0?"FORM"===t.setting.type?i.$emit("addBread",{route:"/form/MFormLayout?appId="+t.id,title:"",curBusiness:s.data[0],businessList:s.data.map(function(t){return t.value=t.business.name,t.key=t.business.id,t}),type:{typeTitle:e,childName:a}}):"LINK"===t.setting.type?window.location.href=t.setting.linkUrl:i.$emit("addBread",{route:"/form/MFlowDetail?appId="+t.id+"&businessId="+s.data[0].business.id,title:t.name,businessList:s.data.map(function(t){return t.value=t.business.name,t.key=t.business.id,t}),curBusiness:s.data[0]}):"LINK"===t.setting.type?window.location.href=t.setting.linkUrl:i._toast("暂无业务"):i._toast(s.message)}})},checkSysDetail:function(t){switch(t.id){case"hygienism":this._hygienism();break;case"appointment":this._toAppointment();break;default:this.toDetail(t.route)}},_hygienism:function(){var t=this;Object(s.e)({url:"/api/apartment/sanitaryInspection/role",type:"get",success:function(e){return e.state?e.data?(e&&e.data[0]&&e.data[0].canApplyOnAuthority?window.location.href=obj.setting.linkUrl:t.$toast("你无权申请该应用"),void t.$emit("addBread",{route:"/apartment/HygienismList",title:""})):t.$toast("您没有权限访问"):t.$toast(e.message)}})},toDetail:function(t){this.$emit("addBread",{route:t,title:""})},_toAppointment:function(){-1!==window.location.host.indexOf(":3031")?window.location.href="http://"+window.location.host.replace("3031","9004")+"/appointment/":window.location.href="./jsyymobile/"},_paymentFees:function(t){var e=this;t?(this.$waiting.show(),Object(s.e)({url:"/api/payment/getInProject",type:"get",data:{id:t.id},success:function(t){t.state?t.data&&t.data.status?"NOT_PAID"===t.data.status?e.$emit("addBread",{route:"/payHall/MPaymentApplication",title:t.data.name,data:t.data}):e.$toast("您已缴费，无需缴费！"):e.$toast("该应用无需缴费！"):e.$toast(t.message)}}).always(function(){e.$waiting.close()})):this.$emit("addBread",{route:"payHall/MPaymentRecords",title:"缴费记录"})},_toast:function(t){this.$vux.toast.show({text:t,position:"bottom",type:"text"})}},mounted:function(){var e=t(document).height(),a=navigator.userAgent;(a.indexOf("Android")>-1||a.indexOf("Adr")>-1)&&t(window).resize(function(){t(document).height()<e?t(".mobile-tabbar").css("position","static"):t(".mobile-tabbar").css("position","fixed")})}}}).call(e,a("qqHy"))},"OJv/":function(t,e){},ZElc:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("hUSz");var i=a("O4De"),s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{height:"100%"},attrs:{id:"workPage"}},[i("view-box",[i("x-header",{staticClass:"workPage-header",attrs:{"left-options":{showBack:!1}}},[i("div",{attrs:{slot:"overwrite-title"},slot:"overwrite-title"},[i("div",{staticClass:"search_icon"}),t._v(" "),i("search",{ref:"search",staticClass:"header-search aavv",attrs:{"cancel-text":" ",position:"absolute",placeholder:"搜索","show-clear":!0,"auto-scroll-to-top":"",top:"0"},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}})],1)]),t._v(" "),i("div",{staticClass:"workPage-content"},[i("div",{staticClass:"apply-type-group"},[i("div",{staticClass:"apply-type-head"},[t._v("我的收藏")]),t._v(" "),t._containsSearchName(t.favoriteAppList)?i("div",{staticClass:"apply-list"},t._l(t.favoriteAppList,function(e,a){return e.name.indexOf(t.searchName)>=0?i("div",{key:a,staticClass:"apply",on:{click:function(a){return t._checkDetail(e)}}},[i("div",{staticClass:"app-icon-div",style:{"background-image":e.background}},[e.imgType&&"1"!==e.imgType?"2"===e.imgType?i("i",{staticClass:"maticon apply-icon theme-icon-application"},[i("span",{staticClass:"saasicon-36px",class:["saasicon-36px-"+e.imgPath]})]):t._e():i("i",{staticClass:"maticon apply-icon theme-icon-application",domProps:{innerHTML:t._s(t.icons(e.imgPath))}},[t._v(t._s(e.imgPath))])]),t._v(" "),i("p",{staticClass:"text-center apply-title"},[t._v(t._s(e.name))])]):t._e()}),0):i("div",{staticClass:"empty"},[i("img",{attrs:{src:a("cjmt"),alt:""}}),t._v(" "),i("p",[t._v("暂无应用")])])]),t._v(" "),i("div",{staticClass:"apply-type-group"},[i("div",{staticClass:"apply-type-head"},[t._v("推荐应用")]),t._v(" "),t._containsSearchName(t.popularApply)?i("div",{staticClass:"apply-list"},t._l(t.popularApply,function(e,a){return e.name.indexOf(t.searchName)>=0?i("div",{key:a,staticClass:"apply",on:{click:function(a){return t._checkDetail(e)}}},[i("div",{staticClass:"app-icon-div",style:{"background-image":e.background}},[e.imgType&&"1"!==e.imgType?"2"===e.imgType?i("i",{staticClass:"maticon apply-icon theme-icon-application"},[i("span",{staticClass:"saasicon-36px",class:["saasicon-36px-"+e.imgPath]})]):t._e():i("i",{staticClass:"maticon apply-icon theme-icon-application",domProps:{innerHTML:t._s(t.icons(e.imgPath))}},[t._v(t._s(e.imgPath))])]),t._v(" "),i("p",{staticClass:"text-center apply-title"},[t._v(t._s(e.name))])]):t._e()}),0):i("div",{staticClass:"empty"},[i("img",{attrs:{src:a("cjmt"),alt:""}}),t._v(" "),i("p",[t._v("暂无应用")])])]),t._v(" "),i("div",{staticClass:"apply-type-group"},[i("div",{staticClass:"apply-tab-wrap"},[i("div",{staticClass:"apply-tab"},t._l(t.tabList,function(e,a){return e.isShow?i("div",{key:a,staticClass:"apply-tab-item",class:{active:a==t.curIndex},on:{click:function(e){t.curIndex=a}}},[t._v(t._s(e.name))]):t._e()}),0)]),t._v(" "),t._l(t.applyType,function(e,s){return t.tabList[t.curIndex].id==e.id&&t.typeList[e.id].types.length>0&&t.isEmpty(t.typeList[e.id].types)&&t._containsSearchName(t.typeList[e.id].types)?i("div",{key:s},t._l(t.typeList[e.id].types,function(e,a){return e.appList.length>0&&t._containsSearchName(e.appList)?i("div",{key:a,staticClass:"apply-type-list"},["在线缴费"===e.name?i("div",["ixy"===t.account.schoolId?i("label",{staticClass:"pull-left type-head"},[t._v(t._s(e.name))]):t._e(),t._v(" "),"ixy"===t.account.schoolId?i("div",{staticClass:"apply-list"},t._l(e.appList,function(a,s){return a.name.indexOf(t.searchName)>=0?i("div",{key:s,staticClass:"apply",on:{click:function(i){return t._checkDetail(a,e.name,a.name)}}},[i("div",{staticClass:"app-icon-div",style:{"background-image":a.background}},[a.imgType&&"1"!==a.imgType?"2"===a.imgType?i("i",{staticClass:"maticon apply-icon theme-icon-application"},[i("span",{staticClass:"saasicon-36px",class:["saasicon-36px-"+a.imgPath]})]):t._e():i("i",{staticClass:"maticon apply-icon theme-icon-application",domProps:{innerHTML:t._s(t.icons(a.imgPath))}},[t._v(t._s(a.imgPath))])]),t._v(" "),i("p",{staticClass:"text-center apply-title"},[t._v(t._s(a.name))])]):t._e()}),0):t._e()]):i("div",[i("label",{staticClass:"pull-left type-head"},[t._v(t._s(e.name))]),t._v(" "),i("div",{staticClass:"apply-list"},t._l(e.appList,function(a,s){return a.name.indexOf(t.searchName)>=0?i("div",{key:s,staticClass:"apply",on:{click:function(i){return t._checkDetail(a,e.name,a.name)}}},[i("div",{staticClass:"app-icon-div",style:{"background-image":a.background}},[a.imgType&&"1"!==a.imgType?"2"===a.imgType?i("i",{staticClass:"maticon apply-icon theme-icon-application"},[i("span",{staticClass:"saasicon-36px",class:["saasicon-36px-"+a.imgPath]})]):t._e():i("i",{staticClass:"maticon apply-icon theme-icon-application",domProps:{innerHTML:t._s(t.icons(a.imgPath))}},[t._v(t._s(a.imgPath))])]),t._v(" "),i("p",{staticClass:"text-center apply-title"},[t._v(t._s(a.name))])]):t._e()}),0)])]):t._e()}),0):t.tabList[t.curIndex].id==e.id?i("div",{staticClass:"empty"},[i("img",{attrs:{src:a("cjmt"),alt:""}}),t._v(" "),i("p",[t._v("暂无应用")])]):t._e()}),t._v(" "),"system"==t.tabList[t.curIndex].id&&t.systemAppList.length>0&&t._containsSearchName(t.systemAppList)?i("div",{staticClass:"apply-list"},t._l(t.systemAppList,function(e,a){return e.isShow&&e.name.indexOf(t.searchName)>=0?i("div",{key:a,staticClass:"apply",on:{click:function(a){return t.checkSysDetail(e)}}},[i("div",{staticClass:"app-icon-div",style:{"background-image":e.background}},["1"==e.imgType?i("i",{staticClass:"maticon apply-icon theme-icon-application",domProps:{innerHTML:t._s(t.icons(e.imgPath))}},[t._v(t._s(e.imgPath))]):t._e(),t._v(" "),"5"==e.imgType?i("img",{staticClass:"appointment",attrs:{src:"../../../static/image/"+e.imgPath}}):t._e()]),t._v(" "),i("p",{staticClass:"text-center apply-title"},[t._v(t._s(e.name))])]):t._e()}),0):"payment"==t.tabList[t.curIndex].id&&t.paymentAppList.length>0&&t._containsSearchName(t.paymentAppList)?i("div",{staticClass:"apply-list"},t._l(t.paymentAppList,function(e,a){return e.name.indexOf(t.searchName)>=0?i("div",{key:a,staticClass:"apply",on:{click:function(a){return t._paymentFees(e)}}},[i("div",{staticClass:"app-icon-div",style:{"background-image":e.background}},[e.imgType&&"1"!==e.imgType?"2"===e.imgType?i("i",{staticClass:"maticon apply-icon theme-icon-application"},[i("span",{staticClass:"saasicon-36px",class:["saasicon-36px-"+e.imgPath]})]):t._e():i("i",{staticClass:"maticon apply-icon theme-icon-application",domProps:{innerHTML:t._s(t.icons(e.imgPath))}},[t._v(t._s(e.imgPath))])]),t._v(" "),i("p",{staticClass:"text-center apply-title"},[t._v(t._s(e.name))])]):t._e()}),0):"system"==t.tabList[t.curIndex].id||"payment"==t.tabList[t.curIndex].id?i("div",{staticClass:"empty"},[i("img",{attrs:{src:a("cjmt"),alt:""}}),t._v(" "),i("p",[t._v("暂无应用")])]):t._e()],2)])],1)],1)},staticRenderFns:[]};var n=function(t){a("OJv/")},p=a("C7Lr")(i.a,s,!1,n,null,null);e.default=p.exports},cjmt:function(t,e,a){t.exports=a.p+"static/img/pic_err_none@2x.5dcfd4e.png"},hUSz:function(t,e,a){"use strict";(function(t){a("kV13"),a("C331")}).call(e,a("qqHy"))}});