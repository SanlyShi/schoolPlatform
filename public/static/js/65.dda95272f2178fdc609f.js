webpackJsonp([65],{"/yp1":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("kV13"),l=s("C331"),i=s("3cXf"),r=s.n(i),n={props:{classId:{default:0}},created:function(){var t=this,e=localStorage.getItem("lang"),s=this;Object(l.g)(e)&&(this.lang=e),Object(l.e)({url:"/api/relationship/getTempleteFileName/relClassMember",dataType:"json",type:"get",success:function(t){t.state&&(s.importParams.templateName=t.data)}}),this.columns=[{id:"studentId",title:this.translate.studentId,className:"text-left",hidden:!1,search:{type:"input",data:{autoFocus:!0}}},{id:"studentName",title:this.translate.name,className:"text-left",hidden:!1,search:{type:"input"},formatter:function(t,e){return t.name}},{id:"instructor",title:this.translate.instructor,className:"text-left",hidden:!1},{id:"college",title:this.translate.college,className:"text-left",hidden:!1},{id:"department",title:this.translate.department,className:"text-left",hidden:!1},{id:"grade",title:this.translate.grade,className:"text-center",hidden:!1},{id:"studentType",title:this.translate.studentType,className:"text-left",hidden:!1},{id:"classCommitteeType",title:this.translate.position,className:"text-left",hidden:!1},{id:"opt",title:this.translate.opt,className:"text-center",width:"60px",hidden:!1,formatter:function(){return[{tag:"a",text:s.translate.remove,className:"opt-btn",callback:function(t,e){confirm(s.translate.removeConfirmTip)&&(s.$waiting.show(),Object(l.e)({url:"/api/relClass/deleteStudent/"+s.classId+"?userId="+t.studentUserId,type:"post",success:function(t){t.state?t.data.success?(s.url="/table-data/relClass/getClassStudents/"+s.classId+"?timestamp="+(new Date).getTime(),s.$toast(s.translate.removeSuccessTip)):s.$toast(t.data.message):s.$toast(s.translate.removeFailedTip+":"+t.message)}}).always(function(){s.$waiting.close()}))}}]}}],this.importParams.parentPageTitle=this.translate.tableName,this.importParams.importBtnType=[{name:this.translate.overriteImport,url:"/relClass/addStudentsByTemplate/"+s.classId,method:"post",isShowBtn:!0,success:function(e){e.state&&(t.url="/table-data/relClass/getClassStudents/"+s.classId+"?timestamp="+(new Date).getTime())}}]},data:function(){return{columns:[],url:"/table-data/relClass/getClassStudents/"+this.classId,importParams:{parentPageTitle:"",downloadTemplateUrl:"/relClass/downloadAddStudentTemplate/"+this.classId,downloadErrorTemplateUrl:"/relationship/downloadErrorExcel",checkTemplateUrl:"/relClass/school/uploadAddStudentTemplateExcel",templateName:"",importBtnType:null},showSingleAddModal:!1,department:{},classMembers:{},definedSearch:{},studentId:"",studentUserId:"",singleAddText:"",isDisabled:!0,isSingleDisabled:!0,isCheckResult:!1,checkResult:"",fileName:"",isParentPage:!0,lang:"zh-cn"}},computed:{translate:function(){return Object(l.g)(this.lang).classMembers}},methods:{singleAddModal:function(){this.showSingleAddModal=!0,this.isCheckResult=!1},checkStudentId:function(){var t=this;if(!this.studentId)return t.isCheckResult=!0,t.singleAddText=t.translate.enterStudentId,!1;Object(l.e)({url:"/api/relClass/checkStudent/"+this.studentId,dataType:"json",type:"get",success:function(e){t.isCheckResult=!0,e.state?e.data.hasThisPerson?(t.studentUserId=e.data.userId,t.singleAddText=e.data.name,t.isSingleDisabled=!1):(t.singleAddText=t.translate.noExist,t.isSingleDisabled=!0):(t.singleAddText=e.message,t.isSingleDisabled=!0)}})},batchAddModal:function(){this.isParentPage=!1},backParentPage:function(){this.isParentPage=!0},_backClassList:function(){this.$emit("backClassList","classManage")},sureSingleAdd:function(t){if(t)return!1;var e=this;e.showSingleAddModal=!1,e.$waiting.show(),Object(l.e)({url:"/api/relClass/addStudent/"+this.classId,dataType:"json",data:{userId:this.studentUserId},type:"post",success:function(t){t.state?t.data.success?(e.url="/table-data/relClass/getClassStudents/"+e.classId+"?timestamp="+(new Date).getTime(),e.$toast(e.translate.submitSuccessTip)):e.$toast(t.data.message):e.$toast(e.translate.submitFailedTip+":"+t.message)}}).always(function(){e.$waiting.close()})}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isParentPage?s("div",{attrs:{id:"classMembers-page"}},[s("div",{staticClass:"back-parent-page"},[s("button",{staticClass:"btn back-btn clearBtnBorder",attrs:{type:"button"},on:{click:t._backClassList}},[s("i",{staticClass:"maticon back-icon-btn",domProps:{innerHTML:t._s(t.icons("arrow_back"))}},[t._v("arrow_back")]),s("span",{staticClass:"nav-title"},[t._v(t._s(t.translate.parentPage))])])]),t._v(" "),s("div",{staticClass:"row text-center"},[s("v-table",{attrs:{title:t.translate.tableName,url:t.url,pagesize:"10",idField:"id",columns:t.columns,order:!0,search:!0}},[s("div",{staticClass:"btn-group pull-right",attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[s("button",{staticClass:"btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:function(e){return t.singleAddModal()}}},[t._v(t._s(t.translate.single)+t._s(t.translate.addNew))]),t._v(" "),s("button",{staticClass:"btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:function(e){return t.batchAddModal()}}},[t._v(t._s(t.translate.batch)+t._s(t.translate.addNew))])])])],1),t._v(" "),s("v-modal",{attrs:{show:t.showSingleAddModal,effect:"fade",width:"430"}},[s("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v("\n        "+t._s(t.translate.addNew)+t._s(t.translate.student)+"\n    ")])]),t._v(" "),s("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[s("div",{staticClass:"form-group single-add-group"},[s("label",[t._v(t._s(t.translate.studentId)+":")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.studentId,expression:"studentId"}],staticClass:"form-control studentId-input search-input",attrs:{placeholder:t.translate.placeholder,type:"text","aria-describedby":"basic-singleAdd-id"},domProps:{value:t.studentId},on:{change:t.checkStudentId,input:function(e){e.target.composing||(t.studentId=e.target.value)}}}),t._v(" "),s("button",{staticClass:"btn check-btn clearBtnBorder",attrs:{type:"button"}},[t._v(t._s(t.translate.check))])]),t._v(" "),s("div",[s("label",{staticClass:"singleAddText"},[t._v(t._s(t.translate.name)+":")]),t._v(" "),t.isCheckResult?s("span",[t._v(t._s(t.singleAddText))]):s("span",[t._v(t._s(t.translate.singleAddText))])])]),t._v(" "),s("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showSingleAddModal=!1}}},[t._v(t._s(t.translate.cancel))]),t._v(" "),s("button",{staticClass:"btn submit-btn clearBtnBorder",class:{disabled:t.isSingleDisabled},attrs:{type:"button"},on:{click:function(e){return t.sureSingleAdd(t.isSingleDisabled)}}},[t._v(t._s(t.translate.sure))])])])],1):s("div",{staticClass:"import-page"},[s("v-import",t._b({attrs:{overflow:"inherit"},on:{backParentPage:t.backParentPage}},"v-import",t.importParams,!1))],1)},staticRenderFns:[]};var d=s("C7Lr")(n,o,!1,function(t){s("2hAd")},null,null).exports;a.default.component("v-schoolmembers",d);a.default.component("v-schoolmembers",d);var c={created:function(){var t=this,e=localStorage.getItem("lang"),s=this;Object(l.g)(e)&&(this.lang=e),Object(l.e)({url:"/api/relClass/school/getClassEditSelectOptions",dataType:"json",type:"get",success:function(t){if(t.state){var e=t.data;s.collegeOptions.addClass=e.colleges||[],s.gradeOptions.addClass=e.grades||[],s.levelOptions.addClass=e.learningLevels||[],s.orderNumberOptions=e.classNumbers||[]}else s.$toast(t.message)}}),Object(l.e)({url:"/api/relClass/school/getClassManageSelectOptions",dataType:"json",type:"get",success:function(t){if(t.state){var e=t.data;s.collegeOptions.search=e.colleges||[],s.gradeOptions.search=e.grades||[],s.levelOptions.search=e.learningLevels||[]}else s.$toast(t.message)}}),Object(l.e)({url:"/api/relClass/school/getDownloadTemplateConditions",dataType:"json",type:"get",success:function(t){if(t.state){var e=t.data;s.collegeOptions.template=e.colleges||[],s.gradeOptions.template=e.grades||[],s.haveClass=e.haveClass,s.relationship=e.relationship}else s.$toast(t.message)}}),Object(l.e)({url:"/api/relationship/getTempleteFileName/relClassStudent",dataType:"json",type:"get",success:function(t){t.state&&(s.importParams.templateName=t.data)}}),this._initColumnsOfSearch(),this.committeeColumns=[{id:"classCommittee",title:this.translate.position,className:"text-left",hidden:!1},{id:"studentId",title:this.translate.studentId,className:"text-left",hidden:!1},{id:"studentName",title:this.translate.name,className:"text-left",hidden:!1},{id:"startTime",title:this.translate.serve+this.translate.startTime,className:"text-center",hidden:!1},{id:"endTime",title:this.translate.serve+this.translate.endTime,className:"text-center",hidden:!1},{id:"opt",title:this.translate.opt,className:"text-center",width:"70px",hidden:!1,formatter:function(){return[{tag:"a",text:s.translate.remove,className:"opt-btn",callback:function(t,e){confirm(s.translate.removeConfirmTip)&&(s.editClass.classCommitteePeople.splice(e,1),s.isEditClass=!0)}}]}}],this.historyRecordColumns=[{id:"name",title:this.translate.name,className:"text-left",hidden:!1},{id:"teacherId",title:this.translate.teacherAndStudentId,className:"text-left",hidden:!1},{id:"startTime",title:this.translate.serve+this.translate.startTime,className:"text-center",hidden:!1},{id:"endTime",title:this.translate.serve+this.translate.endTime,className:"text-center",hidden:!1}],this.importParams.parentPageTitle=this.translate.tableName,this.importParams.importBtnType=[{name:this.translate.overriteImport,url:"/relClass/updateStudentClass",method:"post",isShowBtn:!0,success:function(e){e.state&&(t.url="/table-data/relClass/school/getClasses?timestamp="+new Date)}}],this.classHistory=this.translate.noClassText},data:function(){return{columns:[],committeeColumns:[],historyRecordColumns:[],url:"/table-data/relClass/school/getClasses",showAddClassModal:!1,showEditClassModal:!1,showAddCommitteeModal:!1,isManagePage:"classManage",isShowMemberPage:!1,classId:0,addNewClass:{college:"",collegeId:"",grade:"",gradeId:"",level:"",levelId:"",faculty:"",orderNumber:[],orderNumberId:[],createClass:"",classNumber:0,classText:""},newClassData:{className:"",classFullName:"",college:"",learningLevel:"",grade:"",classNumber:""},classList:[],newClassMange:{},definedSearch:{college:"",learningLevel:"",grade:"",classFullName:""},modalType:"",collegeOptions:{search:[],addClass:[],template:[]},levelOptions:{search:[],addClass:[]},gradeOptions:{search:[],addClass:[],template:[]},positionOption:[],orderNumberOptions:[],relationshipPick:"-1",classesPick:"0",templateData:{collegeId:"",gradeId:""},editClass:{classId:"",classFullName:"",createTime:"",dissolutionTime:"",classLeaderId:"",classLeaderUserId:"",classLeaderName:"",classLeaderStartTime:"",classLeaderEndTime:"",instructorId:"",instructorUserId:"",instructorName:"",instructorStartTime:"",instructorEndTime:"",classCommitteePeople:[],classLeaders:[],instructors:[]},committeeData:{classCommitteeId:"",classCommittee:"",studentUserId:"",studentId:"",studentName:"",startTime:"",endTime:""},addCommitteeJson:{classCommittee:"",studentId:"",studentName:"",startTime:"",endTime:""},newCommittee:{name:"",studentId:"",studentName:"",defaultOptions:"",checkResult:""},positionType:{select:"",selectName:""},committeeTypes:[],positionOptType:"select",isDisabled:{updateData:!0},checkResult:"",checkMessage:{classLeader:"",instructor:""},classHistory:"",haveClass:[],relationship:[],fileName:"",isParentPage:!0,importParams:{parentPageTitle:"",downloadErrorTemplateUrl:"/relationship/downloadErrorExcel",checkTemplateUrl:"/relClass/school/uploadExcel",templateName:"",importBtnType:null},isEditClass:!1,defaultOptions:"-1",isnextStep:!1,editNewClassName:"",fullNameArr:[],newClassNameArr:[],orderNumberStr:"",lang:"zh-cn"}},computed:{translate:function(){return Object(l.g)(this.lang).classManage},downloadUrl:function(){return"/relClass/school/downloadTemplate?college="+this.templateData.collegeId+"&grade="+this.templateData.gradeId+"&relationship="+this.relationshipPick+"&haveClass="+this.classesPick},creatClass:function(){var t="";if(this.addNewClass.orderNumber.length>0)for(var e in this.addNewClass.classText=" ",t=this.translate.willBeCreated+this.addNewClass.orderNumber.length+this.translate.pieceClass+","+this.translate.classNameText+":\n",this.addNewClass.orderNumber)t+=this.addNewClass.college+this.addNewClass.faculty+this.addNewClass.grade+this.addNewClass.level+this.addNewClass.orderNumber[e]+this.addNewClass.classText+"\n";else t=this.translate.willBeCreated+this.addNewClass.classNumber+this.translate.pieceClass+","+this.translate.classNameText+":\n",t+=this.addNewClass.college+this.addNewClass.faculty+this.addNewClass.grade+this.addNewClass.level+this.addNewClass.orderNumber+this.addNewClass.classText;return this.editNewClassName=t,t}},methods:{_initColumnsOfSearch:function(){var t=this;this.columns=[{id:"classFullName",title:this.translate.classFullName,className:"text-left",hidden:!1,search:{type:"input"}},{id:"createTime",title:this.translate.established,className:"text-center",hidden:!1},{id:"dissolutionTime",title:this.translate.dissolutionTime,className:"text-center",hidden:!1},{id:"classLeader",title:this.translate.headTeacher,className:"text-left",hidden:!1},{id:"instructor",title:this.translate.instructor,className:"text-left",hidden:!1},{id:"studentCount",title:this.translate.numberOfMembers,className:"text-right",hidden:!1},{id:"opt",title:this.translate.opt,className:"text-center",width:"210px",hidden:!1,formatter:function(){return[{tag:"a",text:t.translate.edit,className:"opt-btn",callback:function(e,s){t.showEditClassModal=!0,t.isEditClass=!1,Object(l.e)({url:"/api/relClass/getClass/"+e.classId,dataType:"json",type:"get",success:function(e){if(e.state){var s=e.data;t.editClass.classId=s.classId,t.editClass.classFullName=s.classFullName,t.editClass.classLeaderId=s.classLeaderId,t.editClass.classLeaderUserId=s.classLeaderUserId,t.editClass.classLeaderName=s.classLeaderName,t.editClass.instructorId=s.instructorId,t.editClass.instructorUserId=s.instructorUserId,t.editClass.instructorName=s.instructorName,t.editClass.createTime=s.createTime,t.editClass.dissolutionTime=s.dissolutionTime,t.editClass.classLeaderStartTime=s.classLeaderStartTime,t.editClass.classLeaderEndTime=s.classLeaderEndTime,t.editClass.instructorStartTime=s.instructorStartTime,t.editClass.instructorEndTime=s.instructorEndTime,t.editClass.classCommitteePeople=s.classCommitteePersonVos,t.editClass.classLeaders=s.classLeaders,t.editClass.instructors=s.instructors,t.positionOption=s.classCommitteeTypes,t.committeeTypes.splice(0,t.committeeTypes.length)}else t.$toast(e.message)}})}},{tag:"a",text:t.translate.classMembers,className:"opt-btn",callback:function(e,s){t.isManagePage="memberList",t.isShowMemberPage=!0,t.classId=e.classId,t.$emit("showPathNav",e.classFullName)}},{tag:"a",text:t.translate.remove,className:"opt-btn",callback:function(e,s){confirm(t.translate.removeConfirmTip)&&Object(l.e)({url:"/api/relClass/deleteClass/"+e.classId,dataType:"json",type:"post",success:function(e){e.state?(t.url="/table-data/relClass/school/getClasses?timestamp="+(new Date).getTime(),t.$toast(t.translate.removeSuccessTip)):t.$toast(t.translate.removeFailedTip+":"+e.message)}})}}]}}]},studentClasses:function(){this.isParentPage=!1},backParentPage:function(){this.isParentPage=!0},backClassList:function(){this.isManagePage="classManage",this.isShowMemberPage=!1,this.$emit("hidePathNav")},createClass:function(){this.showAddClassModal=!0,this.addNewClass={college:"",collegeId:"",grade:"",gradeId:"",level:"",levelId:"",faculty:"",orderNumber:[],orderNumberId:[],createClass:"",classNumber:0,classText:""},this.classHistory=this.translate.noClassText,this.orderNumberStr="",this.isnextStep=!1},sureCreat:function(){var t=this,e=null;if(this.classList.splice(0,this.classList.length),this.newClassData.className=this.addNewClass.faculty,this.newClassData.college=this.addNewClass.collegeId,this.newClassData.learningLevel=this.addNewClass.levelId,this.newClassData.grade=this.addNewClass.gradeId,this.addNewClass.orderNumber.length>0)for(var s in this.addNewClass.orderNumber){if(this.newClassData.classFullName=this.newClassNameArr[s].replace(/(\s*$)/g,""),this.fullNameArr.indexOf(this.newClassData.classFullName)>=0)return this.$toast(this.newClassData.classFullName+"已存在");this.newClassData.classNumber=this.addNewClass.orderNumberId[s],e=JSON.parse(r()(this.newClassData)),this.classList.push(e)}else{if(this.newClassData.classFullName=this.newClassNameArr[0].replace(/(\s*$)/g,""),this.fullNameArr.indexOf(this.newClassData.classFullName)>=0)return this.$toast(this.newClassData.classFullName+"已存在");this.newClassData.classNumber="",e=JSON.parse(r()(this.newClassData)),this.classList.push(e)}Object(l.e)({url:"/api/relClass/addClass",dataType:"json",data:{classList:this.classList},type:"post",success:function(e){e.state?(t.getClassHistory(),t.url="/table-data/relClass/school/getClasses?timestamp="+(new Date).getTime(),t.$toast(t.translate.submitSuccessTip),t.showAddClassModal=!1):t.$toast(t.translate.submitFailedTip+":"+e.message)}})},collegeSelected:function(t){var e=this;this.addNewClass.collegeId=t.value,this.collegeOptions.addClass.forEach(function(t,s){e.addNewClass.collegeId===t.id&&(e.addNewClass.college=t.text)}),this.addNewClass.classNumber=1,this.getClassHistory()},gradeSelected:function(t){var e=this;this.addNewClass.gradeId=t.value,this.gradeOptions.addClass.forEach(function(t,s){e.addNewClass.gradeId===t.id&&(e.addNewClass.grade=t.text)}),this.addNewClass.classNumber=1,this.getClassHistory()},levelSelected:function(t){var e=this;this.addNewClass.levelId=t.value,this.levelOptions.addClass.forEach(function(t,s){e.addNewClass.levelId===t.id&&(e.addNewClass.level=t.text)}),this.addNewClass.classNumber=1,this.addNewClass.classText=this.translate.classText,this.getClassHistory()},orderNumberSelected:function(t){if(t.value.length>0){var e=[];for(var s in this.orderNumberStr=t.value,e=t.value.split(","),this.addNewClass.orderNumberId=e.sort(this.sortNumber),this.addNewClass.orderNumber=[],this.addNewClass.orderNumberId)for(var a in this.orderNumberOptions){if(this.addNewClass.orderNumberId[s]===this.orderNumberOptions[a].id)this.addNewClass.orderNumber.indexOf(this.orderNumberOptions[a].text)<0&&this.addNewClass.orderNumber.push(this.orderNumberOptions[a].text)}0===this.addNewClass.orderNumberId.length?this.addNewClass.classText=this.translate.classText:this.addNewClass.classText=" "}},sortNumber:function(t,e){return t-e},addNewcommittee:function(){this.newCommittee={name:"",studentId:"",studentName:"",defaultOptions:"",checkResult:""},this.committeeData.startTime="",this.committeeData.endTime="",this.isEditClass=!0,this.showAddCommitteeModal=!0},customizePosition:function(){return this.positionType.select="",this.newCommittee.name="",this.positionOptType="select"===this.positionOptType?"input":"select",this.positionOptType},collegeOptionsSelected:function(t){"-1"===t.value?this.definedSearch.college="":this.definedSearch.college=t.value},levelOptionsSelected:function(t){"-1"===t.value?this.definedSearch.learningLevel="":this.definedSearch.learningLevel=t.value},gradeOptionsSelected:function(t){"-1"===t.value?this.definedSearch.grade="":this.definedSearch.grade=t.value},collegeCheck:function(t){this.templateData.collegeId=t.value},gradeCheck:function(t){this.templateData.gradeId=t.value},getClassHistory:function(){var t=this;Object(l.e)({url:"/api/relClass/getClassHistory",dataType:"json",data:{college:this.addNewClass.collegeId,learningLevel:this.addNewClass.levelId,grade:this.addNewClass.gradeId},type:"get",success:function(e){if(e.state){var s="";if(e.data.fullNames.length>0){var a=t.translate.createdText+e.data.count+t.translate.pieceClass+","+t.translate.classNameText+":";for(var l in e.data.fullNames)s+=e.data.fullNames[l]+"\n",t.fullNameArr.push(e.data.fullNames[l].replace(/(\s*$)/g,""));t.classHistory=a+"\n"+s}else t.classHistory=t.translate.noClassText}else t.$toast(e.message)}})},checkClassLeaderId:function(){var t=this;if(!t.editClass.classLeaderId)return t.checkMessage.classLeader=t.translate.enterStudentId,!1;t.isEditClass=!0,Object(l.e)({url:"/api/relationship/checkUserId/"+t.editClass.classLeaderId,dataType:"json",type:"get",success:function(e){e.state?(t.editClass.classLeaderName=e.data.name,t.editClass.classLeaderUserId=e.data.userId,t.checkMessage.classLeader=""):(t.checkMessage.classLeader=e.message,t.editClass.classLeaderName="")}})},checkInstructorId:function(){var t=this;if(!t.editClass.instructorId)return t.checkMessage.instructor=t.translate.enterStudentId,!1;t.isEditClass=!0,Object(l.e)({url:"/api/relationship/checkUserId/"+t.editClass.instructorId,dataType:"json",type:"get",success:function(e){e.state?(t.editClass.instructorName=e.data.name,t.editClass.instructorUserId=e.data.userId,t.checkMessage.instructor=""):(t.checkMessage.instructor=e.message,t.editClass.instructorName="")}})},checkStudentId:function(){var t=this;if(!t.newCommittee.studentId)return t.newCommittee.checkResult=t.translate.enterStudentId,!1;Object(l.e)({url:"/api/relClass/checkStudent/"+t.newCommittee.studentId,dataType:"json",type:"get",success:function(e){e.state?e.data.hasThisPerson?(t.newCommittee.studentName=e.data.name,t.committeeData.studentUserId=e.data.userId,t.committeeData.studentId=e.data.id,t.committeeData.studentName=e.data.name,t.newCommittee.checkResult=""):(t.newCommittee.checkResult=t.translate.noExist,t.newCommittee.studentName=""):t.newCommittee.checkResult=e.message}})},addCommittee:function(){var t=this;if(this.committeeData.startTime&&this.committeeData.endTime&&this.newCommittee.studentId&&this.newCommittee.studentName)if(this.positionType.select||this.newCommittee.name){this.positionType.select?(this.committeeData.classCommitteeId=this.positionType.select,this.committeeData.classCommittee=this.positionType.selectName):(this.committeeData.classCommitteeId=this.newCommittee.name,this.committeeData.classCommittee=this.newCommittee.name,this.committeeTypes.push(this.newCommittee.name));var e=JSON.parse(r()(this.committeeData)),s=!1;this.editClass.classCommitteePeople.length>0&&this.editClass.classCommitteePeople.forEach(function(e){if(t.newCommittee.studentId===e.studentId&&t.committeeData.classCommittee===e.classCommittee)return s=!0,t.$toast("同一个职位不能同一个人"),!1}),s||(this.editClass.classCommitteePeople.push(e),this.showAddCommitteeModal=!1,this.positionType.select="")}else this.$toast(this.translate.improveClassInfo);else this.$toast(this.translate.improveClassInfo)},positionSelected:function(t){this.positionType.select=t.value,this.positionType.selectName=t.target.selected},committeeStartTime:function(t){this.committeeData.startTime=t.value},committeeEndTime:function(t){this.committeeData.endTime=t.value},createTimeSelected:function(t){this.editClass.createTime=t.value},dissolutionTimeSelected:function(t){this.editClass.dissolutionTime=t.value},classLeaderStartTime:function(t){this.editClass.classLeaderStartTime=t.value},classLeaderEndTime:function(t){this.editClass.classLeaderEndTime=t.value},instructorStartTime:function(t){this.editClass.instructorStartTime=t.value},instructorEndTime:function(t){this.editClass.instructorEndTime=t.value},cancelEditModal:function(){this.isEditClass?confirm(this.translate.cancelEditText)&&(this.showEditClassModal=!1):this.showEditClassModal=!1},editClassInfo:function(){var t=this;if(!this.editClass.classFullName)return this.$toast("班级名称不能为空");Object(l.e)({url:"/api/relClass/editClass/"+this.editClass.classId,dataType:"json",data:{classFullName:this.editClass.classFullName,createTime:this.editClass.createTime,dissolutionTime:this.editClass.dissolutionTime,classLeaderId:this.editClass.classLeaderUserId,classLeaderName:this.editClass.classLeaderName,classLeaderStartTime:this.editClass.classLeaderStartTime,classLeaderEndTime:this.editClass.classLeaderEndTime,instructorId:this.editClass.instructorUserId,instructorName:this.editClass.instructorName,instructorStartTime:this.editClass.instructorStartTime,instructorEndTime:this.editClass.instructorEndTime,classCommitteePersonVos:this.editClass.classCommitteePeople,committeeTypes:this.committeeTypes},type:"post",success:function(e){e.state?(t.url="/table-data/relClass/school/getClasses?timestamp="+(new Date).getTime(),t.$toast(t.translate.editSuccessTip),t.showEditClassModal=!1,t.committeeTypes.splice(0,t.committeeTypes.length)):t.$toast(t.translate.editFailedTip+":"+e.message)}})},isEditClassLeaderId:function(){this.isEditClass=!0},isEditClassLeaderName:function(){this.isEditClass=!0},isInstructorId:function(){this.isEditClass=!0},isInstructorName:function(){this.isEditClass=!0},nextStep:function(){if(!this.addNewClass.collegeId)return this.$toast(this.translate.noSelectedCollege),!1;if(!this.addNewClass.gradeId)return this.$toast(this.translate.noSelectedGrade),!1;if(!this.addNewClass.levelId)return this.$toast(this.translate.noSelectedLevel),!1;this.newClassNameArr=[];var t=this.editNewClassName.split(":\n")[1].split("\n");this.newClassNameArr=this.removeEmptyArrayEle(t),this.isnextStep=!0},previous:function(){this.isnextStep=!1},removeEmptyArrayEle:function(t){for(var e=0;e<t.length;e++)void 0!=t[e]&&""!==t[e]||(t.splice(e,1),e-=1);return t}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.isParentPage?s("div",{staticClass:"container-fluid",attrs:{id:"classManage-page"}},[s("div",{staticClass:"row text-center class-list-page"},[s("v-table",{ref:"studentTable",attrs:{title:t.translate.tableName,url:t.url,pagesize:"10",idField:"id",columns:t.columns,order:!0,search:!0}},[s("div",{staticClass:"btn-group pull-right",attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[s("button",{staticClass:"btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:function(e){return t.createClass()}}},[t._v(t._s(t.translate.create)+t._s(t.translate.class))]),t._v(" "),s("button",{staticClass:"btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:function(e){return t.studentClasses()}}},[t._v(t._s(t.translate.student)+t._s(t.translate.classes))])]),t._v(" "),s("div",{attrs:{slot:"table-search"},slot:"table-search"},[s("div",{staticClass:"input-group search-group pull-left col-md-3 col-md-offset-1"},[s("span",{staticClass:"input-group-addon search-name"},[t._v(t._s(t.translate.college))]),t._v(" "),s("v-select",{staticClass:"btn-block search-select",attrs:{value:t.defaultOptions,options:t.collegeOptions.search,"options-value":"id","options-label":"text",search:"","close-on-select":""},on:{afterSelected:t.collegeOptionsSelected}})],1),t._v(" "),s("div",{staticClass:"input-group search-group pull-left col-md-3 col-md-offset-4"},[s("span",{staticClass:"input-group-addon search-name"},[t._v(t._s(t.translate.learnLevel))]),t._v(" "),s("v-select",{staticClass:"btn-block search-select",attrs:{value:t.defaultOptions,options:t.levelOptions.search,"options-value":"id","options-label":"text",search:"","close-on-select":""},on:{afterSelected:t.levelOptionsSelected}})],1),t._v(" "),s("div",{staticClass:"input-group search-group pull-left col-md-3 col-md-offset-1"},[s("span",{staticClass:"input-group-addon search-name"},[t._v(t._s(t.translate.grade))]),t._v(" "),s("v-select",{staticClass:"btn-block search-select",attrs:{value:t.defaultOptions,options:t.gradeOptions.search,"options-value":"id","options-label":"text",search:"","close-on-select":""},on:{afterSelected:t.gradeOptionsSelected}})],1),t._v(" "),s("div",{staticClass:"input-group search-group pull-left col-md-3 col-md-offset-4"},[s("span",{staticClass:"input-group-addon search-name"},[t._v(t._s(t.translate.classFullName))]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.definedSearch.classFullName,expression:"definedSearch.classFullName"}],staticClass:"form-control search-input",attrs:{type:"text"},domProps:{value:t.definedSearch.classFullName},on:{input:function(e){e.target.composing||t.$set(t.definedSearch,"classFullName",e.target.value)}}})])])])],1),t._v(" "),t.isShowMemberPage?s("div",{staticClass:"class-member-page"},[s("v-schoolmembers",{attrs:{classId:t.classId},on:{backClassList:t.backClassList}})],1):t._e(),t._v(" "),s("v-modal",{attrs:{show:t.showAddClassModal,effect:"fade",width:"800"}},[s("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v(t._s(t.translate.addNew)+t._s(t.translate.class))])]),t._v(" "),t.showAddClassModal?s("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[t.isnextStep?s("div",[s("label",{staticClass:"edit-class-name-text"},[t._v("系统将根据填写的班级信息自动生成班级名称，若班级名称不符合预期效果，点击可直接编辑")]),t._v(" "),t._l(t.newClassNameArr,function(e,a){return s("div",{key:a,staticClass:"input-group addClass-input-group"},[0===a?s("label",{staticClass:"creat-class-text"},[t._v(t._s(t.translate.will)+t._s(t.translate.create)+t._s(t.translate.class)+":")]):s("label",{staticClass:"creat-class-text"}),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newClassNameArr[a],expression:"newClassNameArr[i]"}],staticClass:"form-control modal-form-style edit-class-input search-input",attrs:{type:"text",maxlength:"50"},domProps:{value:t.newClassNameArr[a]},on:{input:function(e){e.target.composing||t.$set(t.newClassNameArr,a,e.target.value)}}})])}),t._v(" "),s("div",{staticClass:"btn-group",attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[s("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){return t.sureCreat()}}},[t._v(t._s(t.translate.sure)+t._s(t.translate.create))])])],2):s("div",[s("div",{staticClass:"input-group addClass-input-group"},[s("label",{staticClass:"addClass-text"},[t._v(t._s(t.translate.college)+":")]),t._v(" "),s("v-select",{staticClass:"btn-block search-select",attrs:{value:t.addNewClass.collegeId,options:t.collegeOptions.addClass,"options-value":"id","options-label":"text",search:"","close-on-select":""},on:{afterSelected:t.collegeSelected}})],1),t._v(" "),s("div",{staticClass:"input-group addClass-input-group"},[s("label",{staticClass:"addClass-text"},[t._v(t._s(t.translate.faculty)+"/"+t._s(t.translate.bigClass)+":")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.addNewClass.faculty,expression:"addNewClass.faculty"}],staticClass:"form-control search-input",attrs:{type:"text","aria-describedby":"basic-addClass-faculty"},domProps:{value:t.addNewClass.faculty},on:{input:function(e){e.target.composing||t.$set(t.addNewClass,"faculty",e.target.value)}}}),t._v(" "),s("label",[t._v("("+t._s(t.translate.facultyPlaceholder)+")")])]),t._v(" "),s("div",{staticClass:"input-group addClass-input-group"},[s("label",{staticClass:"addClass-text"},[t._v(t._s(t.translate.grade)+":")]),t._v(" "),s("v-select",{staticClass:"btn-block search-select",attrs:{value:t.addNewClass.gradeId,options:t.gradeOptions.addClass,"options-value":"id","options-label":"text",search:"","close-on-select":""},on:{afterSelected:t.gradeSelected}})],1),t._v(" "),s("div",{staticClass:"input-group addClass-input-group"},[s("label",{staticClass:"addClass-text"},[t._v(t._s(t.translate.learnLevel)+":")]),t._v(" "),s("v-select",{staticClass:"btn-block search-select",attrs:{value:t.addNewClass.levelId,options:t.levelOptions.addClass,"options-value":"id","options-label":"text",search:"","close-on-select":""},on:{afterSelected:t.levelSelected}})],1),t._v(" "),s("div",{staticClass:"input-group addClass-input-group"},[s("label",{staticClass:"addClass-text"},[t._v(t._s(t.translate.class)+t._s(t.translate.orderNumber)+":")]),t._v(" "),s("v-select",{staticClass:"btn-block search-select",attrs:{value:t.orderNumberStr,options:t.orderNumberOptions,"options-value":"id","options-label":"text",search:"",multiple:!0},on:{afterSelected:t.orderNumberSelected}}),t._v(" "),s("label",[t._v("("+t._s(t.translate.orderNumberPlaceholder)+")")])],1),t._v(" "),s("div",{staticClass:"input-group addClass-input-group"},[s("label",{staticClass:"creat-class-text"},[t._v(t._s(t.translate.will)+t._s(t.translate.create)+t._s(t.translate.class)+":")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.creatClass,expression:"creatClass"}],staticClass:"create-class-textarea",attrs:{id:"",cols:"24",rows:"5",disabled:"disabled"},domProps:{value:t.creatClass},on:{input:function(e){e.target.composing||(t.creatClass=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"input-group addClass-input-group"},[s("label",{staticClass:"creat-class-text"},[t._v(t._s(t.translate.already)+t._s(t.translate.create)+t._s(t.translate.class)+":")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.classHistory,expression:"classHistory"}],staticClass:"create-class-textarea",attrs:{id:"",cols:"24",rows:"5",disabled:"disabled"},domProps:{value:t.classHistory},on:{input:function(e){e.target.composing||(t.classHistory=e.target.value)}}})]),t._v(" "),t.isnextStep?s("div",{staticClass:"btn-group",attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[s("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){return t.previous()}}},[t._v("上一步")])]):s("div",{staticClass:"btn-group",attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[s("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){return t.nextStep()}}},[t._v("下一步")])])]):t._e(),t._v(" "),s("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showAddClassModal=!1}}},[t._v(t._s(t.translate.cancel))])])]),t._v(" "),s("v-modal",{attrs:{show:t.showEditClassModal,effect:"fade",width:"800"}},[s("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v(t._s(t.translate.edit)+t._s(t.translate.class))])]),t._v(" "),s("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[s("div",{staticClass:"form-group edit-class-group"},[s("label",{staticClass:"edit-class-text"},[t._v(t._s(t.translate.classFullName)+":")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.editClass.classFullName,expression:"editClass.classFullName"}],staticClass:"form-control modal-form-style name-input",attrs:{type:"text"},domProps:{value:t.editClass.classFullName},on:{input:function(e){e.target.composing||t.$set(t.editClass,"classFullName",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group edit-class-group"},[s("label",{staticClass:"edit-class-text"},[t._v(t._s(t.translate.established)+":")]),t._v(" "),s("v-datepicker",{ref:"datepicker",staticClass:"btn-block time-picker",attrs:{value:t.editClass.createTime,clearButton:!1,showTime:!1},on:{daySelected:t.createTimeSelected}})],1),t._v(" "),s("div",{staticClass:"form-group edit-class-group"},[s("label",{staticClass:"edit-class-text"},[t._v(t._s(t.translate.dissolutionTime)+":")]),t._v(" "),s("v-datepicker",{ref:"datepicker",staticClass:"btn-block time-picker",attrs:{value:t.editClass.dissolutionTime,clearButton:!1,showTime:!1},on:{daySelected:t.dissolutionTimeSelected}})],1),t._v(" "),s("div",{staticClass:"form-group edit-class-group"},[s("label",{staticClass:"edit-class-text"},[t._v(t._s(t.translate.headTeacher)+t._s(t.translate.teacherAndStudentId)+":")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.editClass.classLeaderId,expression:"editClass.classLeaderId"}],staticClass:"form-control modal-form-style search-input",attrs:{type:"text"},domProps:{value:t.editClass.classLeaderId},on:{input:[function(e){e.target.composing||t.$set(t.editClass,"classLeaderId",e.target.value)},t.isEditClassLeaderId]}}),t._v(" "),s("button",{staticClass:"btn check-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.checkClassLeaderId}},[t._v(t._s(t.translate.check))]),t._v(" "),s("div",{staticClass:"idcheckResult"},[t._v(t._s(t.checkMessage.classLeader))])]),t._v(" "),s("div",{staticClass:"form-group edit-class-group"},[s("label",{staticClass:"edit-class-text"},[t._v(t._s(t.translate.headTeacher)+":")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.editClass.classLeaderName,expression:"editClass.classLeaderName"}],staticClass:"form-control modal-form-style name-input",attrs:{readonly:"readonly",type:"text"},domProps:{value:t.editClass.classLeaderName},on:{input:[function(e){e.target.composing||t.$set(t.editClass,"classLeaderName",e.target.value)},t.isEditClassLeaderName]}})]),t._v(" "),s("div",{staticClass:"form-group edit-class-group"},[s("label",{staticClass:"edit-class-text"},[t._v(t._s(t.translate.headTeacher)+t._s(t.translate.serve)+t._s(t.translate.startTime)+":")]),t._v(" "),s("v-datepicker",{ref:"datepicker",staticClass:"btn-block time-picker",attrs:{value:t.editClass.classLeaderStartTime,clearButton:!1,showTime:!1},on:{daySelected:t.classLeaderStartTime}})],1),t._v(" "),s("div",{staticClass:"form-group edit-class-group"},[s("label",{staticClass:"edit-class-text"},[t._v(t._s(t.translate.headTeacher)+t._s(t.translate.serve)+t._s(t.translate.endTime)+":")]),t._v(" "),s("v-datepicker",{ref:"datepicker",staticClass:"btn-block time-picker",attrs:{value:t.editClass.classLeaderEndTime,clearButton:!1,showTime:!1},on:{daySelected:t.classLeaderEndTime}})],1),t._v(" "),s("div",[s("button",{staticClass:"btn historyRecord-btn clearBtnBorder",attrs:{type:"button","data-toggle":"collapse","data-target":"#collapseExample","aria-expanded":"false","aria-controls":"collapseExample"}},[t._v(t._s(t.translate.historyRecord))]),t._v(" "),s("div",{staticClass:"collapse",attrs:{id:"collapseExample"}},[s("div",{staticClass:"historyRecord-container"},[s("v-table",{attrs:{idField:"id",columns:t.historyRecordColumns,rows:t.editClass.classLeaders,order:!0,columnsControl:!1,paginationShow:!1}})],1)])]),t._v(" "),s("div",{staticClass:"form-group edit-class-group"},[s("label",{staticClass:"edit-class-text"},[t._v(t._s(t.translate.instructor)+t._s(t.translate.teacherAndStudentId)+":")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.editClass.instructorId,expression:"editClass.instructorId"}],staticClass:"form-control modal-form-style search-input",attrs:{type:"text"},domProps:{value:t.editClass.instructorId},on:{input:[function(e){e.target.composing||t.$set(t.editClass,"instructorId",e.target.value)},t.isInstructorId]}}),t._v(" "),s("button",{staticClass:"btn check-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.checkInstructorId}},[t._v(t._s(t.translate.check))]),t._v(" "),s("div",{staticClass:"idcheckResult"},[t._v(t._s(t.checkMessage.instructor))])]),t._v(" "),s("div",{staticClass:"form-group edit-class-group"},[s("label",{staticClass:"edit-class-text"},[t._v(t._s(t.translate.instructor)+":")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.editClass.instructorName,expression:"editClass.instructorName"}],staticClass:"form-control modal-form-style name-input",attrs:{readonly:"readonly",type:"text"},domProps:{value:t.editClass.instructorName},on:{input:[function(e){e.target.composing||t.$set(t.editClass,"instructorName",e.target.value)},t.isInstructorName]}})]),t._v(" "),s("div",{staticClass:"form-group edit-class-group"},[s("label",{staticClass:"edit-class-text"},[t._v(t._s(t.translate.instructor)+t._s(t.translate.serve)+t._s(t.translate.startTime)+":")]),t._v(" "),s("v-datepicker",{ref:"datepicker",staticClass:"btn-block time-picker",attrs:{value:t.editClass.instructorStartTime,clearButton:!1,showTime:!1},on:{daySelected:t.instructorStartTime}})],1),t._v(" "),s("div",{staticClass:"form-group edit-class-group"},[s("label",{staticClass:"edit-class-text"},[t._v(t._s(t.translate.instructor)+t._s(t.translate.serve)+t._s(t.translate.endTime)+":")]),t._v(" "),s("v-datepicker",{ref:"datepicker",staticClass:"btn-block time-picker",attrs:{value:t.editClass.instructorEndTime,clearButton:!1,showTime:!1},on:{daySelected:t.instructorEndTime}})],1),t._v(" "),s("div",[s("button",{staticClass:"btn historyRecord-btn clearBtnBorder",attrs:{type:"button","data-toggle":"collapse","data-target":"#instructorExample","aria-expanded":"false","aria-controls":"collapseExample"}},[t._v(t._s(t.translate.historyRecord))]),t._v(" "),s("div",{staticClass:"collapse",attrs:{id:"instructorExample"}},[s("div",{staticClass:"historyRecord-container"},[s("v-table",{attrs:{idField:"id",columns:t.historyRecordColumns,rows:t.editClass.instructors,order:!0,paginationShow:!1}})],1)])]),t._v(" "),s("div",{staticClass:"form-group edit-class-group"},[s("label",[t._v(t._s(t.translate.class)+t._s(t.translate.committee)+":")])]),t._v(" "),s("div",{staticClass:"historyRecord-container committeeList"},[s("v-table",{attrs:{idField:"id",columns:t.committeeColumns,rows:t.editClass.classCommitteePeople,order:!0,paginationShow:!1}})],1),t._v(" "),s("button",{staticClass:"btn check-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.addNewcommittee}},[t._v(t._s(t.translate.add))])]),t._v(" "),s("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.cancelEditModal}},[t._v(t._s(t.translate.cancel))]),t._v(" "),s("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.editClassInfo}},[t._v(t._s(t.translate.submit))])])]),t._v(" "),s("v-modal",{attrs:{show:t.showAddCommitteeModal,effect:"fade",width:"620"}},[s("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v(t._s(t.translate.add)+t._s(t.translate.classCommittee))])]),t._v(" "),t.showAddCommitteeModal?s("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[s("div",{staticClass:"form-group class-committee-group"},[s("label",{staticClass:"classCommittee-text"},[t._v(t._s(t.translate.position)+":")]),t._v(" "),"select"===t.positionOptType?s("v-select",{staticClass:"btn-block search-select",attrs:{options:t.positionOption,value:t.newCommittee.defaultOptions,"options-value":"id","options-label":"text",search:"","close-on-select":""},on:{afterSelected:t.positionSelected}}):s("input",{directives:[{name:"model",rawName:"v-model",value:t.newCommittee.name,expression:"newCommittee.name"}],staticClass:"form-control modal-form-style search-input",attrs:{type:"text","aria-describedby":"basic-classCommittee-studentId"},domProps:{value:t.newCommittee.name},on:{input:function(e){e.target.composing||t.$set(t.newCommittee,"name",e.target.value)}}}),t._v(" "),s("button",{staticClass:"btn check-btn clearBtnBorder customize-btn",attrs:{type:"button"},on:{click:t.customizePosition}},[t._v(t._s(t.translate.customize)+t._s(t.translate.position))])],1),t._v(" "),s("div",{staticClass:"form-group class-committee-group"},[s("label",{staticClass:"classCommittee-text"},[t._v(t._s(t.translate.studentId)+":")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newCommittee.studentId,expression:"newCommittee.studentId"}],staticClass:"form-control modal-form-style search-input",attrs:{type:"text","aria-describedby":"basic-classCommittee-studentId"},domProps:{value:t.newCommittee.studentId},on:{input:function(e){e.target.composing||t.$set(t.newCommittee,"studentId",e.target.value)}}}),t._v(" "),s("button",{staticClass:"btn check-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.checkStudentId}},[t._v(t._s(t.translate.check))]),t._v(" "),s("div",{staticClass:"errorMsg"},[t._v(t._s(t.newCommittee.checkResult))])]),t._v(" "),s("div",{staticClass:"form-group class-committee-group"},[s("label",{staticClass:"classCommittee-text"},[t._v(t._s(t.translate.name)+":")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newCommittee.studentName,expression:"newCommittee.studentName"}],staticClass:"form-control modal-form-style name-input",attrs:{readonly:"readonly",type:"text","aria-describedby":"basic-classCommittee-name"},domProps:{value:t.newCommittee.studentName},on:{input:function(e){e.target.composing||t.$set(t.newCommittee,"studentName",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group class-committee-group"},[s("label",{staticClass:"classCommittee-text"},[t._v(t._s(t.translate.serve)+t._s(t.translate.startTime)+":")]),t._v(" "),s("v-datepicker",{ref:"datepicker",staticClass:"btn-block time-picker",attrs:{clearButton:!1,showTime:!1},on:{daySelected:t.committeeStartTime}})],1),t._v(" "),s("div",{staticClass:"form-group class-committee-group"},[s("label",{staticClass:"classCommittee-text"},[t._v(t._s(t.translate.serve)+t._s(t.translate.endTime)+":")]),t._v(" "),s("v-datepicker",{ref:"datepicker",staticClass:"btn-block time-picker",attrs:{clearButton:!1,showTime:!1},on:{daySelected:t.committeeEndTime}})],1)]):t._e(),t._v(" "),s("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showAddCommitteeModal=!1}}},[t._v(t._s(t.translate.cancel))]),t._v(" "),s("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.addCommittee}},[t._v(t._s(t.translate.add))])])])],1):s("v-import",t._b({attrs:{downloadTemplateUrl:t.downloadUrl,isNeedModal:!0,modalname:t.translate.templateSelect},on:{backParentPage:t.backParentPage}},"v-import",t.importParams,!1),[s("div",{attrs:{slot:"modal"},slot:"modal"},[s("div",{staticClass:"input-group addClass-input-group"},[s("label",{staticClass:"addclass-learnLevel-text"},[t._v(t._s(t.translate.college)+":")]),t._v(" "),s("v-select",{staticClass:"btn-block search-select",attrs:{value:t.templateData.collegeId,options:t.collegeOptions.template,"options-value":"id","options-label":"text",search:"","close-on-select":""},on:{afterSelected:t.collegeCheck}})],1),t._v(" "),s("div",{staticClass:"input-group addClass-input-group"},[s("label",{staticClass:"addclass-learnLevel-text"},[t._v(t._s(t.translate.grade)+":")]),t._v(" "),s("v-select",{staticClass:"btn-block search-select",attrs:{value:t.templateData.gradeId,options:t.gradeOptions.template,"options-value":"id","options-label":"text",search:"","close-on-select":""},on:{afterSelected:t.gradeCheck}})],1),t._v(" "),s("div",{staticClass:"input-group addClass-input-group"},[s("label",{staticClass:"template-relationship-text"},[t._v(t._s(t.translate.relationship)+":")]),t._v(" "),s("div",{staticClass:"radio-area"},t._l(t.relationship,function(e,a){return s("div",{key:a},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.relationshipPick,expression:"relationshipPick"}],attrs:{type:"radio",id:"col.id"},domProps:{value:e.id,checked:t._q(t.relationshipPick,e.id)},on:{change:function(s){t.relationshipPick=e.id}}}),t._v(" "),s("label",{attrs:{for:"col.id"}},[t._v(t._s(e.text))])])}),0)]),t._v(" "),s("div",{staticClass:"input-group addClass-input-group"},[s("label",{staticClass:"template-relationship-text"},[t._v(t._s(t.translate.classes)+t._s(t.translate.situation)+":")]),t._v(" "),s("div",{staticClass:"radio-area"},t._l(t.haveClass,function(e,a){return s("div",{key:a},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.classesPick,expression:"classesPick"}],attrs:{type:"radio",id:"col.id"},domProps:{value:e.id,checked:t._q(t.classesPick,e.id)},on:{change:function(s){t.classesPick=e.id}}}),t._v(" "),s("label",{attrs:{for:"col.id"}},[t._v(t._s(e.text))])])}),0)])])])],1)},staticRenderFns:[]};var u=s("C7Lr")(c,m,!1,function(t){s("Rp6N")},null,null).exports,p={created:function(){var t=this,e=localStorage.getItem("lang"),s=this;Object(l.g)(e)&&(this.lang=e),Object(l.e)({url:"/api/relClass/school/getPeopleManageSelectOptions",dataType:"json",type:"get",success:function(t){if(t.state){var e=t.data;s.collegeOptions=e.colleges||[],s.gradeOptions=e.grades||[],s.classesOptions=e.haveClass||[],s._initColumns()}else s.$toast(t.message)}}),Object(l.e)({url:"/api/system/dicts?dictType=培养层次",dataType:"json",type:"get",success:function(e){e.state&&(t.educationLevelOptions=e.data||[])}}),Object(l.e)({url:"/api/relClass/getMyCreateClass",dataType:"json",type:"get",success:function(t){t.state?s.classNameOptions=t.data||[]:s.$toast(t.message)}})},data:function(){return{columns:[],url:"/table-data/relClass/school/peopleManage",showClassesModal:!1,classMembersManage:{},collegeOptions:[],gradeOptions:[],classesOptions:[],classNameOptions:[],educationLevelOptions:[],defaultOptions:"-1",selectedText:"",studentUserIds:[],isDisabled:!0,classId:"",lang:"zh-cn"}},computed:{translate:function(){return Object(l.g)(this.lang).classMembersManage}},methods:{_initColumns:function(){this.columns=[{id:"studentId",title:this.translate.studentId,className:"text-left",width:100,hidden:!1,search:{type:"input",data:{autoFocus:!0,placeholder:this.translate.studentIdPlaceholder}}},{id:"name",title:this.translate.name,className:"text-left",width:70,hidden:!1},{id:"college",title:this.translate.college,className:"text-left",width:120,hidden:!1,search:{type:"multiSelect",data:{options:this.collegeOptions,optionsLabel:"text",optionsValue:"id"}}},{id:"grade",title:this.translate.grade,className:"text-left",width:50,hidden:!1,search:{type:"multiSelect",data:{options:this.gradeOptions,optionsLabel:"text",optionsValue:"id"}}},{id:"instructor",title:this.translate.instructor,className:"text-left",width:120,hidden:!1,search:{type:"input",data:{placeholder:this.translate.instructorPlaceholder}}},{id:"classFullName",title:this.translate.classFullName,className:"text-left",width:120,hidden:!1,search:{type:"input",data:{placeholder:this.translate.classNamePlaceholder}}},{id:"educationLevel",title:"培养层次",className:"text-left",width:120,hidden:!1,search:{type:"multiSelect",data:{options:this.educationLevelOptions,optionsLabel:"label",optionsValue:"value"}}},{id:"haveClass",title:this.translate.classes+this.translate.situation,className:"text-left",width:120,hidden:!1,search:{type:"select",data:{options:this.classesOptions,optionsLabel:"text",optionsValue:"id"}},formatter:function(t,e){return t.strHaveClass}}]},classes:function(){var t=this.$refs.studentTable.checkedRecords.length;0===t?this.$toast(this.translate.notSelectedText):(this.selectedText=this.translate.selectedText+t+this.translate.namesStudent+","+this.translate.writeClassName,this.showClassesModal=!0)},sure:function(t){var e=this;if(t)return!1;var s=this,a=this.$refs.studentTable.checkedRecords;this.studentUserIds.splice(0,this.studentUserIds.length),a.forEach(function(t,s){e.studentUserIds.push(t.studentUserId)}),Object(l.e)({url:"/api/relClass/updateStudents/"+this.classId,dataType:"json",data:{studentUserIds:this.studentUserIds},type:"post",success:function(t){t.state?(s.url="/table-data/relClass/school/peopleManage?timestamp="+(new Date).getTime(),s.$toast(s.translate.submitSuccessTip),s.showClassesModal=!1):s.$toast(s.translate.submitFailedTip+":"+t.message)}})},classNameSelected:function(t){this.classId=t.val,this.classId?this.isDisabled=!1:this.isDisabled=!0}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid",attrs:{id:"classMembersManage-page"}},[s("div",{staticClass:"row text-center"},[s("v-table",{ref:"studentTable",attrs:{title:t.translate.tableName,url:t.url,pagesize:"10",idField:"id",columns:t.columns,multiple:!0,order:!0,search:!0}},[s("div",{staticClass:"btn-group pull-right",attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[s("button",{staticClass:"btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:function(e){return t.classes()}}},[t._v(t._s(t.translate.classes))])])])],1),t._v(" "),s("v-modal",{attrs:{show:t.showClassesModal,effect:"fade",width:"400"}},[s("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v("\n        "+t._s(t.translate.classes)+"\n    ")])]),t._v(" "),s("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[s("label",{staticClass:"modal-text text-center"},[t._v(t._s(t.selectedText))]),t._v(" "),s("div",{staticClass:"form-group single-add-group"},[s("label",[t._v(t._s(t.translate.classFullName)+":")]),t._v(" "),s("v-select",{staticClass:"btn-block search-select",attrs:{options:t.classNameOptions,"options-value":"id","options-label":"text",search:"","close-on-select":""},on:{afterSelected:t.classNameSelected}})],1)]),t._v(" "),s("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showClassesModal=!1}}},[t._v(t._s(t.translate.cancel))]),t._v(" "),s("button",{staticClass:"btn submit-btn clearBtnBorder",class:{disabled:t.isDisabled},attrs:{type:"button"},on:{click:function(e){return t.sure(t.isDisabled)}}},[t._v(t._s(t.translate.sure))])])])],1)},staticRenderFns:[]};var C=s("C7Lr")(p,h,!1,function(t){s("xB83")},null,null).exports;a.default.component("v-school",u),a.default.component("v-member",C);a.default.component("v-school",u),a.default.component("v-member",C);var v={created:function(){var t=localStorage.getItem("lang");Object(l.g)(t)&&(this.lang=t)},data:function(){return{isSelect:"class",isShowPathNav:!1,subpageName:"",lang:"zh-cn"}},computed:{translate:function(){return Object(l.g)(this.lang).relationClassManage}},methods:{changeTab:function(t){this.isSelect=t,"member"===t&&(this.isShowPathNav=!1)},_showPathNav:function(t){this.isShowPathNav=!0,this.subpageName=t},_hidePathNav:function(){this.isShowPathNav=!1}}},g={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid",attrs:{id:"relationClassManage-page bbb"}},[s("div",{staticClass:"row text-center"},[s("ul",{staticClass:"nav nav-tabs relationClassManage-tab",attrs:{id:"myTab"}},[s("li",{class:{active:"class"==t.isSelect},on:{click:function(e){return t.changeTab("class")}}},[t.isShowPathNav?s("a",[t._v(t._s(t.translate.classTabName)),s("span",{staticClass:"path"},[t._v("/")]),t._v(t._s(t.subpageName))]):s("a",[t._v(t._s(t.translate.classTabName))])]),t._v(" "),s("li",{class:{active:"member"==t.isSelect},on:{click:function(e){return t.changeTab("member")}}},[s("a",[t._v(t._s(t.translate.memberTabName))])])])]),t._v(" "),s("div",{staticClass:"content row"},["class"===t.isSelect?s("v-school",{on:{showPathNav:t._showPathNav,hidePathNav:t._hidePathNav}}):s("v-member")],1)])},staticRenderFns:[]};var b=s("C7Lr")(v,g,!1,function(t){s("cf2f")},null,null);e.default=b.exports},"2hAd":function(t,e){},Rp6N:function(t,e){},cf2f:function(t,e){},xB83:function(t,e){}});