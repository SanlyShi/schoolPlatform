webpackJsonp([8],{"13x6":function(t,e){},"6s4h":function(t,e){},EPZM:function(t,e){},MS6M:function(t,e){},ooK5:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("aA9S"),s=a.n(i),n=a("zILJ"),l=a("iAlU"),o=a("xTvN"),c=a("GwEi"),r=a("Y253"),d=a("jCtM"),u=a("zY0d"),h=a("C331"),m=a("p+qa"),p=(n.a,l.a,o.a,c.a,r.a,{props:["data"],data:function(){return{columns:[],loginType:"",curStatus:"list",tableDataUrl:"",showMultiple:!0,tableCheckedListAll:"",tableCheckedList:[],addAssignType:"single",showExport:!1,fieldsToExport:[],editStatus:"",teachinDetails:{},dialogVisible:!1,curId:"",defaultInfo:{},reasonVisible:!1,reason:"",curReasonType:"",placeRule:{},techinDetails:{},sumarry:"",techinId:"",assistant:{name:"",phone:""},assistantRules:{name:[{required:!0,message:"请输入跟场助理名字",trigger:"blur"}],phone:[{required:!0,message:"请输入跟场助理手机号",trigger:"blur"},{validator:function(t,e,a){if(!e)return a(new Error("手机号不能为空"));if(!/^1[3|4|5|7|8][0-9]\d{8}$/.test(e))return a(new Error("请输入正确的手机号"));a()},trigger:"blur"}]}}},methods:{_tableChecked:function(t){var e=[];t.forEach(function(t){e.push(t.id)}),this.tableCheckedListAll=t.length,this.tableCheckedList=e},batchAssistant:function(){if(!this.tableCheckedListAll)return this.$message.error("请先勾选单位");this.assistant={name:"",phone:""},this.addAssignType="list",this.dialogVisible=!0},createTechin:function(){var t=this;"COMPANY"==this.loginType.loginType?Object(m.b)("PREACH_MEETING").then(function(e){e.state?Object(m.c)().then(function(e){e.state&&(1!=e.data?t.curStatus="edit":t.$message({type:"error",message:"该单位账号已被停用"}))}):t.$message.error(e.message)}):this.curStatus="edit"},catchLoginType:function(){var t=this;Object(d.b)().then(function(e){t.loginType=e,t.setTableUrl(e.loginType),t.setColumns(e.loginType)})},catchPlaceRules:function(){var t=this;Object(u.a)("PREACH_MEETING").then(function(e){e.length&&(t.placeRule=e[0],t.status=t.techinDetails.status,t.statusName=t.techinDetails.statusName)})},setTableUrl:function(t){"COMPANY"==t?this.tableDataUrl="/table-data/employment/preachMeeting/getPreachMeetingListForCompany?timeStamp="+(new Date).getTime():"宣讲会管理"==this.data.title?this.tableDataUrl="/table-data/employment/manage/preachMeeting/getPreachMeetingListForAdmin?timeStamp="+(new Date).getTime():this.tableDataUrl="/table-data/employment/manage/preachMeeting/getPreachMeetingAuditList?timeStamp="+(new Date).getTime()},backToParent:function(){this.curStatus="list"},exportStat:function(){this.fieldsToExport=[{title:"宣讲会标题",id:"1",checked:!0},{title:"宣讲会时间 ",id:"2",checked:!0},{title:"场地",id:"3",checked:!0},{title:"跟场助理",id:"4",checked:!0},{title:"助理联系方式",id:"5",checked:!0},{title:"简历接收时间",id:"6",checked:!0},{title:"单位名称",id:"7",checked:!0},{title:"行业类别",id:"8",checked:!0},{title:"是否自行联系",id:"9",checked:!0},{title:"单位所在地",id:"10",checked:!0},{title:"单位标签",id:"11",checked:!0},{title:"单位规模",id:"12",checked:!0},{title:"单位地址",id:"13",checked:!0},{title:"单位简介",id:"14",checked:!0},{title:"单位联系人",id:"15",checked:!0},{title:"单位联系人电话",id:"16",checked:!0},{title:"邮箱",id:"17",checked:!0},{title:"职位名称",id:"20",checked:!0},{title:"报名人数",id:"18",checked:!0},{title:"总招聘人数",id:"19",checked:!0},{title:"需求专业",id:"21",checked:!0},{title:"审核状态",id:"22",checked:!0},{title:"更新时间",id:"23",checked:!0}],this.showExport=!0},cancle:function(){this.$refs.assistant.resetFields(),this.$refs.assistant.clearValidate(),this.dialogVisible=!1},beforCancle:function(t){this.$refs.assistant.resetFields(),this.$refs.assistant.clearValidate(),t()},showReason:function(t){this.reasonVisible=!0,this.curReasonType=t,this.reason=""},reject:function(){var t=this;if(!this.reason)return this.$message.error("请填写审核意见");var e=void 0;e="fail"==this.curReasonType?"/api/employment/manage/preachMeeting/refuseApply?id="+this.defaultInfo.id+"&reason="+this.reason:"/api/employment/manage/preachMeeting/rejectApply?id="+this.defaultInfo.id+"&reason="+this.reason,Object(h.e)({url:e,type:"post",success:function(e){e.state?(t.$message.success("操作成功"),t.curStatus="list",t.setTableUrl(t.loginType.loginType)):t.$message.success("操作失败"),t.reasonVisible=!1}})},exportTable:function(){var t=this.$refs.tree.getChecked(),e=[],a="";if(t.length)for(var i=0;i<t.length;i++)e.push(t[i].id);e.length?a="/downloads/employment/manage/preachMeeting/excelOut?fields="+e.join(","):a="/downloads/employment/manage/preachMeeting/excelOut";this.showExport=!1,window.location.href=a},setColumns:function(t){var e=this;"COMPANY"==t?(this.showMultiple=!1,this.columns=[{id:"title",title:"宣讲会标题",className:"text-left",width:150,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!1}}},{id:"timeSpace",title:"宣讲会时间",className:"text-left line-height-normal",width:220,search:{type:"datetime",data:{dateFormat:"yyyy-MM-dd hh:ii",placeholder:"宣讲会",change:function(t){t.value,t.target;e.tableDataUrl="/table-data/employment/preachMeeting/getPreachMeetingListForCompany?timeStamp="+(new Date).getTime()+"&beginTime="+e.$refs.teachList.tableSearchFields.timeSpace_start+"&endTime="+e.$refs.teachList.tableSearchFields.timeSpace_end}}}},{id:"areaName",title:"宣讲会场地",className:"text-left",width:120,search:{type:"input",data:{placeholer:"",autoFocus:!1}}},{id:"enrollNum",title:"报名人数",className:"text-left",width:100,hidden:!1,formatter:function(t){if(t.enrollNum)return t.enrollNum}},{id:"createTime",title:"提交时间",className:"text-left",width:150},{id:"assistantName",title:"跟场助理",className:"text-left",width:100,hidden:!1,formatter:function(t){if(!t.assistantName)return"-"}},{id:"assistantPhone",title:"助理联系方式",className:"text-left",width:100,hidden:!1},{id:"status",title:"状态",className:"text-left",width:50,search:{type:"select",data:{optionsLabel:"label",optionsValue:"value",options:[{label:"待审核",value:0},{label:"已通过",value:1},{label:"未通过",value:2},{label:"已撤回",value:3},{label:"已下架",value:4},{label:"已驳回",value:5}],placeholer:"",autoFocus:!1}},formatter:function(t){return t.statusName}},{id:"auditReason",title:"审核意见",className:"text-left",width:100,hidden:!1,formatter:function(t){if(!t.auditReason)return" - "}},{id:"opts",title:"操作",width:70,hidden:!1,formatter:function(t){return[{tag:"a",text:"查看",callback:function(t,a){Object(d.c)(t.id).then(function(a){a.state?(e.techinDetails=a.data,e.techinId=t.id,e.curStatus="details"):e.$message.error(a.message)})}},{tag:"a",text:"撤回",className:"0"==t.status?"":"none",callback:function(t,a){Object(d.f)(t.id).then(function(t){t.state?(e.$message.success("撤回成功"),e.setTableUrl(e.loginType.loginType)):e.$message.error(t.message)})}}]}}]):"宣讲会管理"==this.data.title?this.columns=[{id:"title",title:"宣讲会标题",className:"text-left",width:150,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!1}}},{id:"companyName",title:"单位名称",className:"text-left",width:150,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!1}}},{id:"timeSpace",title:"宣讲会时间",className:"text-left line-height-normal",width:200,hidden:!1,search:{type:"datetime",data:{dateFormat:"yyyy-MM-dd hh:ii",placeholder:"宣讲会",change:function(t){t.value,t.target;e.tableDataUrl="/table-data/employment/manage/preachMeeting/getPreachMeetingListForAdmin?timeStamp="+(new Date).getTime()+"&beginTime="+e.$refs.teachList.tableSearchFields.timeSpace_start+"&endTime="+e.$refs.teachList.tableSearchFields.timeSpace_end}}}},{id:"areaName",title:"宣讲会场地",className:"text-left",width:120,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!1}}},{id:"enrollNum",title:"报名人数",className:"text-left",width:100,hidden:!1,formatter:function(t){if(t.enrollNum)return t.enrollNum}},{id:"allocationScheme",title:"场地分配方式",className:"text-left",width:100,hidden:!1},{id:"assistantName",title:"跟场助理",className:"text-left",width:100,hidden:!1,formatter:function(t){if(!t.assistantName)return"-"}},{id:"assistantPhone",title:"助理联系方式",className:"text-left",width:100,hidden:!1},{id:"signInStatus",title:"签到状态",className:"text-left",width:100,hidden:!1,search:{type:"select",data:{optionsLabel:"label",optionsValue:"value",options:[{label:"已签到",value:!0},{label:"未签到",value:!1}],placeholer:"",autoFocus:!1}},formatter:function(t){return t.signInStatus?"已签到":"未签到"}},{id:"opts",title:"操作",width:200,hidden:!1,formatter:function(t){return[{tag:"a",text:"查看",callback:function(t,a){Object(d.c)(t.id).then(function(a){a.state?(e.tableCheckedListAll="",e.tableCheckedList=[],e.techinDetails=a.data,e.techinId=t.id,e.curStatus="details"):e.$message.error(a.message)})}},{tag:"a",text:"跟场助理",callback:function(t,a){e.curId=t.id,e.assistant.name=t.assistantName,e.assistant.phone=t.assistantPhone,e.addAssignType="single",e.dialogVisible=!0}},{tag:"a",text:4==t.status?"重新上架":"下架",callback:function(t,a){var i=void 0,s=4==t.status?"重新上架":"下架";i=4!=t.status,e.$confirm("是否执行"+s+"操作","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(d.i)(t.id,i).then(function(t){if(t.state){var a=s+"成功！";e.setTableUrl(e.loginType.loginType),e.$message.success(a)}else e.setTableUrl(e.loginType.loginType),e.$message.error(t.message)})}).catch(function(){e.$message({type:"info",message:"已取消"+s})})}},{tag:"a",text:1==t.top?"取消置顶":"置顶",callback:function(t,a){var i=void 0,s=void 0;1==t.top?(i="NO",s="取消置顶"):(i="YES",s="置顶"),e.$confirm("是否执行"+s+"操作","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(d.g)(t.id,i).then(function(t){t.state?(e.setTableUrl(e.loginType.loginType),e.$message.success(s+"成功")):(e.setTableUrl(e.loginType.loginType),e.$message.success(t.message))})}).catch(function(){e.$message({type:"info",message:"已取消"+s})})}},{tag:"a",text:t.signInStatus?"取消签到":"签到",className:4==t.status?"hide":"",callback:function(t,a){var i=t.signInStatus?"取消签到":"签到",s=!t.signInStatus,n=t.id;e.$confirm("是否"+i,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(d.h)(n,s).then(function(t){t.state?(e.setTableUrl(e.loginType.loginType),e.$message.success(i+"成功")):(e.setTableUrl(e.loginType.loginType),e.$message.success(t.message))})}).catch(function(){e.$message({type:"info",message:"已取消"+i})})}}]}}]:(this.showMultiple=!1,this.columns=[{id:"companyName",title:"单位名称",className:"text-left",width:150,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!1}}},{id:"title",title:"宣讲会标题",className:"text-left",width:150,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!1}}},{id:"timeSpace",title:"宣讲会时间",className:"text-left line-height-normal",width:200,search:{type:"datetime",data:{dateFormat:"yyyy-MM-dd hh:ii",placeholder:"宣讲会",change:function(t){t.value,t.target;e.tableDataUrl="/table-data/employment/manage/preachMeeting/getPreachMeetingAuditList?timeStamp="+(new Date).getTime()+"&beginTime="+e.$refs.teachList.tableSearchFields.timeSpace_start+"&endTime="+e.$refs.teachList.tableSearchFields.timeSpace_end}}}},{id:"areaName",title:"宣讲会场地",className:"text-left",width:120,search:{type:"input",data:{placeholer:"",autoFocus:!1}}},{id:"enrollNum",title:"报名人数",className:"text-left",width:100,hidden:!1,formatter:function(t){if(t.enrollNum)return t.enrollNum}},{id:"createTime",title:"提交时间",className:"text-left",width:150},{id:"status",title:"审核状态",className:"text-left",width:100,search:{type:"select",data:{optionsLabel:"label",optionsValue:"value",options:[{label:"待审核",value:0},{label:"已通过",value:1},{label:"未通过",value:2},{label:"已驳回",value:5}],placeholer:"",autoFocus:!1}},formatter:function(t){return t.statusName}},{id:"auditReason",title:"审核意见",className:"text-left",width:100,hidden:!1,formatter:function(t){if(!t.auditReason)return" - "}},{id:"opts",title:"操作",width:50,hidden:!1,formatter:function(t){return[{tag:"a",text:0==t.status?"审核":"查看",callback:function(t,a){0==t.status?(e.catchPlaceRules(),Object(d.c)(t.id).then(function(t){e.defaultInfo=t.data,e.curStatus="audit",e.editStatus="audit",e.sumarry=t.data.recruitmentBrief})):Object(d.c)(t.id).then(function(a){e.techinDetails=a.data,e.techinId=t.id,e.curStatus="details"})}}]}}])},submit:function(){var t=this;this.$refs.assistant.validate(function(e){if(e)if("single"==t.addAssignType)Object(d.a)(t.curId,t.assistant.name,t.assistant.phone).then(function(e){e.state?(t.$message.success("编辑成功!"),t.setTableUrl(t.loginType.loginType)):t.$message.error(e.message),t.dialogVisible=!1});else{var a="/api/employment/manage/preachMeeting/setAssistantPatch?idListStr="+t.tableCheckedList.join(",")+"&assistantName="+t.assistant.name+"&assistantPhone="+t.assistant.phone;Object(h.e)({url:a,type:"post",success:function(e){e.state?(t.$message.success("跟场助理设置成功!"),t.tableCheckedListAll="",t.tableCheckedList=[],t.setTableUrl(t.loginType.loginType)):(t.$message.error(e.message),t.tableCheckedListAll="",t.tableCheckedList=[]),t.dialogVisible=!1}})}})},submitAudit:function(){var t=this,e=this.$refs.baseInfoEdit.vali(),a=this.$refs.unitInfoEdit.vali();this.$refs.positionInfoEdit.tableData;e&&a&&(this.$refs.baseInfoEdit.toSubmit(),setTimeout(function(){var e=t.$refs.baseInfoEdit.baseInfo,a=t.$refs.unitInfoEdit.unitForm,i=t.$refs.positionInfoEdit.tableData,n=s()({},e,a);i&&(n.recruitmentPositionVOList=i),n.recruitmentBrief=t.sumarry,Object(h.e)({url:"/api/employment/manage/preachMeeting/agreeApply",type:"post",data:n,success:function(e){e.state?(t.$message.success("审核通过"),t.curStatus="list",t.setTableUrl(t.loginType.loginType)):t.$message.error(e.message)}})},200))}},components:{techinDetails:n.a,addTeachin:l.a,baseInfoEdit:o.a,unitInfoEdit:c.a,positionEdit:r.a},created:function(){this.catchLoginType()}}),f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"techinList"}},["list"!=t.curStatus?a("el-button",{staticStyle:{color:"#666"},attrs:{type:"text",icon:"el-icon-back"},on:{click:function(e){t.curStatus="list"}}},[t._v("返回")]):t._e(),t._v(" "),"edit"==t.curStatus?a("add-teachin",{attrs:{loginType:t.loginType},on:{backToParent:t.backToParent}}):t._e(),t._v(" "),"details"==t.curStatus?a("techin-details",{attrs:{techinDetails:t.techinDetails,techinId:t.techinId,loginType:t.loginType,data:t.data},on:{backToParent:t.backToParent}}):t._e(),t._v(" "),"list"==t.curStatus?a("div",{staticClass:"techinBox"},[a("v-table",{ref:"teachList",attrs:{url:t.tableDataUrl,columns:t.columns,idField:"id",pagesize:"15",multiple:t.showMultiple,search:!1,order:!0,columnsControl:!0},on:{afterChecked:t._tableChecked}},[a("div",{staticClass:"pull-left",attrs:{slot:"btn-group"},slot:"btn-group"},[t.tableCheckedListAll?a("el-button",{staticClass:"operability-hint",attrs:{type:"text"}},[t._v("已选择"+t._s(t.tableCheckedListAll)+"项,其中可操作的有"+t._s(t.tableCheckedList.length)+"项")]):t._e()],1),t._v(" "),a("div",{staticClass:"pull-right",attrs:{slot:"btn-group"},slot:"btn-group"},[t.loginType.isAdmin&&"宣讲会管理"==t.data.title?a("el-button",{staticClass:"custom-btn",attrs:{type:"primary"},on:{click:t.exportStat}},[t._v("导出")]):t._e(),t._v(" "),t.loginType.isAdmin&&"宣讲会管理"==t.data.title?a("el-button",{staticClass:"custom-btn",attrs:{type:"primary"},on:{click:t.batchAssistant}},[t._v("批量设置跟场助理")]):t._e(),t._v(" "),a("el-button",{staticClass:"custom-btn",attrs:{type:"primary"},on:{click:t.createTechin}},[t._v("新增宣讲会")])],1)])],1):t._e(),t._v(" "),a("div",{staticClass:"setAssistant"},[a("el-dialog",{attrs:{visible:t.dialogVisible,width:"480px","before-close":t.beforCancle},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{staticClass:"form"},[a("el-form",{ref:"assistant",attrs:{model:t.assistant,rules:t.assistantRules,"label-width":"50px"}},[a("el-form-item",{attrs:{prop:"name"}},[a("i",{staticClass:"nameIcon",attrs:{slot:"label"},slot:"label"}),t._v(" "),a("el-input",{attrs:{placeholder:"请输入跟场助理姓名"},model:{value:t.assistant.name,callback:function(e){t.$set(t.assistant,"name",e)},expression:"assistant.name"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"phone"}},[a("i",{staticClass:"phoneIcon",attrs:{slot:"label"},slot:"label"}),t._v(" "),a("el-input",{attrs:{placeholder:"请输入跟场助理电话"},model:{value:t.assistant.phone,callback:function(e){t.$set(t.assistant,"phone",e)},expression:"assistant.phone"}})],1),t._v(" "),a("div",{staticClass:"btnGroup"},[a("a",{on:{click:t.cancle}},[t._v("取 消")]),t._v(" "),a("a",{on:{click:t.submit}},[t._v("确 定")])])],1)],1)])],1),t._v(" "),t.reasonVisible?a("div",{staticClass:"reason btnGroup"},[a("el-dialog",{attrs:{visible:t.reasonVisible,title:"审核意见",width:"480px"},on:{"update:visible":function(e){t.reasonVisible=e}}},[a("div",{staticClass:"sumarryInput"},[a("el-input",{attrs:{type:"textarea",resize:"none",rows:"4"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}}),t._v(" "),a("a",{staticStyle:{"margin-top":"20px"},on:{click:t.reject}},[t._v("提交")])],1)])],1):t._e(),t._v(" "),"audit"==t.curStatus?a("div",{staticStyle:{background:"#fff"}},[a("base-info-edit",{ref:"baseInfoEdit",attrs:{editStatus:t.editStatus,defaultInfo:t.defaultInfo,placeRule:t.placeRule,loginType:t.loginType}}),t._v(" "),a("unit-info-edit",{ref:"unitInfoEdit",attrs:{defaultInfo:t.defaultInfo,loginType:t.loginType}}),t._v(" "),a("position-edit",{ref:"positionInfoEdit",attrs:{defaultInfo:t.defaultInfo,unitList:t.unitList}}),t._v(" "),a("div",{staticClass:"sumarry"},[t._m(0),t._v(" "),a("div",{staticClass:"sumarryInput"},[a("el-input",{attrs:{type:"textarea",resize:"none",rows:"8"},model:{value:t.sumarry,callback:function(e){t.sumarry=e},expression:"sumarry"}})],1)]),t._v(" "),a("div",{staticClass:"btnGroup"},[a("div",[a("a",{on:{click:t.submitAudit}},[t._v("通过")]),t._v(" "),a("a",{on:{click:function(e){return t.showReason("fail")}}},[t._v("不通过")]),t._v(" "),a("a",{on:{click:function(e){return t.showReason("reject")}}},[t._v("驳回重新提交")])])])],1):t._e(),t._v(" "),a("v-modal",{attrs:{show:t.showExport,effect:"fade"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("导出")])]),t._v(" "),a("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[a("v-tree",{ref:"tree",attrs:{id:"resourceTree",cascade:"true",items:t.fieldsToExport,checkable:!0,search:!0}})],1),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showExport=!1}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.exportTable}},[t._v("导出")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title clearfix"},[e("h1",[e("span",[e("em"),this._v(" "),e("i",[this._v("招聘简章")])])])])}]};var v=a("C7Lr")(p,f,!1,function(t){a("6s4h"),a("MS6M")},"data-v-48a2a41a",null);e.default=v.exports},zILJ:function(t,e,a){"use strict";var i=a("aA9S"),s=a.n(i),n=a("+iF4"),l=a("VDzf"),o=a("WD6V"),c=a("iAlU"),r=a("xTvN"),d=a("GwEi"),u=a("Y253"),h=a("zY0d"),m=a("jCtM"),p=(a("p+qa"),a("C331")),f=(n.a,l.a,o.a,c.a,r.a,d.a,u.a,{data:function(){return{columnsOfEnroll:[],tabIndex:0,placeRule:{},disabledEditPosition:!0,showDialog:!1,defaultFormInfo:{},editStatus:!1,status:"",statusName:"",showLog:!1,sumarry:"",dataUrl:""}},props:["loginType","techinDetails","data"],computed:{tableData:function(){return this.techinDetails.preachMeetingEnrollMemberDTOList}},methods:{changeTabs:function(t){this.tabIndex=t},downloadTicket:function(){window.location.href="/downloads/employment/manage/preachMeeting/downLoadEnrollMember?id="+this.techinDetails.id},revise:function(){var t=this,e=this.$refs.baseInfoEdit.vali(),a=this.$refs.unitInfoEdit.vali(),i=(this.$refs.positionInfoEdit.tableData,void 0);i="COMPANY"==this.loginType.loginType?"/api/employment/preachMeeting/updatePreachMeeting":"/api/employment/manage/preachMeeting/updatePreachMeeting",e&&a&&(this.$refs.baseInfoEdit.toSubmit(),setTimeout(function(){var e=t.$refs.baseInfoEdit.baseInfo,a=t.$refs.unitInfoEdit.unitForm,n=t.$refs.positionInfoEdit.tableData,l=s()({},e,a);n&&(l.recruitmentPositionVOList=n),l.recruitmentBrief=t.sumarry,Object(p.e)({url:i,type:"post",data:l,success:function(e){e.state?("COMPANY"==t.loginType.loginType?t.$message.success("提交成功"):t.$message.success("修改成功"),t.dataUrl="/api/employment/manage/preachMeeting/getOperationDetailList?id="+t.techinDetails.id+"&time="+(new Date).getTime(),t.$emit("backToParent")):(t.$message.error(e.message),t.$emit("backToParent"))}})},200))},catchPlaceRules:function(){var t=this;Object(h.a)("PREACH_MEETING").then(function(e){e.length&&(t.placeRule=e[0],t.status=t.techinDetails.status,t.statusName=t.techinDetails.statusName)})},closeDialog:function(){this.showDialog=!1},checkPositionDetails:function(t){this.showDialog=!0,this.defaultFormInfo=t},editPositionDetails:function(t){},editForAdmin:function(){this.editStatus=!this.editStatus,this.sumarry=this.techinDetails.recruitmentBrief},reCall:function(){var t=this;Object(m.f)(this.techinDetails.id).then(function(e){e.state?(t.$message.success("撤回成功"),t.statusName="已撤回",t.status=3):t.$message.error(e.message)})},showOpLog:function(){this.showLog=!this.showLog}},components:{baseInfoDetails:n.a,position:l.a,oplog:o.a,addTeachin:c.a,baseInfoEdit:r.a,unitInfoEdit:d.a,positionEdit:u.a},created:function(){this.dataUrl="/api/employment/manage/preachMeeting/getOperationDetailList?id="+this.techinDetails.id+"&time="+(new Date).getTime(),this.catchPlaceRules(),this.columnsOfEnroll=[{id:"studentId",title:"学号",className:"text-left",width:150,hidden:!1},{id:"name",title:"姓名",className:"text-left",width:100,hidden:!1},{id:"grade",title:"年级",className:"text-left",width:100,hidden:!1,formatter:function(t){return t.grade?t.grade+"级":""}},{id:"educationLevel",title:"培养层次",className:"text-left",width:100,hidden:!1},{id:"college",title:"学院",className:"text-left",width:150,hidden:!1},{id:"major",title:"专业",className:"text-left",width:100,hidden:!1},{id:"className",title:"班级",className:"text-left",width:100,hidden:!1},{id:"phone",title:"电话",className:"text-left",width:100,hidden:!1},{id:"registrationTime",title:"报名时间",className:"text-left",width:150,hidden:!1}]}}),v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"techinDetails"}},[t.loginType.isAdmin&&"宣讲会管理"==t.data.title?a("div",{staticClass:"techinTabs"},[a("div",{staticClass:"buttons"},[a("a",{class:{active:0==t.tabIndex},on:{click:function(e){return t.changeTabs(0)}}},[a("span",[t._v("宣讲会信息")])]),a("a",{class:{active:1==t.tabIndex},on:{click:function(e){return t.changeTabs(1)}}},[a("span",[t._v("报名信息")])])])]):t._e(),t._v(" "),0==t.tabIndex?a("div",[a("div",{staticClass:"statusBar box"},[a("p",[a("span",{class:{default:0==t.status,error:2==t.status||5==t.status}},[t._v(t._s(t.statusName))])]),t._v(" "),a("h3",[a("a",{on:{click:t.showOpLog}},[t._v("操作日志")]),t._v(" "),"COMPANY"==t.loginType.loginType?a("div",{staticClass:"pull-right"},[5==t.status||3==t.status||1==t.status?a("a",{on:{click:t.editForAdmin}},[a("i"),a("em",[t._v(t._s(t.editStatus?"取消编辑":"编辑"))])]):t._e()]):t._e(),t._v(" "),"COMPANY"!=t.loginType.loginType?a("div",{staticClass:"pull-right"},[1==t.status||0==t.status?a("a",{on:{click:t.editForAdmin}},[a("i"),a("em",[t._v(t._s(t.editStatus?"取消编辑":"编辑"))])]):t._e()]):t._e()]),t._v(" "),t.loginType.isAdmin?a("div",{staticClass:"signStatus"},[a("i",{class:[t.techinDetails.signInStatus?"success":"fail"]})]):t._e()]),t._v(" "),t.editStatus?t._e():a("div",[a("div",{staticClass:"baseInfo"},[t._m(0),t._v(" "),a("ul",{staticClass:"baseInfoList"},[a("li",[a("span",[t._v("宣讲会标题：")]),t._v(" "),a("i",[t._v(t._s(t.techinDetails.title))])]),t._v(" "),a("li",[a("span",[t._v("所在学校：")]),t._v(" "),a("i",[t._v(t._s(t.techinDetails.schoolName))])]),t._v(" "),a("li",[a("span",[t._v("宣讲会时间：")]),t._v(" "),a("i",[t._v(t._s(t.techinDetails.beginTime+"~"+t.techinDetails.endTime))])]),t._v(" "),a("li",[a("span",[t._v("场地：")]),t._v(" "),a("i",[t._v(t._s(t.techinDetails.areaDetail?t.techinDetails.areaDetail:"管理员分配场地"))])]),t._v(" "),"ADMIN_ASSIGNMENT"==t.techinDetails.areaType&&"COMPANY"==t.techinDetails.createType?a("li",[a("span",[t._v("场地要求：")]),t._v(" "),a("i",[t._v(t._s(t.techinDetails.areaRequirement))])]):t._e(),t._v(" "),t.techinDetails.areaCategoryName?a("li",[a("span",[t._v("场地类别：")]),t._v(" "),a("i",[t._v(t._s(t.techinDetails.areaCategoryName))])]):t._e(),t._v(" "),a("li",[a("span",[t._v("简历接收时间：")]),t._v(" "),t.techinDetails.resumeReceiveBeginTime?a("i",[t._v(t._s(t.techinDetails.resumeReceiveBeginTime.split(" ")[0]+" 至 "+t.techinDetails.resumeReceiveEndTime.split(" ")[0]))]):t._e()]),t._v(" "),"ADMIN_ASSIGNMENT"==t.techinDetails.areaType&&"COMPANY"==t.techinDetails.createType?a("li",{staticClass:"areaExplain"},[a("el-collapse",{attrs:{accordion:""}},[a("el-collapse-item",[a("template",{slot:"title"},[a("span",{staticClass:"title"},[a("em",[t._v("宣讲会场地说明：")])])]),t._v(" "),a("div",{staticClass:"content",domProps:{innerHTML:t._s(t.techinDetails.areaExplain)}})],2)],1)],1):t._e()])]),t._v(" "),a("div",{staticClass:"unitInfo"},[t._m(1),t._v(" "),a("ul",{staticClass:"baseInfoList unitInfoList"},[a("div",[a("li",[a("span",[t._v("单位名称：")]),t._v(" "),a("i",[t._v(t._s(t.techinDetails.companyName))])]),t._v(" "),a("li",[a("span",[t._v("单位性质：")]),t._v(" "),a("i",[t._v(t._s(t.techinDetails.property))])])]),t._v(" "),a("div",[a("li",[a("span",[t._v("单位规模：")]),t._v(" "),a("i",[t._v(t._s(t.techinDetails.scale))])]),t._v(" "),a("li",[a("span",[t._v("邮箱：")]),t._v(" "),a("i",[t._v(t._s(t.techinDetails.email))])])]),t._v(" "),a("div",[a("li",[a("span",[t._v("单位联系人：")]),t._v(" "),a("i",[t._v(t._s(t.techinDetails.contactPeople))])]),t._v(" "),a("li",[a("span",[t._v("电话：")]),t._v(" "),a("i",[t._v(t._s(t.techinDetails.contactPhone))])])]),t._v(" "),a("li",[a("span",[t._v("单位地址：")]),t._v(" "),a("i",[t._v(t._s(t.techinDetails.addressDetail))])]),t._v(" "),a("li",{staticClass:"box"},[a("span",[t._v("单位简介：")]),t._v(" "),a("i",{domProps:{innerHTML:t._s(t.techinDetails.summary)}})])])]),t._v(" "),a("div",{staticClass:"positionList"},[t._m(2),t._v(" "),a("div",{staticClass:"positionTable"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.techinDetails.recruitmentPositionTableDTOList}},[a("el-table-column",{attrs:{width:"100",type:"index",label:"#"}}),t._v(" "),a("el-table-column",{attrs:{prop:"positionName",label:"职位名称"}}),t._v(" "),a("el-table-column",{attrs:{label:"职位性质"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s("PRACTICE"==e.row.positionProperty?"实习":"全职"))])]}}],null,!1,2348323164)}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.checkPositionDetails(e.row)}}},[t._v("详情")]),t._v(" "),t.loginType.isAdmin&&t.editStatus?a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.editPositionDetails(e.row)}}},[t._v("删除")]):t._e()]}}],null,!1,26106746)})],1)],1)]),t._v(" "),a("div",{staticClass:"summary"},[a("div",{staticClass:"title"},[t._m(3),t._v(" "),a("div",{staticClass:"content"},[a("p",{domProps:{innerHTML:t._s(t.techinDetails.recruitmentBrief)}})])])])])]):a("div",[a("v-table",{ref:"teachList",attrs:{rows:t.tableData,columns:t.columnsOfEnroll,order:!0,idField:"id",pagesize:"15"}},[a("div",{staticClass:"pull-right",attrs:{slot:"btn-group"},slot:"btn-group"},[t.loginType.isAdmin&&"宣讲会管理"==t.data.title&&t.tableData.length?a("el-button",{staticClass:"custom-btn",attrs:{type:"primary"},on:{click:t.downloadTicket}},[t._v("导出")]):t._e()],1)])],1),t._v(" "),t.editStatus?a("div",[a("base-info-edit",{ref:"baseInfoEdit",attrs:{defaultInfo:t.techinDetails,placeRule:t.placeRule,loginType:t.loginType}}),t._v(" "),a("unit-info-edit",{ref:"unitInfoEdit",attrs:{defaultInfo:t.techinDetails,loginType:t.loginType}}),t._v(" "),a("position-edit",{ref:"positionInfoEdit",attrs:{defaultInfo:t.techinDetails,unitList:t.unitList}}),t._v(" "),a("div",{staticClass:"summary"},[t._m(4),t._v(" "),a("div",{staticClass:"sumarryInput"},[a("el-input",{attrs:{type:"textarea",resize:"none",rows:"8"},model:{value:t.sumarry,callback:function(e){t.sumarry=e},expression:"sumarry"}})],1)]),t._v(" "),t.loginType.isAdmin?a("div",{staticClass:"btnGroup"},[1==t.status?a("a",{staticClass:"submit",on:{click:t.revise}},[t._v("修改")]):t._e()]):t._e(),t._v(" "),"COMPANY"==t.loginType.loginType?a("div",{staticClass:"btnGroup"},[1==t.status?a("a",{staticClass:"submit",on:{click:t.revise}},[t._v("修改")]):t._e()]):t._e()],1):t._e(),t._v(" "),t.showDialog?a("position",{attrs:{showDialog:t.showDialog,readonly:t.disabledEditPosition,defaultFormInfo:t.defaultFormInfo},on:{closeDialog:t.closeDialog}}):t._e(),t._v(" "),a("div",{class:{show:t.showLog},attrs:{id:"timeline"}},[a("oplog",{attrs:{dataUrl:t.dataUrl}})],1),t._v(" "),"COMPANY"==t.loginType.loginType?a("div",{staticClass:"btnGroup"},[0==t.status?a("a",{staticClass:"reCall",on:{click:t.reCall}},[t._v("撤回")]):t._e(),t._v(" "),5==t.status&&t.editStatus||3==t.status&&t.editStatus?a("a",{staticClass:"submit",on:{click:t.revise}},[t._v("重新提交")]):t._e()]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title clearfix"},[e("h1",[e("span",[e("em"),this._v(" "),e("i",[this._v("基本信息")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title clearfix"},[e("h1",[e("span",[e("em"),this._v(" "),e("i",[this._v("单位信息")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title clearfix"},[e("h1",[e("span",[e("em"),this._v(" "),e("i",[this._v("职位信息")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{staticClass:"clearfix"},[e("span",[e("em"),this._v(" "),e("i",[this._v("招聘简章")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title clearfix"},[e("h1",[e("span",[e("em"),this._v(" "),e("i",[this._v("招聘简章")])])])])}]};var g=a("C7Lr")(f,v,!1,function(t){a("13x6"),a("EPZM")},"data-v-58d1d886",null);e.a=g.exports}});