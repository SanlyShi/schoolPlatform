webpackJsonp([145],{"22/C":function(t,e){},"Y+63":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o,a=s("a3Yh"),l=s.n(a),c=s("C331"),n=s("a/8i"),r=s("Mh8U"),u=s("d86U"),d=(n.default,r.default,u.a,i={getRouter:function(){this.$router.push({name:"employment",params:{toPage:"/schoolResumepx"}})},closeSendResume:function(){this.showSendResume=!1},toApply:function(t){this.curPositionId=t.relationId,this.showSendResume=!0},showRecruit2Index:function(){this.curPageName="details2Index"}},l()(i,"getRouter",function(t){this.$parent.curRoute="/schoolResumepx"}),l()(i,"backToCollect",function(){this.curPageName="list"}),l()(i,"toRecruitDetails",function(t){this.toCollectedDetails(t)}),l()(i,"handleCurrentChange",function(t){this.curPage=t-1}),l()(i,"getCollected",function(){var t=this;this.loading=!0,Object(c.e)({url:this.tableData_url,type:"get",data:{pageSize:this.pageSize,pageIndex:this.curPage},success:function(e){e.state&&e.data?(t.collectList=e.data,t.collectListTotal=e.total,t.loading=!1):(t.collectList=[],t.collectListTotal=0,t.loading=!1)}})}),l()(i,"toCollectedDetails",function(t){this.collectTitle="收藏详情",this.curPageName="details",t.id=t.relationId?t.relationId:t.id,this.collectedDetails=t,this.recruitmentId=t.recruitmentId}),l()(i,"getInfoError",function(){this.curPageName="list"}),l()(i,"setCollect",function(t){var e=this;this.userInfo||"STUDENT"!=this.userInfo.type||(this.$message.error("您还未登录或非学生,暂无权限申请职位"),this.$router.push("/employment/login"));var s;s="/api/employment/collection/cancelCollectByRelationId/"+t.relationId,Object(c.e)({url:s,type:"post",success:function(t){t.state?(e.getCollected(),e.$message.success("取消收藏成功")):e.$message.error("取消收藏失败")}})}),{props:["userInfo"],data:function(){return{curPositionId:"",showSendResume:!1,pageSize:10,collectListTotal:0,curPage:0,tableData_url:"/table-data/employment/collection/list",collectTitle:"我的收藏",toDetails:!1,collectList:[],collectedDetails:"",curPageName:"list",recruitmentId:"",loading:!1}},components:{ApplayDetails:n.default,recruitIndex:r.default,sendResume:u.a},created:function(){this.getCollected()},watch:{curPage:function(){this.getCollected()}},methods:(o={getRouter:function(){this.$router.push({name:"employment",params:{toPage:"/schoolResumepx"}})},closeSendResume:function(){this.showSendResume=!1},toApply:function(t){this.curPositionId=t.relationId,this.showSendResume=!0},showRecruit2Index:function(){this.curPageName="details2Index"}},l()(o,"getRouter",function(t){this.$parent.curRoute="/schoolResumepx"}),l()(o,"backToCollect",function(){this.curPageName="list"}),l()(o,"toRecruitDetails",function(t){this.toCollectedDetails(t)}),l()(o,"handleCurrentChange",function(t){this.curPage=t-1}),l()(o,"getCollected",function(){var t=this;this.loading=!0,Object(c.e)({url:this.tableData_url,type:"get",data:{pageSize:this.pageSize,pageIndex:this.curPage},success:function(e){e.state&&e.data?(t.collectList=e.data,t.collectListTotal=e.total,t.loading=!1):(t.collectList=[],t.collectListTotal=0,t.loading=!1)}})}),l()(o,"toCollectedDetails",function(t){this.collectTitle="收藏详情",this.curPageName="details",t.id=t.relationId?t.relationId:t.id,this.collectedDetails=t,this.recruitmentId=t.recruitmentId}),l()(o,"getInfoError",function(){this.curPageName="list"}),l()(o,"setCollect",function(t){var e=this;this.userInfo||"STUDENT"!=this.userInfo.type||(this.$message.error("您还未登录或非学生,暂无权限申请职位"),this.$router.push("/employment/login"));var s;s="/api/employment/collection/cancelCollectByRelationId/"+t.relationId,Object(c.e)({url:s,type:"post",success:function(t){t.state?(e.getCollected(),e.$message.success("取消收藏成功")):e.$message.error("取消收藏失败")}})}),o)}),h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{id:"collect"}},["details"==t.curPageName?s("el-button",{staticStyle:{color:"#666"},attrs:{type:"text",icon:"el-icon-back"},on:{click:function(e){t.curPageName="list",t.collectTitle="我的收藏"}}},[t._v("返回")]):t._e(),t._v(" "),"details"==t.curPageName?s("Applay-details",{ref:"collectDetails",attrs:{checkUserInfo:t.userInfo,recruitmentInfo:t.collectedDetails},on:{showRecruit2Index:t.showRecruit2Index,getRouter:t.getRouter,getInfoError:t.getInfoError}}):t._e(),t._v(" "),"details2Index"==t.curPageName?s("recruit-index",t._b({attrs:{recruitIdFromCollect:t.recruitmentId},on:{toRecruitDetails:t.toRecruitDetails,backToCollect:t.backToCollect}},"recruit-index",t.$attrs,!1)):t._e(),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"list"==t.curPageName,expression:"curPageName=='list'"}]},[t.collectList.length?s("ul",{staticClass:"collectList"},t._l(t.collectList,function(e,i){return s("li",{key:i,staticClass:"item",on:{click:function(s){return t.toCollectedDetails(e)}}},[s("div",{staticClass:"left"},[s("div",[s("span",{staticClass:"job-name"},[t._v(t._s(e.positionName))]),t._v(" "),s("span",{staticClass:"job-price"},[t._v(t._s(e.salary))])]),t._v(" "),s("div",{staticClass:"job-address"},[t._v(t._s(e.workplace))])]),t._v(" "),s("div",{staticClass:"right"},[s("div",{staticClass:"normal"},[s("div",{staticClass:"job-company"},[t._v(t._s(e.companyName))]),t._v(" "),s("div",{staticClass:"job-time"},[t._v(t._s(e.collectionTime?e.collectionTime.split(" ")[0]:""))])]),t._v(" "),s("div",{staticClass:"hover"},[s("img",{staticClass:"like",attrs:{src:"/static/image/employment/like_active.png",alt:""},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.setCollect(e)}}}),t._v(" "),s("span",[t._v("已收藏")]),t._v(" "),s("el-button",{staticClass:"apply-btn",attrs:{type:"primary"},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.toApply(e)}}},[t._v("申请这个职位")])],1)])])}),0):t._e(),t._v(" "),t.collectList.length?t._e():s("p",{staticClass:"noResult"},[t._v("\n      暂无收藏记录！\n    ")]),t._v(" "),s("div",{staticClass:"paginationBox"},[t.collectList.length?s("el-pagination",{attrs:{background:"",layout:"prev, pager, next","page-size":t.pageSize,total:t.collectListTotal},on:{"current-change":t.handleCurrentChange}}):t._e()],1)]),t._v(" "),t.showSendResume?s("send-resume",{attrs:{positionId:t.curPositionId},on:{addResume:t.getRouter,close:t.closeSendResume}}):t._e()],1)},staticRenderFns:[]};var g=s("C7Lr")(d,h,!1,function(t){s("sV5L"),s("22/C")},"data-v-0d345e3d",null);e.default=g.exports},sV5L:function(t,e){}});