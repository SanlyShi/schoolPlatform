webpackJsonp([177],{J24G:function(e,t){},gznJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("C331"),n={data:function(){var e=this;return{studentFenId:{userId:"",name:""},subjectArr:[{label:"理工",value:"理工"},{label:"文史",value:"文史"},{label:"综合改革",value:"综合改革"}],check:!0,url:"/table-data/archives/intention/getMajorInfo",isParentPage:!0,columns:"",showBatchDistributionModal:!1,tableCheckedList:[],checkTemplateUrl:"/archives/intention/check",importParams:{parentPageTitle:"意向生源管理",downloadTemplateUrl:"/archives/intention/module",downloadErrorTemplateUrl:"/archives/intention/error",templateName:"意向生源管理批量导入模板.xlsx",importBtnType:[{name:"意向生源管理批量导入.xlsx",url:"/archives/intention/inputExcel",method:"post",isShowBtn:!0,success:function(t){t.state&&(e.url=e.url+"?timestamp="+(new Date).getTime())}}]},fieldArr:[{name:"推荐日期",value:""},{name:"推荐方式",value:""},{name:"学校推荐老师姓名",value:""},{name:"学校推荐老师所属招生宣传组",value:""},{name:"学校推荐老师工号",value:""},{name:"是否确认报考",value:""},{name:"省份",value:""},{name:"考生所在地市",value:""},{name:"考生号",value:""},{name:"身份证号",value:""},{name:"考生姓名",value:""},{name:"性别",value:""},{name:"联系方式",value:""},{name:"科类",value:""},{name:"高考成绩",value:""},{name:"高考排名",value:""},{name:"是否服从调剂",value:""},{name:"选测科目等级（仅江苏填写）",value:""},{name:"高考报名所在中学名称",value:""},{name:"中学推荐人姓名",value:""},{name:"中学推荐人职务",value:""},{name:"中学推荐人联系电话",value:""},{name:"意向专业",value:""},{name:"不想去的专业",value:""},{name:"专业志愿备注",value:""}]}},created:function(){this.initColumns()},methods:{consultantSelected:function(e){this.studentFenId.userId=e.userId,this.studentFenId.name=e.name},_backList:function(){this.check=!0,this.url=this.url+"?timestamp="+(new Date).getTime()},batchSet:function(){this.isParentPage=!1},backParentPage:function(){this.isParentPage=!0},exportTable:function(){window.location.href="/downloads/archives/intention/downLoadStudent"},_tableChecked:function(e){this.tableCheckedList=e},isAllEqual:function(e){return!(e.length>0)||!e.some(function(t,a){return t!==e[0]})},batchDistribution:function(){var e=[];this.tableCheckedList.forEach(function(t){e.push(t.province)}),this.isAllEqual(e)?this.showBatchDistributionModal=!0:this.$toast("只可选择相同省份的学生")},sureSet:function(){var e=this,t={},a=[];this.tableCheckedList.forEach(function(e){a.push(e.studentNo)}),t.studentNo=a,t.userId=this.studentFenId.userId,t.userName=this.studentFenId.name;Object(l.e)({url:"/api/archives/updateTeacher",dataType:"json",type:"post",data:t,async:!1,success:function(t){t.state?(e.$toast("设置成功"),e.url=e.url+"?timestamp="+(new Date).getTime(),e.showBatchDistributionModal=!1):e.$toast("设置失败")}})},initColumns:function(){var e=this;this.columns=[{id:"studentName",title:"考生姓名",className:"text-left",hidden:!1,width:120,search:{type:"input",data:{autoFocus:!0,placeholder:"考生姓名"}}},{id:"province",title:"省份",className:"text-left",hidden:!1,width:120,search:{type:"input",data:{autoFocus:!0,placeholder:"省份"}}},{id:"studentLand",title:"考生所在地市",className:"text-left",hidden:!0,width:120,search:{type:"input",data:{autoFocus:!0,placeholder:"考生所在地市"}}},{id:"middleSchool",title:"高考报名所在中学",className:"text-left",hidden:!1,width:120,search:{type:"input",data:{autoFocus:!0,placeholder:"高考报名所在中学"}}},{id:"phone",title:"联系方式",className:"text-left",hidden:!1,width:120,search:{type:"input",data:{autoFocus:!0,placeholder:"联系方式"}}},{id:"subject",title:"科类",className:"text-left",hidden:!1,width:120,search:{type:"select",data:{options:this.subjectArr,optionsLabel:"label",optionsValue:"value",placeholder:""}}},{id:"entranceResult",title:"高考成绩",className:"text-left",hidden:!1,width:120,search:{type:"input",data:{autoFocus:!0,placeholder:"高考成绩"}}},{id:"entranceEvaluate",title:"高考排名",className:"text-left",hidden:!1,width:120,search:{type:"input",data:{autoFocus:!0,placeholder:"高考排名"}}},{id:"schoolRecommendName",title:"学校推荐老师姓名",className:"text-left",hidden:!1,width:120,search:{type:"input",data:{autoFocus:!0,placeholder:"学校推荐老师姓名"}}},{id:"opt",className:"text-left",title:"操作",width:50,hidden:!1,formatter:function(){return[{tag:"a",text:"查看",className:"opt-btn",callback:function(t,a){e.check=!1,e.fieldArr[0].value=t.recommendDate,e.fieldArr[1].value=t.recommendMode,e.fieldArr[2].value=t.schoolRecommendName,e.fieldArr[3].value=t.schoolRecommendGroup,e.fieldArr[4].value=t.schoolRecommendUserNo,e.fieldArr[5].value=t.applicationOrNot,e.fieldArr[6].value=t.province,e.fieldArr[7].value=t.studentLand,e.fieldArr[8].value=t.studentNo,e.fieldArr[9].value=t.carId,e.fieldArr[10].value=t.studentName,e.fieldArr[11].value=t.sex,e.fieldArr[12].value=t.phone,e.fieldArr[13].value=t.subject,e.fieldArr[14].value=t.entranceResult,e.fieldArr[15].value=t.entranceEvaluate,e.fieldArr[16].value=t.dispensingOrNot,e.fieldArr[17].value=t.subjectLever,e.fieldArr[18].value=t.middleSchool,e.fieldArr[19].value=t.middleRecommendName,e.fieldArr[20].value=t.middlePost,e.fieldArr[21].value=t.middlePhone,e.fieldArr[22].value=t.mindMajor,e.fieldArr[23].value=t.unwillingMajor,e.fieldArr[24].value=t.majorMore}}]}}]}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isParentPage?a("div",{staticClass:"relationship-page container-fluid",attrs:{id:"direction-rel"}},[e.check?a("v-table",{ref:"studentTable",attrs:{url:e.url,pagesize:"10",idField:"id",columnsControl:!0,columns:e.columns,multiple:!0,order:!0,search:!1},on:{afterChecked:e._tableChecked}},[a("div",{attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[a("div",{staticClass:"btn-group pull-left"},[e.tableCheckedList.length>0?a("div",{staticClass:"batch-options"},[a("span",{staticClass:"pull-left"},[e._v("已选择"+e._s(e.tableCheckedList.length)+"项，其中可操作的有"+e._s(e.tableCheckedList.length)+"项")]),e._v(" "),a("div",{staticClass:"pull-left"},[a("button",{staticClass:"btn btn-bgColor-style clearBtnBorder resetBtn",staticStyle:{"margin-left":"10px"},attrs:{type:"button"},on:{click:function(t){return e.batchDistribution()}}},[e._v("批量分配")])])]):e._e()]),e._v(" "),a("div",{staticClass:"btn-group pull-right"},[a("button",{staticClass:"btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:function(t){return e.batchSet()}}},[e._v("批量导入")]),e._v(" "),a("button",{staticClass:"btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:function(t){return e.exportTable()}}},[e._v("导出")])])])]):e._e(),e._v(" "),e.check?e._e():a("div",{staticClass:"box-wrap"},[a("div",{staticClass:"title-div"},[a("button",{staticClass:"btn back-btn clearBtnBorder btnclass",attrs:{type:"button"},on:{click:e._backList}},[a("i",{staticClass:"maticon back-icon-btn",domProps:{innerHTML:e._s(e.icons("arrow_back"))}},[e._v("arrow_back")]),e._v(" "),a("span",{staticClass:"nav-title"},[e._v("返回")])])]),e._v(" "),e._l(e.fieldArr,function(t,l){return a("div",{staticClass:"item",class:{ex:22==l||23==l||24==l}},[a("p",[e._v(e._s(t.name))]),e._v(" "),a("p",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"item.value"}],staticClass:"form-control",attrs:{type:"text",disabled:"true"},domProps:{value:t.value},on:{input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}})])])})],2),e._v(" "),a("v-modal",{attrs:{show:e.showBatchDistributionModal,effect:"fade",width:"500"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[e._v("\n        批量分配\n      ")])]),e._v(" "),a("div",{staticClass:"modal-body",staticStyle:{height:"265px","padding-top":"25px"},attrs:{slot:"modal-body"},slot:"modal-body"},[a("div",{staticClass:"form-group"},[a("label",{staticStyle:{"padding-top":"6px"}},[e._v("用户检索：")]),e._v(" "),a("detect",{staticStyle:{display:"inline-block","margin-left":"18px",position:"absolute"},attrs:{url:"/api/archives/getUser",keyword:"userName",placeholder:"输入姓名"},on:{afterSelected:e.consultantSelected}})],1)]),e._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(t){e.showBatchDistributionModal=!1}}},[e._v("取消")]),e._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(t){return e.sureSet()}}},[e._v("确定")])])])],1):a("v-import",e._b({attrs:{checkTemplateUrl:e.checkTemplateUrl},on:{backParentPage:e.backParentPage}},"v-import",e.importParams,!1))},staticRenderFns:[]};var s=a("C7Lr")(n,i,!1,function(e){a("J24G")},null,null);t.default=s.exports}});