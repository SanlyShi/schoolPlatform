webpackJsonp([45],{"9E6i":function(t,e){},BsaQ:function(t,e){},Esnu:function(t,e){},FGxn:function(t,e){},exsC:function(t,e){},gGKf:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("C331"),s={props:["allCount"],data:function(){return{educationCount:[],educationName:[],gradeCount:[],gradeName:[],collegeCount:[],collegeName:[]}},methods:{getData:function(){var t=this;Object(a.d)("/api/document/statistic/getStudentStatistic",{},"post").then(function(e){if(e.state){if(e.data&&e.data.educationLevel.length)for(var i=e.data.educationLevel,a=0;a<i.length;a++){var s=i[a],n=s.name,o=s.count;t.educationCount.push(o),t.educationName.push(n)}if(e.data&&e.data.grade.length)for(var r=e.data.grade,c=0;c<r.length;c++){var l=r[c],d=l.name,p=l.count;t.gradeCount.push(p),t.gradeName.push(d)}if(e.data&&e.data.college.length)for(var h=e.data.college,u=0;u<h.length;u++){var v=h[u],f=v.name,_=v.count;t.collegeCount.push(_),t.collegeName.push(f)}t.initCharts()}})},initCharts:function(){var t=this.$echarts.init(document.getElementById("eduBar")),e=this.$echarts.init(document.getElementById("grade")),i=this.$echarts.init(document.getElementById("college")),a={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:this.educationName,axisLabel:{color:"#606266",margin:12},axisLine:{show:!1},axisTick:{show:!1}},yAxis:{axisLine:{show:!1},axisTick:{show:!1},type:"value",axisLabel:{color:"#909399"},splitLine:{lineStyle:{type:"dashed"}}},grid:{left:50,bottom:30,top:30},series:[{data:this.educationCount,type:"bar",barWidth:16,label:{show:!0,position:"top",distance:10,verticalAlign:"middle",textStyle:{color:"#606266",fontSize:12}},itemStyle:{normal:{barBorderRadius:[3,3,0,0],color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#1D6FA3"},{offset:1,color:"#5FC7F5"}])}}}]};t.resize(),t.setOption(a);var s={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:this.gradeName,axisLabel:{color:"#606266",margin:12},axisLine:{show:!1},axisTick:{show:!1}},yAxis:{axisLine:{show:!1},axisTick:{show:!1},type:"value",axisLabel:{color:"#909399"},splitLine:{lineStyle:{type:"dashed"}}},grid:{left:50,bottom:30,top:30},series:[{data:this.gradeCount,type:"bar",barWidth:16,label:{show:!0,position:"top",distance:10,verticalAlign:"middle",textStyle:{color:"#606266",fontSize:12}},itemStyle:{normal:{barBorderRadius:[3,3,0,0],color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#EA5455"},{offset:1,color:"#FEB692"}])}}}]};e.resize(),e.setOption(s);var n={xAxis:{type:"value",axisLabel:{color:"#606266",margin:12,show:!1},axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{type:"dashed"}}},yAxis:{axisLine:{show:!1},axisTick:{show:!1},type:"category",data:this.collegeName,axisLabel:{color:"#909399",formatter:function(t){for(var e,i=t.split(""),a="",s=0;e=i[s++];)a+=e,s%5||(a+="\n");return a}}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:80,bottom:30,top:30},series:[{data:this.collegeCount,type:"bar",barWidth:16,label:{show:!0,position:"right",distance:10,verticalAlign:"middle",textStyle:{color:"#606266",fontSize:12}},itemStyle:{normal:{barBorderRadius:[0,3,3,0],color:new this.$echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"#97ABFF"},{offset:1,color:"#123597"}])}}}]},o=this.collegeName.length,r=32*o+30*o;i.getDom().style.height=r+"px",i.resize(),i.setOption(n)}},created:function(){var t=this;this.$nextTick(function(){t.getData()})}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"studentChart"}},[i("div",{staticClass:"backIcon",on:{click:function(e){return t.$emit("backToParent")}}},[i("i",{staticClass:"maticon back-icon",domProps:{innerHTML:t._s(t.icons("navigate_before"))}})]),t._v(" "),i("div",{staticClass:"topInfo"},[i("div",{staticClass:"info"},[i("div",{staticClass:"left"},[i("i"),t._v(" "),i("p",[i("span",[t._v("在校学生")]),t._v(" "),i("em",[t._v(t._s((new Date).toLocaleDateString().replace(/\//g,".")))])])]),t._v(" "),i("div",{staticClass:"right"},[i("span",[t._v(t._s(t.allCount.toFixed(0).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")))]),t._v(" 人\n            ")])])]),t._v(" "),i("div",{staticClass:"charts"},[i("div",{staticClass:"eduLevel"},[t._m(0),t._v(" "),i("div",{staticClass:"content"},[i("div",{ref:"eduBar",staticStyle:{height:"5rem"},attrs:{id:"eduBar"}})])]),t._v(" "),i("div",{staticClass:"eduLevel"},[t._m(1),t._v(" "),i("div",{staticClass:"content"},[i("div",{ref:"grade",staticStyle:{height:"5rem"},attrs:{id:"grade"}})])]),t._v(" "),i("div",{staticClass:"college"},[t._m(2),t._v(" "),i("div",{staticClass:"content"},[i("div",{ref:"college",attrs:{id:"college"}})])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",[e("i"),e("span",[this._v("培养层次")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h1",[e("i"),e("span",[this._v("年级")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h1",[e("i"),e("span",[this._v("学院")])])}]};var o=i("C7Lr")(s,n,!1,function(t){i("t1/T")},null,null).exports,r={data:function(){return{countAll:0,countClassLeader:0,countInstructor:0,countOther:0,countTutor:0,dataList:[],titleList:[]}},methods:{getData:function(){var t=this;Object(a.d)("/api/document/statistic/getTeacherStatistic",{},"post").then(function(e){if(e.state){if(!e.data)return t.$toast("暂无数据");var i=e.data,a=i.countAll,s=i.countClassLeader,n=i.countInstructor,o=i.countOther,r=i.countTutor;t.countAll=a,t.countClassLeader=s,t.countInstructor=n,t.countOther=o,t.countTutor=r,t.titleList=["辅导员","导师","班主任","其他"],t.dataList=[t.countInstructor,t.countTutor,t.countClassLeader,t.countOther],t.initCharts()}})},initCharts:function(){var t=this.$echarts.init(document.getElementById("eduBar")),e={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:this.titleList,axisLabel:{color:"#606266",margin:12},axisLine:{show:!1},axisTick:{show:!1}},yAxis:{axisLine:{show:!1},axisTick:{show:!1},type:"value",axisLabel:{color:"#909399"},splitLine:{lineStyle:{type:"dashed"}}},grid:{left:50,bottom:30,top:30},series:[{data:this.dataList,type:"bar",barWidth:16,label:{show:!0,position:"top",distance:10,verticalAlign:"middle",textStyle:{color:"#606266",fontSize:12}},itemStyle:{normal:{barBorderRadius:[3,3,0,0],color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#1D6FA3"},{offset:1,color:"#5FC7F5"}])}}}]};t.resize(),t.setOption(e)}},created:function(){this.getData()}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"teacherChart"}},[i("div",{staticClass:"backIcon",on:{click:function(e){return t.$emit("backToParent")}}},[i("i",{staticClass:"maticon back-icon",domProps:{innerHTML:t._s(t.icons("navigate_before"))}})]),t._v(" "),i("div",{staticClass:"topInfo"},[i("div",{staticClass:"info"},[i("div",{staticClass:"left"},[i("i"),t._v(" "),i("p",[i("span",[t._v("教职工")]),t._v(" "),i("em",[t._v(t._s((new Date).toLocaleDateString().replace(/\//g,".")))])])]),t._v(" "),i("div",{staticClass:"right"},[i("span",[t._v(t._s(t.countAll.toFixed(0).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")))]),t._v(" 人\n            ")])])]),t._v(" "),i("div",{staticClass:"charts"},[i("div",{staticClass:"eduLevel"},[t._m(0),t._v(" "),i("div",{staticClass:"content"},[i("div",{ref:"eduBar",staticStyle:{height:"5rem"},attrs:{id:"eduBar"}})])])]),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",[e("i"),e("span",[this._v("教职工信息")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bottom"},[e("span"),e("i"),e("span")])}]};var l=i("C7Lr")(r,c,!1,function(t){i("9E6i")},null,null).exports,d=i("a3Yh"),p=i.n(d),h={props:["detailsType"],data:function(){return{list:[],showAllText:!1}},computed:{type:function(){return this.detailsType}},methods:{getFlow:function(){var t=this,e=void 0;e="flow"==this.type?"/api/document/statistic/getWorkFlowDetailStatistic":"/api/document/statistic/getFormDetailStatistic",Object(a.d)(e,{},"post").then(function(e){e.state&&(t.list=e.data)})},toolip:function(t){if(t.length>=20)return!1;t.length>=10&&(this.showAllText=!this.showAllText)}},created:function(){this.getFlow()}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"flowDetails"}},[i("div",{staticClass:"backIcon",on:{click:function(e){return t.$emit("backToParent")}}},[i("i",{staticClass:"maticon back-icon",domProps:{innerHTML:t._s(t.icons("navigate_before"))}})]),t._v(" "),i("div",{staticClass:"content"},[i("h1",[i("i"),i("span",[t._v(t._s("flow"==t.type?"审批流程服务":"表单服务"))])]),t._v(" "),i("div",{staticClass:"list"},[i("ul",[i("li",{staticClass:"header"},[i("span",[t._v("应用服务")]),i("i",[t._v(t._s("flow"==t.type?"审批完成":"已填写"))]),i("em",[t._v(t._s("flow"==t.type?"正在审批":"未填写"))])]),t._v(" "),t._l(t.list,function(e,a){return i("li",{key:a,on:{click:function(i){return t.toolip(e.name)}}},[i("span",{class:{showAllText:t.showAllText},attrs:{title:e.name}},[t._v(t._s(e.name))]),i("i",[t._v(t._s(e.countComplete))]),i("em",[t._v(t._s(e.countOther))])])})],2)])]),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bottom"},[e("span"),e("i"),e("span")])}]};var v=i("C7Lr")(h,u,!1,function(t){i("BsaQ")},null,null).exports,f={components:{flowDetails:v},data:function(){return{countEnable:0,enableAndDisable:[],enableStatistic:[],topCollectName:[],topCollectCount:[],ServiceCount:0,disableSerice:0,canvas:"",speed:0,animation:null,workFlowStatistic:null,formStatistic:null,completionRate:0,showDetails:!1,detailsType:""}},methods:{toDetails:function(t){this.detailsType=t,this.showDetails=!0},getData:function(){var t=this;Object(a.d)("/api/document/statistic/getAppStatistic",{},"post").then(function(e){if(e.state){if(t.countEnable=e.data.countEnable,e.data&&e.data.enableAndDisable.length){t.enableAndDisable=e.data.enableAndDisable,t.ServiceCount=e.data.enableAndDisable[0].count,t.disableSerice=e.data.enableAndDisable[1].count,t.workFlowStatistic=e.data.workFlowStatistic,t.formStatistic=e.data.formStatistic;var i=t.workFlowStatistic,a=i.countComplete,s=i.countWorkFlowApp;t.completionRate=100*(a/(s+a)).toFixed(4)}if(e.data&&e.data.enableStatistic.length&&(t.enableStatistic=e.data.enableStatistic,t.enableStatistic=t.enableStatistic.map(function(t){return{value:t.count,name:t.name}})),e.data&&e.data.topCollectStatistic.length)for(var n=e.data.topCollectStatistic,o=0;o<n.length;o++){var r=n[o],c=r.name,l=r.count;t.topCollectName.push(c),t.topCollectCount.push(l)}t.initCharts()}})},initCharts:function(){var t=this,e=this.$echarts.init(document.getElementById("service")),i=this.$echarts.init(document.getElementById("grade")),a=this.$echarts.init(document.getElementById("complete")),s={grid:{left:10,top:50},graphic:[{type:"text",left:"center",top:"40%",style:{text:"完成率",textAlign:"center",fill:"#303133",width:30,height:40,fontSize:14,fontFamily:"Microsoft YaHei"}},{type:"text",left:"center",top:"50%",style:{text:this.completionRate+"%",textAlign:"center",fill:"#3081FE",width:30,height:30,fontSize:18,fontFamily:"Microsoft YaHei"}}],series:[{name:"已启用的服务",type:"pie",radius:["50%","65%"],center:["50%","50%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"20",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:[this.completionRate,100-this.completionRate],itemStyle:{normal:{color:function(e){var i=[{c1:"#4D79F6",c2:"#80DCF4"},{c2:"#F6DA5D",c1:"#F6BE29"},{c2:"#9E28FA",c1:"#7D32FF"},{c2:"#FF7E91",c1:"#FB256E"}];return 1==e.dataIndex?"#F2F7FF":new t.$echarts.graphic.LinearGradient(1,0,0,0,[{offset:0,color:i[e.dataIndex].c1},{offset:1,color:i[e.dataIndex].c2}])}}}}]};a.resize(),a.setOption(s);var n={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:p()({data:this.enableStatistic,orient:"horizontal",itemWidth:10,itemHeight:10,bottom:20,itemGap:-5,left:65,textStyle:{color:"#606266",fontSize:14},formatter:function(e){for(var i=void 0,a=0,s=t.enableStatistic.length;a<s;a++)t.enableStatistic[a].name==e&&(i=t.enableStatistic[a].value);return["{a|"+e+"}","{b|"+(i/t.countEnable*100).toFixed(2)+"%}"].join("\n")}},"textStyle",{rich:{a:{fontSize:16,verticalAlign:"top",align:"center",padding:[0,60,28,0]},b:{fontSize:14,align:"left",padding:[0,15,0,0],lineHeight:25}}}),grid:{left:10,top:20},series:[{name:"已启用的服务",type:"pie",radius:["30%","40%"],center:["50%","30%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!0,textStyle:{fontSize:"20",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:this.enableStatistic,itemStyle:{normal:{color:function(e){var i=[{c1:"#4D79F6",c2:"#80DCF4"},{c2:"#F6DA5D",c1:"#F6BE29"},{c2:"#9E28FA",c1:"#7D32FF"},{c2:"#FF7E91",c1:"#FB256E"}];return new t.$echarts.graphic.LinearGradient(1,0,0,0,[{offset:0,color:i[e.dataIndex].c1},{offset:1,color:i[e.dataIndex].c2}])}}}}]};this.enableStatistic.length>2?e.getDom().style.height="9rem":e.getDom().style.height="7rem",e.resize(),e.setOption(n);var o={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},xAxis:{type:"category",data:this.topCollectName,axisLabel:{color:"#606266",margin:15,fontSize:12,interval:0,formatter:function(t){for(var e,i=t.split(""),a="",s=0;e=i[s++];)a+=e,s%4||(a+="\n");return a}},axisLine:{show:!1},axisTick:{show:!1}},yAxis:{axisLine:{show:!1},axisTick:{show:!1},type:"value",axisLabel:{color:"#909399"},splitLine:{lineStyle:{type:"dashed"}}},grid:{left:30,bottom:70,top:30},series:[{data:this.topCollectCount,type:"bar",barWidth:16,barCategoryGap:"40",label:{show:!0,position:"top",distance:10,verticalAlign:"middle",textStyle:{color:"#606266",fontSize:12}},itemStyle:{normal:{barBorderRadius:[3,3,0,0],color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#EA5455"},{offset:1,color:"#FEB692"}])}}}]};i.resize(),i.setOption(o)},backToParent:function(){}},created:function(){var t=this;clearInterval(this.animation),this.$nextTick(function(){t.getData()})}},_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"appChart"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.showDetails,expression:"!showDetails"}],staticClass:"chartPart"},[i("div",{staticClass:"backIcon",on:{click:function(e){return t.$emit("backToParent")}}},[i("i",{staticClass:"maticon back-icon",domProps:{innerHTML:t._s(t.icons("navigate_before"))}})]),t._v(" "),i("div",{staticClass:"topInfo"},[i("div",{staticClass:"left"},[i("span",[t._v("\n        "+t._s(t.ServiceCount)+"\n        "),i("i",[t._v("个")])]),t._v(" "),i("p",[t._v("已启用服务")])]),t._v(" "),i("div",{staticClass:"middle"}),t._v(" "),i("div",{staticClass:"right"},[i("span",[t._v("\n        "+t._s(t.disableSerice)+"\n        "),i("i",[t._v("个")])]),t._v(" "),i("p",[t._v("未启用服务")])])]),t._v(" "),i("div",{staticClass:"charts"},[i("div",{staticClass:"audit"},[i("h1",[t._m(0),t._v(" "),i("p",{staticClass:"right",on:{click:function(e){return t.toDetails("flow")}}},[i("span",[t._v("查看更多")]),t._v(" "),i("em")])]),t._v(" "),i("div",{staticClass:"title"},[i("span",[t._v("审批流程服务数")]),t._v(" "),t.workFlowStatistic?i("span",[t._v(t._s(t.workFlowStatistic.countWorkFlowApp+"个"))]):t._e()]),t._v(" "),i("div",{staticClass:"content",staticStyle:{"text-align":"center"},attrs:{id:"parent"}},[i("div",{ref:"completePie",staticStyle:{height:"7rem"},attrs:{id:"complete"}})]),t._v(" "),i("div",{staticClass:"bottom topInfo"},[i("div",{staticClass:"left"},[t.workFlowStatistic?i("span",[t._v("\n              "+t._s(t.workFlowStatistic.countComplete)+"\n              ")]):t._e(),t._v(" "),i("p",[t._v("审批完成")])]),t._v(" "),i("div",{staticClass:"middle"}),t._v(" "),i("div",{staticClass:"right"},[t.workFlowStatistic?i("span",[t._v("\n              "+t._s(t.workFlowStatistic.countAudit)+"\n              ")]):t._e(),t._v(" "),i("p",[t._v("正在审批")])])])]),t._v(" "),i("div",{staticClass:"formService audit"},[i("h1",[t._m(1),t._v(" "),i("p",{staticClass:"right",on:{click:function(e){return t.toDetails("form")}}},[i("span",[t._v("查看更多")]),t._v(" "),i("em")])]),t._v(" "),i("div",{staticClass:"title"},[i("span",[t._v("表单服务数")]),t._v(" "),t.formStatistic?i("span",[t._v(t._s(t.formStatistic.countFormApp+"个"))]):t._e()]),t._v(" "),i("div",{staticClass:"formApp"},[i("div",{staticClass:"formBg"}),t._v(" "),i("div",{staticClass:"formInfo"},[i("span",[t._v("完成表单填写")]),t._v(" "),t.formStatistic?i("p",[i("i",[t._v(t._s(t.formStatistic.countSaveForm.toFixed(0).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")))]),i("em",[t._v("人次")])]):t._e()])])]),t._v(" "),i("div",{staticClass:"eduLevel"},[t._m(2),t._v(" "),i("div",{staticClass:"content"},[i("div",{ref:"eduBar",staticStyle:{height:"10rem"},attrs:{id:"service"}})])]),t._v(" "),i("div",{staticClass:"eduLevel"},[t._m(3),t._v(" "),i("div",{staticClass:"content"},[i("div",{ref:"grade",staticStyle:{height:"7rem"},attrs:{id:"grade"}})])])])]),t._v(" "),t.showDetails?i("flow-details",{attrs:{detailsType:t.detailsType},on:{backToParent:function(e){t.showDetails=!1}}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"left"},[e("i"),this._v(" "),e("span",[this._v("审批流程服务")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"left"},[e("i"),this._v(" "),e("span",[this._v("表单服务")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h1",[e("i"),this._v(" "),e("span",[this._v("已启用服务")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h1",[e("i"),this._v(" "),e("span",[this._v("最受欢迎服务top5")])])}]};var m=i("C7Lr")(f,_,!1,function(t){i("exsC")},null,null).exports,g={props:{account:{default:null},routerName:{default:null},data:{default:null}},components:{studentChart:o,teacherChart:l,appChart:m},watch:{routerName:function(t){"/main/main"==t&&this.getAdviceList()}},created:function(){var t=this;Object(a.d)("/api/document/statistic/authority",{},"post").then(function(e){e.state&&e.data&&(t.authority=!0,Object(a.d)("/api/document/statistic/getOverallView",{},"post").then(function(e){e.state&&e.data&&(t.studentCount=e.data.student,t.teacherCount=e.data.teacher,t.appCount=e.data.app)}))}),this.getAdviceList(),Object(a.d)("/api/firstPage/getPictureList?timestamp="+new Date).then(function(e){if(e.state)if(e.data.content&&e.data.content.length>0){if(t.swiperList=[],e.data.content.forEach(function(e,i){if(0==e.is_enable){var a={url:""+e.url,img:"/downloads/storage/images/"+e.picture_hash,title:""};t.swiperList.push(a)}}),0==t.swiperList.length){t.swiperList=[];var a={url:"javascript:",img:i("GJIK"),title:""};t.swiperList.push(a)}}else{t.swiperList=[];var s={url:"javascript:",img:i("GJIK"),title:""};t.swiperList.push(s)}else t.$toast(e.message)})},data:function(){return{showChart:!1,chartType:"",recordData:[],hotAppList:[],adviceList:[],swiperList:[],studentCount:0,teacherCount:0,appCount:0,authority:!1}},methods:{backToParent:function(){this.showChart=!1},toAppList:function(){this.$parent.addBread({icon:"assignment",title:"办事大厅",route:"/applicationList/MWorkHall"})},toAdvice:function(t){var e={icon:"assignment",title:"公告",data:t,route:"/main/advice"};this.$parent.addBread(e)},saoyisao:function(){this.$toast("暂未开放")},getHotAppList:function(){var t=this;Object(a.d)("/api/app/popular").then(function(e){t.hotAppList=e.data.sort(function(t,e){return t.sort-e.sort})})},_checkDetail:function(t){var e=this,i={},s="/api/app/"+t.app.id+"/business/now";Object(a.d)(s).then(function(a){"FORM"===t.app.setting.type?i={route:"/form/MFormLayout?appId="+t.app.id,title:"",curBusiness:a.data[0],businessList:a.data.map(function(t){return t.value=t.business.name,t.key=t.business.id,t}),type:{typeTitle:"",childName:t.name}}:"LINK"===t.app.setting.type?window.location.href=t.app.setting.linkUrl:i={route:"/form/MFlowDetail?appId="+t.app.id+"&businessId="+a.data[0].business.id,title:t.app.name,curBusiness:a.data[0],businessList:a.data.map(function(t){return t.value=t.business.name,t.key=t.business.id,t})},e.$parent.addBread(i)})},getAdviceList:function(){var t=this;Object(a.d)("/table-data/announcement/list/10",{pageSize:999,pageIndex:0,pageParams:{type:"all"}},"get").then(function(e){t.adviceList=e.data})}},mounted:function(){var t=this;window.addEventListener("popstate",function e(i){1==t.$parent.bread.length?(t.$vux.toast.show({text:"再按一次,退出系统",position:"bottom",type:"text"}),window.removeEventListener("popstate",e,!1),setTimeout(function(){window.addEventListener("popstate",e,!1)},2e3)):(t.$parent.removeLastBread(e),window.removeEventListener("popstate",e,!1),window.addEventListener("popstate",e,!1))},!1),this.getHotAppList()}},C={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"padding-bottom":"50px"},attrs:{id:"mobileMain"}},[t.showChart?t._e():a("div",{staticClass:"mainBox"},[a("div",{staticClass:"search_box bg-white"},[a("div",{staticClass:"search_icon"}),t._v(" "),a("input",{attrs:{readonly:"",type:"search",placeholder:"搜索"},on:{click:function(e){return t.toAppList()}}})]),t._v(" "),a("div",{staticClass:"swiper_wrap bg-white"},[a("swiper",{attrs:{list:t.swiperList,auto:!0,height:"120px"}})],1),t._v(" "),t.authority?a("div",{staticClass:"chartPart"},[a("div",{staticClass:"typeList"},[a("div",{staticClass:"students"},[a("a",{staticClass:"studentCard",on:{click:function(e){t.showChart=!0,t.chartType="student"}}},[a("span",[t._v("在校学生数")]),t._v(" "),a("p",[t._v(t._s(t.studentCount.toFixed(0).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")))])]),t._v(" "),a("a",{staticClass:"teacherCard",on:{click:function(e){t.showChart=!0,t.chartType="teacher"}}},[a("span",[t._v("职工数")]),t._v(" "),a("p",[t._v(t._s(t.teacherCount.toFixed(0).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")))])]),t._v(" "),a("a",{staticClass:"appCard",on:{click:function(e){t.showChart=!0,t.chartType="app"}}},[a("span",[t._v("应用服务")]),t._v(" "),a("p",[t._v(t._s(t.appCount.toFixed(0).toString().replace(/(\d)(?=(?:\d{3})+$)/g,"$1,")))])])])])]):t._e(),t._v(" "),a("div",{staticClass:"box_wrap bg-white apps"},[t._m(0),t._v(" "),a("div",{staticClass:"box_main box_flex"},[t._l(t.hotAppList,function(e,i){return i<6?a("div",{key:i,staticClass:"box_child box_flex column flex_center",on:{click:function(i){return t._checkDetail(e)}}},[a("div",{staticClass:"icon_wrap box_flex flex_center align_center",style:{background:e.app.background?e.app.background:"#3F87E7"}},["2"!==e.app.imgType?a("i",{staticClass:"maticon",attrs:{title:e.app.imgPath},domProps:{innerHTML:t._s(t.icons(e.app.imgPath))}},[t._v(t._s(e.app.imgPath))]):"2"===e.app.imgType?a("i",{staticClass:"maticon app-icon-style theme-icon-application"},[a("span",{staticClass:"saasicon-36px",class:["saasicon-36px-"+e.app.imgPath]})]):t._e()]),t._v(" "),a("div",{staticClass:"name"},[t._v(t._s(e.app.name))])]):t._e()}),t._v(" "),t.hotAppList.length>4?a("div",{staticClass:"box_child more box_flex column flex_center",on:{click:function(e){return t.toAppList()}}},[a("div",{staticClass:"icon_wrap box_flex flex_center align_center"},[a("img",{staticStyle:{width:"0.8rem",height:"0.8rem"},attrs:{src:i("4dg7"),alt:""}})]),t._v(" "),a("div",{staticClass:"name"},[t._v("更多")])]):t._e()],2)]),t._v(" "),a("div",{staticClass:"box_wrap boxBg"},[t._m(1),t._v(" "),a("div",{staticClass:"gonggao_wrap"},t._l(t.adviceList,function(e,i){return a("div",{key:i,on:{click:function(i){return t.toAdvice(e)}}},[a("div",{staticClass:"title"},[i<3?a("i",[a("em",[t._v("置 顶")])]):t._e(),a("span",[t._v(t._s(e.title))])]),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"data_time grow_1"},[a("div",{staticClass:"left"},[a("i"),t._v(" "),a("span",[t._v(t._s(e.browser))])]),t._v(" "),a("div",{staticClass:"right"},[t._v("\n              "+t._s(e.createTime)+"\n            ")])])])])}),0)]),t._v(" "),t.adviceList.length?a("p",{staticClass:"bottomTip"},[t._v("到底啦")]):t._e()]),t._v(" "),t.showChart&&"student"==t.chartType?a("student-chart",{attrs:{allCount:t.studentCount},on:{backToParent:t.backToParent}}):t._e(),t._v(" "),t.showChart&&"teacher"==t.chartType?a("teacher-chart",{on:{backToParent:t.backToParent}}):t._e(),t._v(" "),t.showChart&&"app"==t.chartType?a("app-chart",{on:{backToParent:t.backToParent}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",[e("i"),e("span",[this._v("推荐应用")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title_box box_flex box_between align_center"},[e("div",{staticClass:"title gonggao"},[e("h1",[e("i"),e("span",[this._v("通知公告")])])])])}]};var b=i("C7Lr")(g,C,!1,function(t){i("FGxn"),i("Esnu")},"data-v-0b76c4d6",null);e.default=b.exports},"t1/T":function(t,e){}});