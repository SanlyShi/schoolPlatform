webpackJsonp([158],{hUpW:function(t,e){},"t+zv":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("kV13");var a=s("C331"),o={data:function(){return{newCanNotBothHaveName:"",newCanNotBothHaveMaxCount:"",newCanNotBothHaveMessage:"",appList:[],businessesList:[],nowNewApp:"",nowNewBusinesses:"",nowNewAppName:"",nowNewBusinessesName:"",showAddAppModal:!1,rows:[],statusList:[{id:0,name:"关闭"},{id:1,name:"开启"}],nowUserStatus:1,nowUserName:"",showAddModal:!1,columns:[],url:"/table-data/cannot/both/page",ts:new Date,lang:"zh-cn",importUsers:!1}},computed:{translate:function(){return Object(a.g)(this.lang).userCertification}},created:function(){var t=this,e=localStorage.getItem("lang");Object(a.g)(e)&&(this.lang=e),this.columnsModel=[{id:"appName",title:"应用名称",className:"text-left",hidden:!1},{id:"businessesName",title:"业务期",className:"text-left",hidden:!1},{id:"opt",className:"text-left",title:"操作",width:120,hidden:!1,formatter:function(){return[{tag:"a",text:"删除",className:"opt-btn",callback:function(e,s){t.rows=t.rows.filter(function(t){return t.appName!=e.appName&&t.businessesName!=e.businessesName})}}]}}],this.columns=[{id:"name",title:"名称",className:"text-left",hidden:!1,search:{type:"input",data:{placeholder:"请输入名称"}}},{id:"appNames",title:"不可兼得应用",className:"text-left",hidden:!1,search:{type:"input",data:{placeholder:"请输入应用名称"}}},{id:"maxCount",title:"可申请应用数量",search:{type:"input",data:{placeholder:"请输入应用数量"}},className:"text-left",hidden:!1},{id:"message",title:"提示语",width:150,className:"text-left",hidden:!1,search:{type:"input",data:{placeholder:"请输入提示语"}}},{id:"opt",className:"text-left",title:"操作",width:120,hidden:!1,formatter:function(){return[{tag:"a",text:"删除",className:"opt-btn",callback:function(e,s){Object(a.d)("/api/cannot/both/"+e.id,{},"post").then(function(e){e.state?(t.$toast("删除成功"),t.url=t.url+"?timeStamp="+(new Date).getTime()):t.$toast(e.message)})}}]}}]},methods:{addNewApp:function(){var t=this;this.showAddAppModal=!0,this.nowNewApp="",this.nowNewAppName="",this.nowNewBusinessesName="",this.nowNewBusinesses="",Object(a.d)("/api/cannot/both/options/app").then(function(e){e.state?t.appList=e.data:that.$toast(e.message)})},addNew:function(){this.showAddModal=!0,this.newCanNotBothHaveName="",this.rows=[],this.newCanNotBothHaveMaxCount="",this.newCanNotBothHaveMessage=""},_afterSelectNowNewApp:function(t){var e=this;this.appList.forEach(function(s){s.appId==t.val&&(e.businessesList=s.businesses)}),this.nowNewAppName=t.target.selected},_afterSelectNowNewBusinesses:function(t){this.nowNewBusinessesName=t.target.selected},submit:function(){var t={};t.appName=this.nowNewAppName,t.businessesName=this.nowNewBusinessesName,t.appId=this.nowNewApp,t.businessId=this.nowNewBusinesses,this.rows.push(t),this.showAddAppModal=!1},submitNew:function(){var t=this,e=[];this.rows.forEach(function(t){var s={};s.appId=t.appId,s.businessId=t.businessId,e.push(s)}),Object(a.d)("/api/cannot/both",{name:this.newCanNotBothHaveName,maxCount:this.newCanNotBothHaveMaxCount,message:this.newCanNotBothHaveMessage,businesses:e},"post").then(function(e){e.state?(t.$toast("新增成功"),t.showAddModal=!1,t.url=t.url+"?timeStamp="+(new Date).getTime()):10001==e.code?t.$toast("填写信息有误 或 有未填项"):t.$toast(e.message)})}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid",attrs:{id:"bothHaveManage-page"}},[s("div",{staticClass:"row text-center"},[s("v-table",{attrs:{title:"不可兼得应用列表",url:t.url,pagesize:"10",idField:"id",columns:t.columns,multiple:!1,order:!0,search:!1}},[s("div",{staticClass:"btn-group pull-right",attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[s("button",{staticClass:"btn add clearBtnBorder",attrs:{type:"button"},on:{click:t.addNew}},[t._v("新增")])])])],1),t._v(" "),s("v-modal",{attrs:{show:t.showAddModal,effect:"fade",width:"700"}},[s("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v("新增")])]),t._v(" "),s("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[s("div",{staticClass:"form-group class-committee-group"},[s("label",{staticClass:"classCommittee-text"},[t._v("请输入名称:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newCanNotBothHaveName,expression:"newCanNotBothHaveName"}],staticClass:"optionInput",attrs:{type:"text"},domProps:{value:t.newCanNotBothHaveName},on:{input:function(e){e.target.composing||(t.newCanNotBothHaveName=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"modal-body-content"},[s("v-table",{staticClass:"modelTable",attrs:{title:"应用范围",paginationShow:!1,rows:t.rows,pagesize:"10",idField:"id",columns:t.columnsModel,multiple:!1,order:!0,search:null}},[s("div",{staticClass:"btn-group pull-right",attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[s("button",{staticClass:"btn add clearBtnBorder",attrs:{type:"button"},on:{click:t.addNewApp}},[t._v("添加应用")])])])],1),t._v(" "),s("div",{staticClass:"form-group class-committee-group",staticStyle:{"margin-top":"15px"}},[s("label",{staticClass:"classCommittee-text"},[t._v("可申请数量:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newCanNotBothHaveMaxCount,expression:"newCanNotBothHaveMaxCount"}],staticClass:"optionInput",attrs:{type:"text"},domProps:{value:t.newCanNotBothHaveMaxCount},on:{input:function(e){e.target.composing||(t.newCanNotBothHaveMaxCount=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group class-committee-group"},[s("label",{staticClass:"classCommittee-text"},[t._v("       提示语:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newCanNotBothHaveMessage,expression:"newCanNotBothHaveMessage"}],staticClass:"optionInput",attrs:{type:"text"},domProps:{value:t.newCanNotBothHaveMessage},on:{input:function(e){e.target.composing||(t.newCanNotBothHaveMessage=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showAddModal=!1}}},[t._v("取消")]),t._v(" "),s("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.submitNew}},[t._v("确定")])])]),t._v(" "),s("v-modal",{attrs:{show:t.showAddAppModal,effect:"fade",width:"520"}},[s("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v("添加应用")])]),t._v(" "),s("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[s("div",{staticClass:"form-group class-committee-group"},[s("label",{staticClass:"classCommittee-text"},[t._v("   应用:")]),t._v(" "),s("v-select",{staticStyle:{width:"360px"},attrs:{options:t.appList,"options-value":"appId","options-label":"appName"},on:{afterSelected:t._afterSelectNowNewApp},model:{value:t.nowNewApp,callback:function(e){t.nowNewApp=e},expression:"nowNewApp"}})],1),t._v(" "),t.nowNewApp?s("div",{staticClass:"form-group class-committee-group",staticStyle:{"margin-top":"15px"}},[s("label",{staticClass:"classCommittee-text"},[t._v("业务期:")]),t._v(" "),s("v-select",{staticStyle:{width:"360px"},attrs:{options:t.businessesList,"options-value":"businessId","options-label":"businessName"},on:{afterSelected:t._afterSelectNowNewBusinesses},model:{value:t.nowNewBusinesses,callback:function(e){t.nowNewBusinesses=e},expression:"nowNewBusinesses"}})],1):t._e()]),t._v(" "),s("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showAddAppModal=!1}}},[t._v("取消")]),t._v(" "),s("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.submit}},[t._v("确定")])])])],1)},staticRenderFns:[]};var i=s("C7Lr")(o,n,!1,function(t){s("hUpW")},null,null);e.default=i.exports}});