webpackJsonp([266],{e3KV:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("kV13"),s=e("C331"),i={props:{account:{userId:"",userName:"",type:""}},created:function(){var t=this,a=localStorage.getItem("lang"),e=this;Object(s.g)(a)&&(this.lang=a),this._initAnnounceList(this.announceIndex,this.pageIndex.all++);Object(s.d)("/api/freshman?pageIndex=0&pageSize=100000").then(function(a){t.thingsList=a.data.content}),Object(s.e)({url:"/api/app/type",type:"get",data:{userType:3},success:function(t){t.state?(t.data.forEach(function(t,a){var s={};for(var i in t)n.default.set(s,i,t[i]);n.default.set(s,"appList",[]),e.appList.push(s)}),e.initAppList()):e.$toast(t.message)}}),Object(s.e)({url:"/api/payment/userallproject",type:"get",data:{page:0,size:9999},success:function(a){a.state?(t.paymentAppList=a.data.content,t.paymentAppList.forEach(function(a){t.$set(a,"imgPath","tuition"),t.$set(a,"imgType","2")})):t.$toast(a.message)}})},data:function(){return{columns:[],paymentAppList:[],url:"/table-data/department",guide:"",appList:[],appDetailPage:!1,appDetailPageForm:!1,curApp:null,mainPage:!0,statusJson:{tuitionFeeInfoStatus:"未完成",accommodationPaymentInfoStatus:"未完成",studentAppearanceConsistency:"未完成",admissionsInformationConsistency:"未完成",baseInformationConsistency:"未完成",studentsArrivingAtSchool:"未完成",greenChannelApplicationStatus:null,reservationsOnTheStatusOfApplicationForAdmissionStatus:null},thingsList:[],announces:{all:[],school:[],college:[],instructor:[]},announceIndex:"all",pageSize:20,pageIndex:{all:0,school:0,college:0,instructor:0},searchName:"",passArray:["已完成","完成","已通过","通过","通过复查","已缴费","已到校"],noNeedDataArray:["greenChannelApplicationStatus","reservationsOnTheStatusOfApplicationForAdmissionStatus"],lang:"zh-cn"}},computed:{translate:function(){return Object(s.g)(this.lang).freshmanMainPage}},methods:{getAppDetail:function(t){var a=this,e="api/app/"+t;Object(s.d)(e).then(function(t){a._checkDetail(t.data)})},_paymentCheck:function(t){var a=this;t?(this.$waiting.show(),Object(s.e)({url:"/api/payment/getInProject",type:"get",data:{id:t.id},success:function(t){t.state?t.data&&t.data.status?"NOT_PAID"===t.data.status?a.$emit("addBread",{route:"/payHall/payHallApplication",title:t.data.name,data:t.data}):a.$toast("您已缴费，无需缴费！"):a.$toast("该应用无需缴费！"):a.$toast(t.message)}}).always(function(){a.$waiting.close()})):this.$emit("addBread",{route:"/payHall/payHallRecords",title:"缴费记录"})},_viewAnnounce:function(t){this.$emit("addBread",{route:"/announce/detail?id="+t.announcementId,title:t.title})},_initAnnounceList:function(t,a){var e=this;Object(s.e)({url:"/table-data/announcement/list/20",type:"get",data:{pageSize:this.pageSize,pageIndex:a,pageParams:{type:t}},success:function(a){a.state&&(a.data.forEach(function(a){e.announces[t].push(a)}),a.data.length<e.pageSize&&(e.pageIndex[e.announceIndex]=-1))}})},_changeList:function(t){this.announceIndex=t,0===this.announces[this.announceIndex].length&&this._initAnnounceList(this.announceIndex,0)},_containsSearchName:function(t){var a=this,e=!1;return t.forEach(function(t){(t.name&&t.name.indexOf(a.searchName)>=0||t.app&&t.app.name.indexOf(a.searchName)>=0)&&(e=!0)}),e},initAppList:function(){var t=this;Object(s.e)({url:"/api/app?userType=3&isPublished=true",type:"get",success:function(a){a.state?(a.data.forEach(function(a,e){t.appList.forEach(function(t,e){t.id===a.appType.id&&t.appList.push(a)})}),t.appList.forEach(function(t,a){0===t.appList.length?n.default.set(t,"isShow",!1):n.default.set(t,"isShow",!0)})):t.$toast(a.message)}})},_checkDetail:function(t){var a=this;this.$waiting.show(),this.curApp=t;var e=t.app?t.app.setting.type:t.setting.type,n="";if("FORM"===e)n="/app/form?id="+this.curApp.id;else if("WORKFLOW"===e)n="/app/flow?id="+this.curApp.id;else{if(!t.setting.useBusiness)return window.open(t.setting.linkUrl),this.$waiting.close(),!1;n="/app/link?id="+this.curApp.id}setTimeout(function(){a.$emit("addBread",{route:n,title:t.name||t.app.name,appData:t}),a.$waiting.close()},310)},_appDetailBack:function(){this.curApp=null,this.mainPage=!0,this.appDetailPage=!1,this.appDetailPageForm=!1}}},c={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"freshman-page"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.mainPage,expression:"mainPage"}],staticClass:"main-p"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"page-top-half row"},[e("div",{staticClass:"announce-container col-md-9"},[e("div",{staticClass:"announce-part"},[e("div",{staticClass:"announce-header"},[e("div",{staticClass:"announce-title "},[t._v("\n                "+t._s(t.translate.announce)+"\n              ")]),t._v(" "),e("div",{staticClass:"pull-right"},t._l(t.announces,function(a,n){return e("a",{key:n,staticClass:"examineAllBtn",class:n===t.announceIndex?"active":"",on:{click:function(a){return t._changeList(n)}}},[t._v("\n                  "+t._s(t.translate[n])+"\n                ")])}),0)]),t._v(" "),t.announces[t.announceIndex].length>0?e("div",{staticClass:"announce-body list-group"},[t._l(t.announces[t.announceIndex],function(a,n){return e("div",{key:n,staticClass:"list-group-item",on:{click:function(e){return t._viewAnnounce(a)}}},[e("span",{staticClass:"announce-date"},[t._v(t._s(a.createTime))]),t._v(" "),e("span",{staticClass:"announce-type"},[t._v(t._s(t.translate[a.type]))]),t._v(" "),e("span",{staticClass:"announce-name"},[t._v(t._s(a.title))])])}),t._v(" "),e("div",{staticClass:"list-group-item text-center",class:t.pageIndex[t.announceIndex]<0?"no-more":"more"},[t.pageIndex[t.announceIndex]<0?e("span",[t._v(t._s(t.translate.noMore))]):e("span",{on:{click:function(a){return t._initAnnounceList(t.announceIndex,t.pageIndex[t.announceIndex]++)}}},[t._v(t._s(t.translate.more))])])],2):e("div",{staticClass:"announce-body list-group"},[e("div",{staticClass:"text-center empty-data"},[e("span",[t._v(t._s(t.translate.empty))])])])])]),t._v(" "),e("div",{staticClass:"status-container col-md-3"},[e("div",{staticClass:"status-title"},[t._v("\n            "+t._s(t.translate.status)+"\n          ")]),t._v(" "),e("div",{staticClass:"status-body"},t._l(t.thingsList,function(a,n){return e("div",{key:n},[e("div",{staticClass:"affair-item",class:"1"===a.isRight?"active":"",on:{click:function(e){return t.getAppDetail(a.linkAppId)}}},[e("i",{staticClass:"maticon pull-left",domProps:{innerHTML:t._s(t.icons("more_horiz"))}}),t._v("\n                "+t._s(a.affairName)+"\n              ")])])}),0)])]),t._v(" "),e("div",{staticClass:"freshman-content row"},[e("div",{staticClass:"freshman-info"},[e("h3",[t._v(t._s(t.translate.apply))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchName,expression:"searchName"}],staticClass:"form-control",attrs:{type:"text",placeholder:t.translate.searchPlaceholder},domProps:{value:t.searchName},on:{input:function(a){a.target.composing||(t.searchName=a.target.value)}}})]),t._v(" "),t._l(t.appList,function(a,n){return t._containsSearchName(a.appList)?e("div",{directives:[{name:"show",rawName:"v-show",value:a.isShow,expression:"appType.isShow"}],key:n,staticClass:"container-fluid freshman-apply"},[e("div",{staticClass:"apply-type-list"},[e("label",{staticClass:"pull-left type-head"},[t._v(t._s(a.name))]),t._v(" "),e("div",{staticClass:"apply-list"},t._l(a.appList,function(a,n){return a.name.indexOf(t.searchName)>=0?e("div",{key:n,staticClass:"apply",on:{click:function(e){return t._checkDetail(a)}}},[e("div",{staticClass:"app-icon-div",style:{"background-image":a.background}},[a.imgType&&"1"!==a.imgType?"2"===a.imgType?e("i",{staticClass:"maticon apply-icon theme-icon-application"},[e("span",{staticClass:"saasicon-44px",class:["saasicon-44px-"+a.imgPath]})]):t._e():e("i",{staticClass:"maticon apply-icon theme-icon-application",domProps:{innerHTML:t._s(t.icons(a.imgPath))}},[t._v(t._s(a.imgPath))])]),t._v(" "),e("p",{staticClass:"text-center apply-title",attrs:{title:a.name}},[t._v(t._s(a.name))])]):t._e()}),0)])]):t._e()}),t._v(" "),t.paymentAppList!=[]?e("div",{staticClass:"container-fluid freshman-apply"},[e("div",{staticClass:"apply-type-list"},[e("label",{staticClass:"pull-left type-head"},[t._v("缴费应用")]),t._v(" "),e("div",{staticClass:"apply-list"},t._l(t.paymentAppList,function(a,n){return a.name.indexOf(t.searchName)>=0?e("div",{key:n,staticClass:"apply",on:{click:function(e){return t._paymentCheck(a)}}},[e("div",{staticClass:"app-icon-div",style:{"background-image":a.background}},[a.imgType&&"1"!==a.imgType?"2"===a.imgType?e("i",{staticClass:"maticon apply-icon theme-icon-application"},[e("span",{staticClass:"saasicon-44px",class:["saasicon-44px-"+a.imgPath]})]):t._e():e("i",{staticClass:"maticon apply-icon theme-icon-application",domProps:{innerHTML:t._s(t.icons(a.imgPath))}},[t._v(t._s(a.imgPath))])]),t._v(" "),e("p",{staticClass:"text-center apply-title",attrs:{title:a.name}},[t._v(t._s(a.name))])]):t._e()}),0)])]):t._e()],2)])])])},staticRenderFns:[]};var o=e("C7Lr")(i,c,!1,function(t){e("t08j")},null,null);a.default=o.exports},t08j:function(t,a){}});