webpackJsonp([205],{"Gu/F":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("a3Yh"),i=a.n(s),n=(a("kV13"),a("C331")),l={created:function(){var t=this;this.table.columns=[{id:"userNo",title:this.translate.studentId,className:"text-left",hidden:!1,width:130,search:{type:"input",data:{autoFocus:!0}}},i()({id:"account",title:"新生账号",className:"text-left",hidden:!1,width:130,search:{type:"input",data:{autoFocus:!0}}},"hidden",!0),{id:"name",title:this.translate.name,className:"text-left",hidden:!1,width:130,search:{type:"input"},formatter:function(t,e){return t.name}},{id:"college",title:this.translate.college,className:"text-left",hidden:!1,width:120,search:{type:"select",data:{url:"/api/colleges",optionsLabel:"name",optionsValue:"code"}}},{id:"grade",title:"年级",className:"text-left",hidden:!0,width:120,search:{type:"select",data:{options:this.grade,optionsLabel:"name",optionsValue:"id"}}},{id:"projectId",title:"缴费项目名称",className:"text-left",hidden:!1,width:130,search:{type:"select",data:{url:"/api/payment/projects/published",optionsLabel:"name",optionsValue:"id"}},formatter:function(t){return t.projectName}},{id:"status",title:"缴费状态",className:"text-left",width:100,search:{type:"select",data:{options:this.PayStateOptions1,optionsLabel:"name",optionsValue:"id"}},hidden:!1,formatter:function(t,e){return"NOT_PAID"==t.status?"未缴费":"PAID_ONLINE"==t.status?"已缴费":"PAID_OFFLINE"==t.status?"线下缴费":void 0}},{id:"major",title:"专业",className:"text-left",hidden:!0,width:120,search:{type:"select",data:{url:"/api/system/dicts?dictType=专业",optionsLabel:"label",optionsValue:"value"}}},{id:"educationLevel",title:"培养层次",className:"text-left",hidden:!0,width:80,search:{type:"select",data:{url:"/api/system/dicts?dictType=培养层次",optionsLabel:"label",optionsValue:"value"}}},{id:"amount",title:"应缴金额",className:"text-right",hidden:!0,width:100,formatter:function(t,e){return null==t.amount?"":t.amount}},{id:"amountPaid",title:"实缴金额",width:100,className:"text-right",hidden:!0,formatter:function(t,e){return null==t.amountPaid?"0":t.amountPaid}},{id:"orderDetails",title:"缴费详细",className:"text-left",hidden:!0,width:120,search:{type:"input",data:{autoFocus:!0}}},{id:"payTime",title:"缴费时间",className:"text-left",hidden:!0,width:150,search:{type:"datetime",data:{dateFormat:"yyyy-MM-dd hh:ii:ss"}}},{id:"opt",title:this.translate.opt,className:"text-right",width:100,hidden:!1,formatter:function(e,a){var s={tag:"a",text:"催缴",className:"opt-btn",callback:function(e,a){var s=[];s.push(e.userId),Object(n.e)({url:"/api/payment/remind",dataType:"json",type:"post",data:{userId:s,projectId:e.projectId},success:function(e){e.state?t.toast("催缴成功"):t.toast("催缴失败")}})}};return"NOT_PAID"===e.status?[s]:[]}}]},data:function(){return{fieldsToExport:[],educationLevels:[],collegeOptionss:[],PayStateOptions:[{id:"PAID_OFFLINE",name:"线下缴费"}],PayStateOptions1:[{id:"PAID_ONLINE",name:"已缴费"},{id:"NOT_PAID",name:"未缴费"},{id:"PAID_OFFLINE",name:"线下缴费"}],PayStateEdit:"",ImportCondition:{educationLevel:"",grade:"",schoolStatus:""},shouldPayNum:"",tableCheckedList:[],paySituation:["已缴费","未缴费"],showEditClassModal:!1,showExport:!1,table:{url:"/table-data/payment/getinformation",columns:[]},payEditUserId:0,somethingIn:!1,department:{},classMembers:{},definedSearch:{},studentId:"",studentUserId:"",singleAddText:"",isDisabled:!0,isSingleDisabled:!0,isCheckResult:!1,checkResult:"",fileName:"",paydetail:"",payDetailEdit:"",isParentPage:!0,lang:"zh-cn",grade:[{id:2015,name:"2015级"},{id:2016,name:"2016级"},{id:2017,name:"2017级"},{id:2018,name:"2018级"},{id:2019,name:"2019级"},{id:2020,name:"2020级"}],schoolStatus:[]}},computed:{translate:function(){return Object(n.g)(this.lang).classMembers}},methods:{callPay:function(){var t=this,e=this.tableCheckedList.filter(function(t){return"NOT_PAID"===t.status});Object(n.e)({url:"/api/payment/remind/multi",dataType:"json",type:"post",data:e.map(function(t){return{userId:t.userId,projectId:t.projectId}}),success:function(e){e.state?(t.tableCheckedList=[],t.toast("催缴成功")):t.toast("催缴失败")}})},exportTable:function(){var t=this.$refs.peopleTable.tableSearchFields,e="";for(var a in t)t[a]?e+="&"+a+"="+t[a]:e+="&"+a+"=";window.location.href="/downloads/payment/peoplemanage/excel?fileName=缴费人员"+ +new Date+".xlsx"+e},_afterChecked:function(t){this.tableCheckedList=t}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center"},[a("v-table",{ref:"peopleTable",attrs:{url:t.table.url,pagesize:"10",idField:"id",columns:t.table.columns,order:!0,search:!0,multiple:!0,columnsControl:!0},on:{afterChecked:t._afterChecked}},[a("div",{attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[t.tableCheckedList.length>0?a("div",{staticClass:"btn-group pull-left"},[a("div",{staticClass:"batch-options"},[a("span",{staticClass:"pull-left"},[t._v("已选择"+t._s(t.tableCheckedList.length)+"项，其中可催缴的有"+t._s(t.tableCheckedList.filter(function(t){return"NOT_PAID"===t.status}).length)+"项")]),t._v(" "),a("div",{staticClass:"pull-left"},[t.tableCheckedList.filter(function(t){return"NOT_PAID"===t.status}).length>0?a("button",{staticClass:"btn table-btn clearBtnBorder",staticStyle:{transform:"translateY(-7px)"},attrs:{type:"button"},on:{click:function(e){return t.callPay()}}},[t._v("催缴")]):t._e()])])]):t._e(),t._v(" "),a("div",{staticClass:"btn-group pull-right",attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[a("button",{staticClass:"btn btn-bgColor-style clearBtnBorder",on:{click:t.exportTable}},[t._v("导出")])])])])],1)},staticRenderFns:[]};var o=a("C7Lr")(l,d,!1,function(t){a("f75J")},null,null);e.default=o.exports},f75J:function(t,e){}});