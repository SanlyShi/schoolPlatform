webpackJsonp([4],{"0CKz":function(e,t){},"4c/d":function(e,t){},"6TYE":function(e,t){},"75+J":function(e,t){},WCwO:function(e,t){},bWsg:function(e,t){},jixA:function(e,t){},kcYQ:function(e,t){},nSsd:function(e,t){},sh8d:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("xwF1"),i=a("aA9S"),n=a.n(i),l=a("HzJ8"),o=a.n(l),r=a("zY0d"),c=a("jCtM"),u=a("C331"),m=a("p+qa"),p={props:["placeRule","defaultInfo"],data:function(){var e=this,t=function(e,t,a){if(!t)return a(new Error("手机号不能为空"));if(!/^1[3|4|5|7|8][0-9]\d{8}$/.test(t))return a(new Error("请输入正确的手机号"));a()};return{usablePlace:[],curUsablePlaceInfo:{},firstState:!0,usableDate:[],areaTypeList:[],pickerOptions:{disabledDate:function(t){return e.usableDate.indexOf(Object(m.d)(t))<0}},baseInfo:{examinationName:"",type:"",areaType:"",startTime:"",endTime:"",startDate:"",place:"",areaRequirement:"",areaDetail:"",year:"",timeRange:"",timeOptions:[],contactPeople:"",contactPhone:"",email:"",areaCategory:""},unitForm:{contactPeople:"",contactPhone:"",email:""},unitFormRules:{contactPeople:[{required:!0,message:"请输入联系人",trigger:"blur"}],contactPhone:[{required:!0,validator:t,message:"请输入正确格式的联系人电话",trigger:"blur"}],email:[{required:!0,type:"email",message:"请输入正确格式的邮箱地址",trigger:"blur"}]},placeForm:{place:""},baseInfoRules:{examinationName:[{required:!0,message:"请填写笔/面试标题",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}],areaType:[{required:!0,message:"请选择场地类型",trigger:"change"}],areaDetail:[{required:!0,message:"请填写自行联系的场地名称",trigger:"blur"}],contactPeople:[{required:!0,message:"请输入联系人",trigger:"blur"}],contactPhone:[{required:!0,validator:t,message:"请输入正确格式的联系人电话",trigger:"blur"}],email:[{required:!0,type:"email",message:"请输入正确格式的邮箱地址",trigger:"blur"}],areaCategory:[{required:!0,message:"请选择场地类别",trigger:"change"}]},placeFormRule:{place:[{required:!0,message:"请选择可用场地",trigger:"change"}]}}},methods:{areaTypeChange:function(){this.$refs.baseInfoForm.clearValidate()},getUsableDate:function(){var e=this;Object(m.h)().then(function(t){t.state&&(t.data.length?e.usableDate=t.data:e.usableDate=[])})},catchAreaTypeList:function(){var e=this;Object(m.f)().then(function(t){t.state&&(e.areaTypeList=t.data)})},catchUnitInfo:function(){var e=this;Object(c.e)().then(function(t){t&&(e.baseInfo.contactPeople=t.contactPeople,e.baseInfo.contactPhone=t.contactPhone,e.baseInfo.email=t.mailAddress)})},dateChange:function(e){var t=this;Object(r.c)(e).then(function(e){if(t.baseInfo.timeRange="",t.firstState||(t.placeForm.place=""),e.length?t.baseInfo.timeOptions=e:t.baseInfo.timeOptions=[],t.defaultInfo){var a=t.defaultInfo.beginTime.split(" ")[0];if(t.defaultInfo.areaUseId&&t.baseInfo.year==a){var s=t.defaultInfo.beginTime.split(" ")[1],i=t.defaultInfo.endTime.split(" ")[1],n=s.substring(0,s.length-3)+"~"+i.substring(0,i.length-3);t.firstState?t.baseInfo.timeRange=n:t.baseInfo.timeRange="",t.baseInfo.timeOptions.indexOf(n)<0&&t.baseInfo.timeOptions.push(n)}else t.baseInfo.timeRange="";t.firstState=!1}})},placeRadioChange:function(e){var t=!0,a=!1,s=void 0;try{for(var i,n=o()(this.usablePlace);!(t=(i=n.next()).done);t=!0){var l=i.value;e==l.id&&(this.curUsablePlaceInfo=l)}}catch(e){a=!0,s=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw s}}},usableTimesChange:function(e){var t=this,a=e.split("~");this.usablePlace=[],this.curUsablePlaceInfo={},this.placeForm.place="";var s=this.baseInfo.year+" "+a[0]+":00",i=this.baseInfo.year+" "+a[1]+":00";Object(r.b)(s,i).then(function(e){if(e.length?t.usablePlace=e:t.usablePlace=[],t.defaultInfo&&t.defaultInfo.areaUseId){var a=t.defaultInfo.beginTime.split(" ")[1],s=t.defaultInfo.endTime.split(" ")[1];a.substring(0,a.length-3),s.substring(0,s.length-3);t.baseInfo.timeRange}})},vali:function(){var e=this,t=!1;return this.$refs.baseInfoForm.validate(function(a){if(a){if(!e.placeRule)return e.$message.error("请先设置场地规则");var s=e.baseInfo;if("COMPANY_CHOOSE"!=e.baseInfo.areaType){if(!s.startTime||!s.startDate)return e.$message.error("请选择笔面试时间")}else{if(!s.year||!s.timeRange)return e.$message.error("请选择笔面试时间");if(!e.placeForm.place)return e.$message.error("请选择场地")}t=a}}),t},toSubmit:function(){var e=this;if(this.vali()){var t=this.baseInfo;if(t.areaUseId=this.placeForm.place,"COMPANY_CHOOSE"!=t.areaType){var a=t.startTime;t.beginTime=t.startDate+" "+a[0]+":00",t.endTime=t.startDate+" "+a[1]+":00","ADMIN_ASSIGNMENT"==t.areaType&&(t.areaExplain=this.placeRule.areaExplain)}if("COMPANY_CHOOSE"==t.areaType){var s=this.baseInfo.timeRange.split("~");t.beginTime=t.year+" "+s[0]+":00",t.endTime=t.year+" "+s[1]+":00"}var i=n()({},t);i.isContact="isContact"==t.areaType?1:0;var l=void 0;l=this.defaultInfo?"/api/employment/examination/resubmit":"/api/employment/examination/addExamination",Object(u.e)({url:l,type:"post",data:i,success:function(t){t.state?(e.$message.success("提交成功"),e.$emit("backToParent")):e.$message.error(t.message)}})}},setDefaultInfo:function(){var e=this;if(this.defaultInfo){var t=this.defaultInfo;if(this.baseInfo={id:t.id,examinationName:t.title,type:t.type,areaType:t.areaType?t.areaType:"isContact",timeRange:"",timeOptions:[],areaDetail:t.areaDetail,contactPeople:t.contactPeople,contactPhone:t.contactPhone,email:t.email},"COMPANY_CHOOSE"==t.areaType){var a=t.beginTime.split(" ")[1],s=t.endTime.split(" ")[1];this.firstState=!0,this.$set(this.baseInfo,"year",t.beginTime.split(" ")[0]),this.dateChange(t.beginTime.split(" ")[0]),this.usableTimesChange(a.substring(0,a.length-3)+"~"+s.substring(0,s.length-3)),this.$set(this.baseInfo,"timeRange",a.substring(0,a.length-3)+"~"+s.substring(0,s.length-3)),this.baseInfo.timeOptions.push(this.baseInfo.timeRange),this.$set(this.placeForm,"place",t.areaUseId),setTimeout(function(){e.placeRadioChange(t.areaUseId)},500),this.firstState=!0}else{var i=t.beginTime.split(" ")[1],n=t.endTime.split(" ")[1];this.$set(this.baseInfo,"startDate",t.beginTime.split(" ")[0]),this.$set(this.baseInfo,"startDate",t.beginTime.split(" ")[0]),this.$set(this.baseInfo,"startTime",[i.substring(0,i.length-3),n.substring(0,n.length-3)]),"ADMIN_ASSIGNMENT"==t.areaType&&this.$set(this.baseInfo,"areaCategory",t.areaCategory+"")}1==t.isContact&&this.$set(this.baseInfo,"areaType","isContact")}}},created:function(){this.catchUnitInfo(),this.setDefaultInfo(),this.getUsableDate(),this.catchAreaTypeList()}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"addInterview"}},[a("div",{staticClass:"baseInfo"},[e._m(0),e._v(" "),a("div",{staticClass:"baseForm"},[a("el-form",{ref:"baseInfoForm",attrs:{model:e.baseInfo,rules:e.baseInfoRules,"label-width":"150px"}},[a("el-form-item",{attrs:{prop:"examinationName",label:"笔/面试标题："}},[a("el-input",{model:{value:e.baseInfo.examinationName,callback:function(t){e.$set(e.baseInfo,"examinationName",t)},expression:"baseInfo.examinationName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型：",prop:"type"}},[a("el-radio-group",{model:{value:e.baseInfo.type,callback:function(t){e.$set(e.baseInfo,"type",t)},expression:"baseInfo.type"}},[a("el-radio",{attrs:{label:"INTERVIEW"}},[e._v("面试")]),e._v(" "),a("el-radio",{attrs:{label:"WRITTEN"}},[e._v("笔试")])],1)],1),e._v(" "),e.placeRule?a("el-form-item",{staticClass:"w100",attrs:{label:"场地类型：",prop:"areaType"}},[a("el-radio-group",{on:{change:e.areaTypeChange},model:{value:e.baseInfo.areaType,callback:function(t){e.$set(e.baseInfo,"areaType",t)},expression:"baseInfo.areaType"}},["ADMIN_ASSIGNMENT"==e.placeRule.allocationScheme||e.defaultInfo&&"ADMIN_ASSIGNMENT"==e.defaultInfo.areaType?a("el-radio",{attrs:{label:"ADMIN_ASSIGNMENT"}},[e._v("管理员分配")]):e._e(),e._v(" "),"COMPANY_CHOOSE"==e.placeRule.allocationScheme||e.defaultInfo&&"COMPANY_CHOOSE"==e.defaultInfo.areaType?a("el-radio",{attrs:{label:"COMPANY_CHOOSE"}},[e._v("选择可用场地")]):e._e(),e._v(" "),1==e.placeRule.isAllow||e.defaultInfo&&1==e.defaultInfo.isContact?a("el-radio",{attrs:{label:"isContact"}},[e._v("自行联系")]):e._e()],1)],1):e._e(),e._v(" "),"ADMIN_ASSIGNMENT"==e.baseInfo.areaType&&e.placeRule.areaExplain?a("div",{staticClass:"areaExplain"},[a("el-collapse",{attrs:{accordion:""}},[a("el-collapse-item",[a("template",{slot:"title"},[a("span",{staticClass:"title"},[a("i",{staticClass:"header-icon el-icon-info"}),a("em",[e._v("笔面试场地说明：")])])]),e._v(" "),a("div",{staticClass:"content",domProps:{innerHTML:e._s(e.placeRule.areaExplain)}})],2)],1)],1):e._e(),e._v(" "),"isContact"==e.baseInfo.areaType?a("el-form-item",{attrs:{label:"场地：",prop:"areaDetail"}},[a("el-input",{model:{value:e.baseInfo.areaDetail,callback:function(t){e.$set(e.baseInfo,"areaDetail",t)},expression:"baseInfo.areaDetail"}})],1):e._e(),e._v(" "),"ADMIN_ASSIGNMENT"==e.baseInfo.areaType?a("el-form-item",{staticClass:"w100",attrs:{label:"场地要求："}},[a("el-input",{attrs:{placeholder:"请填入场地、时间要求等",type:"textarea",rows:"4",resize:"none"},model:{value:e.baseInfo.areaRequirement,callback:function(t){e.$set(e.baseInfo,"areaRequirement",t)},expression:"baseInfo.areaRequirement"}})],1):e._e(),e._v(" "),"ADMIN_ASSIGNMENT"==e.baseInfo.areaType?a("el-form-item",{attrs:{label:"场地类别",prop:"areaCategory"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择场地类别"},model:{value:e.baseInfo.areaCategory,callback:function(t){e.$set(e.baseInfo,"areaCategory",t)},expression:"baseInfo.areaCategory "}},e._l(e.areaTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),e._v(" "),"isContact"==e.baseInfo.areaType||"ADMIN_ASSIGNMENT"==e.baseInfo.areaType?a("el-form-item",{staticClass:"w100",attrs:{prop:"date"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("em",{staticStyle:{color:"#d25050"}},[e._v("*")]),e._v("笔/面试时间：\n          ")]),e._v(" "),a("el-date-picker",{attrs:{format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.baseInfo.startDate,callback:function(t){e.$set(e.baseInfo,"startDate",t)},expression:"baseInfo.startDate"}}),e._v(" "),a("el-time-picker",{attrs:{"is-range":"","value-format":"HH:mm",format:"HH:mm","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:e.baseInfo.startTime,callback:function(t){e.$set(e.baseInfo,"startTime",t)},expression:"baseInfo.startTime"}})],1):e._e(),e._v(" "),"COMPANY_CHOOSE"==e.baseInfo.areaType?a("el-form-item",{staticClass:"w100"},[a("span",{attrs:{slot:"label"},slot:"label"},[a("em",{staticStyle:{color:"#d25050"}},[e._v("*")]),e._v("笔/面试时间：\n          ")]),e._v(" "),a("div",{staticClass:"dateBox"},[a("el-date-picker",{key:"rangeDate",attrs:{format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期","picker-options":e.pickerOptions},on:{change:e.dateChange},model:{value:e.baseInfo.year,callback:function(t){e.$set(e.baseInfo,"year",t)},expression:"baseInfo.year"}}),e._v(" "),a("el-select",{attrs:{disabled:!e.baseInfo.timeOptions.length,placeholder:"请选择时间段"},on:{change:e.usableTimesChange},model:{value:e.baseInfo.timeRange,callback:function(t){e.$set(e.baseInfo,"timeRange",t)},expression:"baseInfo.timeRange"}},e._l(e.baseInfo.timeOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1)]):e._e(),e._v(" "),a("el-form-item",{attrs:{prop:"contactPeople",label:"单位联系人："}},[a("el-input",{model:{value:e.baseInfo.contactPeople,callback:function(t){e.$set(e.baseInfo,"contactPeople",t)},expression:"baseInfo.contactPeople"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"contactPhone",label:"联系人电话："}},[a("el-input",{model:{value:e.baseInfo.contactPhone,callback:function(t){e.$set(e.baseInfo,"contactPhone",t)},expression:"baseInfo.contactPhone"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"email",label:"邮箱："}},[a("el-input",{model:{value:e.baseInfo.email,callback:function(t){e.$set(e.baseInfo,"email",t)},expression:"baseInfo.email"}})],1)],1)],1)]),e._v(" "),"COMPANY_CHOOSE"==e.baseInfo.areaType&&e.usablePlace.length?a("div",{staticClass:"placeinfo"},[a("div",{staticClass:"placeInfoForm"},[e._m(1),e._v(" "),a("div",{staticClass:"placeInfoForm"},[a("el-form",{attrs:{model:e.placeForm,rules:e.placeFormRule,"label-width":"170px"}},[e.baseInfo.timeRange?a("el-form-item",{staticClass:"w100",attrs:{prop:"place",label:"场地："}},[a("el-radio-group",{model:{value:e.placeForm.place,callback:function(t){e.$set(e.placeForm,"place",t)},expression:"placeForm.place"}},e._l(e.usablePlace,function(t,s){return a("el-radio",{key:s,attrs:{label:t.id},on:{change:e.placeRadioChange}},[e._v(e._s(t.name))])}),1),e._v(" "),e.placeForm.place?a("div",{staticClass:"usablePlace"},[a("em"),e._v(" "),a("h2",[e._v("可容纳人数："+e._s(e.curUsablePlaceInfo.peopleNum))]),e._v(" "),a("h2",{attrs:{title:e.curUsablePlaceInfo.description},domProps:{innerHTML:e._s("场地说明："+e.curUsablePlaceInfo.description)}})]):e._e()],1):e._e()],1)],1)])]):e._e(),e._v(" "),a("div",{staticClass:"formBtn"},[e.defaultInfo?e._e():a("a",{staticClass:"publish",on:{click:e.toSubmit}},[e._v("提交审核")]),e._v(" "),e.defaultInfo?a("div",[5==e.defaultInfo.status||3==e.defaultInfo.status?a("a",{staticClass:"publish",on:{click:e.toSubmit}},[e._v("重新提交")]):e._e(),e._v(" "),1==e.defaultInfo.status?a("a",{staticClass:"publish",on:{click:e.toSubmit}},[e._v("修改")]):e._e()]):e._e()])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{staticClass:"clearfix title"},[t("span",[t("em"),t("i",[this._v("基本信息")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title clearfix"},[t("h1",[t("span",[t("em"),this._v(" "),t("i",[this._v("场地信息")])])])])}]};var f=a("C7Lr")(p,d,!1,function(e){a("jixA"),a("WCwO")},"data-v-2970673a",null).exports,b=a("a3Yh"),h=a.n(b),v={props:["defaultInfo","placeRule"],data:function(){var e,t=this,a=function(e,t,a){if(!t)return a(new Error("手机号不能为空"));if(!/^1[3|4|5|7|8][0-9]\d{8}$/.test(t))return a(new Error("请输入正确的手机号"));a()};return{reasonVisible:!1,reason:"",curReasonType:"",unitInfo:{},unitList:[],areaTypeList:[],usablePlace:[],usableDate:[],pickerOptions:{disabledDate:function(e){return t.usableDate.indexOf(Object(m.d)(e))<0}},curUsablePlaceInfo:{},firstState:!0,baseInfo:(e={examinationName:"",type:"",areaDetail:"",areaRequirement:"",areaDescription:"",startDate:"",startTime:"",contactPhone:"",contactPeople:"",email:"",areaType:"",year:"",timeRange:"",timeOptions:[]},h()(e,"email",""),h()(e,"contactPeople",""),h()(e,"contactPhone",""),h()(e,"areaCategory",""),e),placeForm:{place:""},placeFormRule:{place:[{required:!0,trigger:"blur"}]},baseInfoRules:{examinationName:[{required:!0,message:"请填写笔/面试标题",trigger:"blur"}],type:[{required:!0,message:"请选择笔面试类型",trigger:"change"}],startDate:[{type:"date",required:!0,message:"请选择笔面试时间",trigger:"change"}],areaDetail:[{required:!0,message:"请填写场地名称",trigger:"blur"}],contactPeople:[{required:!0,message:"请输入联系人",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系人电话",trigger:"blur"},{validator:a,message:"请输入正确格式的手机号码",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确格式的邮箱",trigger:"blur"}],areaType:[{required:!0,message:"请选择场地类型",trigger:"change"}],areaCategory:[{required:!0,message:"请选择场地类别",trigger:"change"}]},unitForm:{companyName:"",companyContactPeople:"",companyContactPhone:"",companyEmail:""},unitInfoRules:{companyName:[{required:!0,message:"请选择单位",trigger:"change"}],companyEmail:[{required:!0,message:"请输入单位邮箱",trigger:"blur"},{type:"email",message:"请输入正确格式的邮箱",trigger:"blur"}],companyContactPhone:[{required:!0,message:"请输入单位联系人电话",trigger:"blur"},{validator:a,message:"请输入正确格式的手机号码",trigger:"blur"}],companyContactPeople:[{required:!0,message:"请输入单位联系人",trigger:"blur"}],summary:[{required:!0,message:"请输入单位简介",trigger:"blur"}]}}},methods:{areaTypeChange:function(){this.$refs.baseInfoForm.clearValidate()},getUsableDate:function(){var e=this;Object(m.h)().then(function(t){if(t.state)if(t.data.length){if(e.usableDate=t.data,e.defaultInfo&&"COMPANY_CHOOSE"==e.defaultInfo.areaType){var a=e.defaultInfo.beginTime.split(" ")[0];e.usableDate.push(a)}}else e.usableDate=[]})},catchUnitList:function(){var e=this;Object(m.p)().then(function(t){t.state&&(e.unitList=t.data)})},dateChange:function(e){var t=this;Object(r.c)(e).then(function(e){if(t.baseInfo.timeRange="",t.firstState||(t.placeForm.place=""),e.length?t.baseInfo.timeOptions=e:t.baseInfo.timeOptions=[],t.defaultInfo){var a=t.defaultInfo.beginTime.split(" ")[0];if(t.defaultInfo.areaUseId&&t.baseInfo.year==a){var s=t.defaultInfo.beginTime.split(" ")[1],i=t.defaultInfo.endTime.split(" ")[1],n=s.substring(0,s.length-3)+"~"+i.substring(0,i.length-3);t.firstState?t.baseInfo.timeRange=n:t.baseInfo.timeRange="",t.baseInfo.timeOptions.indexOf(n)<0&&t.baseInfo.timeOptions.push(n)}else t.baseInfo.timeRange="";t.firstState=!1}})},placeRadioChange:function(e){var t=!0,a=!1,s=void 0;try{for(var i,n=o()(this.usablePlace);!(t=(i=n.next()).done);t=!0){var l=i.value;e==l.id&&(this.curUsablePlaceInfo=l)}}catch(e){a=!0,s=e}finally{try{!t&&n.return&&n.return()}finally{if(a)throw s}}},usableTimesChange:function(e){var t=this,a=e.split("~");this.usablePlace=[],this.curUsablePlaceInfo={},this.placeForm.place="";var s=this.baseInfo.year+" "+a[0]+":00",i=this.baseInfo.year+" "+a[1]+":00";Object(r.b)(s,i).then(function(e){if(e.length?t.usablePlace=e:t.usablePlace=[],t.defaultInfo&&t.defaultInfo.areaUseId){var a=t.defaultInfo.beginTime.split(" ")[1],s=t.defaultInfo.endTime.split(" ")[1];a.substring(0,a.length-3)+"~"+s.substring(0,s.length-3)==t.baseInfo.timeRange&&t.usablePlace.push({name:t.defaultInfo.areaDetail,id:t.defaultInfo.areaUseId,peopleNum:t.defaultInfo.areaPeopleNum,description:t.defaultInfo.areaDescription})}})},showReason:function(e){this.reasonVisible=!0,this.curReasonType=e,this.reason=""},reject:function(){var e=this;if(!this.reason)return this.$message.error("请填写审核意见");var t=void 0;t="fail"==this.curReasonType?"/api/employment/audit/repulseExaminationAudit?id="+this.defaultInfo.id+"&reason="+this.reason:"/api/employment/audit/rejectExaminationAudit?id="+this.defaultInfo.id+"&reason="+this.reason,Object(u.e)({url:t,type:"post",success:function(t){t.state?(e.$message.success("操作成功"),e.$emit("backToParent")):(e.$message.error(t.message),e.$emit("backToParent")),e.reasonVisible=!1}})},unitChange:function(e){var t=this;Object(c.e)(e).then(function(e){e&&(t.unitInfo=e,t.unitForm.companyId=e.id,t.unitForm.companyContactPeople=e.contactPeople,t.unitForm.companyContactPhone=e.contactPhone,t.unitForm.companyEmail=e.mailAddress,t.baseInfo.contactPeople=e.contactPeople,t.baseInfo.contactPhone=e.contactPhone,t.baseInfo.email=e.mailAddress,t.$refs.unitInfoForm.validate(),t.$refs.baseInfoForm.validate())})},vali:function(){var e=this,t=!1,a=!1;return this.$refs.baseInfoForm.validate(function(a){var s=e.baseInfo;if(a){if("COMPANY_CHOOSE"==s.areaType){if(!s.year||!s.timeRange)return e.$message.error("请选择笔面试时间");if(!e.placeForm.place)return e.$message.error("请选择场地")}else{if(!s.startTime||!s.startDate)return e.$message.error("请选择笔面试时间");if(""==s.areaDetail&&"ADMIN_ASSIGNMENT"!=s.areaType)return e.$message.error("请填写场地")}t=a}else Object(m.a)(0,20)}),this.$refs.unitInfoForm.validate(function(e){e?a=e:Object(m.a)(400,20)}),t&&a},pass:function(){var e=this;if(this.vali()){var t=this.baseInfo,a=this.unitForm;if("COMPANY_CHOOSE"!=t.areaType){var s=t.startTime;t.beginTime=t.startDate+" "+s[0]+":00",t.endTime=t.startDate+" "+s[1]+":00"}if("COMPANY_CHOOSE"==t.areaType){var i=this.baseInfo.timeRange.split("~");t.beginTime=t.year+" "+i[0]+":00",t.endTime=t.year+" "+i[1]+":00",t.areaUseId=this.placeForm.place}"ADMIN_ASSIGNMENT"!=t.areaType&&(t.areaCategory="");var l=n()({},t,a);l.isContact="isContact"==t.areaType?1:0,Object(u.e)({url:"/api/employment/audit/agreeExaminationAudit",type:"post",data:l,success:function(t){t.state&&(e.$message.success("操作成功"),e.$emit("backToParent"))}})}},toSubmit:function(){var e=this;if(this.vali()){var t=this.baseInfo;if("COMPANY_CHOOSE"==this.baseInfo.areaType){var a=t.timeRange.split("~");t.beginTime=t.year+" "+a[0]+":00",t.endTime=t.year+" "+a[1]+":00",t.areaUseId=this.placeForm.place}else{var s=t.startTime;t.beginTime=t.startDate+" "+s[0]+":00",t.endTime=t.startDate+" "+s[1]+":00"}var i=this.unitForm,l=n()({},t,i);l.isContact="isContact"==t.areaType?1:0;var o=void 0;o=this.defaultInfo?"/api/employment/manage/examination/update":"/api/employment/manage/examination/addExamination",Object(u.e)({url:o,type:"post",data:l,success:function(t){t.state?(e.defaultInfo?e.$message.success("修改成功"):e.$message.success("提交成功"),e.$emit("backToParent")):e.$message.error(t.message)}})}},setDefault:function(){var e=this,t=this.defaultInfo;if(this.baseInfo={id:t.id,examinationName:t.title,type:t.type,areaType:t.areaType?t.areaType:"isContact",timeRange:"",timeOptions:[],areaDetail:t.areaDetail,areaRequirement:t.areaDescription},this.unitInfo=this.defaultInfo.companyInfo,"COMPANY_CHOOSE"==t.areaType){var a=t.beginTime.split(" ")[1],s=t.endTime.split(" ")[1];this.firstState=!0,this.$set(this.baseInfo,"year",t.beginTime.split(" ")[0]),this.dateChange(t.beginTime.split(" ")[0]),this.usableTimesChange(a.substring(0,a.length-3)+"~"+s.substring(0,s.length-3)),this.$set(this.baseInfo,"timeRange",a.substring(0,a.length-3)+"~"+s.substring(0,s.length-3)),this.baseInfo.timeOptions.push(this.baseInfo.timeRange),this.$set(this.placeForm,"place",t.areaUseId),this.curUsablePlaceInfo={id:t.areaUseId,name:t.areaName,peopleNum:t.areaPeopleNum,description:t.areaDescription},this.firstState=!0}else{var i=t.beginTime.split(" ")[1],n=t.endTime.split(" ")[1];this.$set(this.baseInfo,"startDate",t.beginTime.split(" ")[0]),this.$set(this.baseInfo,"startTime",[i.substring(0,i.length-3),n.substring(0,n.length-3)])}"COMPANY"==t.createType&&Object(m.f)().then(function(a){a.state&&(e.areaTypeList=a.data,t.areaCategory?e.$set(e.baseInfo,"areaCategory",t.areaCategory+""):e.$set(e.baseInfo,"areaCategory",""))}),this.unitForm={companyContactPeople:t.companyInfo.contactPeople,companyEmail:t.companyInfo.mailAddress,companyContactPhone:t.companyInfo.contactPhone,companyName:t.companyInfo.companyName,companyId:t.companyInfo.id}}},created:function(){this.catchUnitList(),this.defaultInfo&&this.setDefault(),this.getUsableDate()}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"addInterview"}},[a("div",{staticClass:"baseInfo"},[e._m(0),e._v(" "),a("div",{staticClass:"baseForm"},[a("el-form",{ref:"baseInfoForm",attrs:{model:e.baseInfo,rules:e.baseInfoRules,"label-width":"150px"}},[a("el-form-item",{attrs:{prop:"examinationName",label:"笔/面试标题："}},[a("el-input",{model:{value:e.baseInfo.examinationName,callback:function(t){e.$set(e.baseInfo,"examinationName",t)},expression:"baseInfo.examinationName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型：",prop:"type"}},[a("el-radio-group",{model:{value:e.baseInfo.type,callback:function(t){e.$set(e.baseInfo,"type",t)},expression:"baseInfo.type"}},[a("el-radio",{attrs:{label:"INTERVIEW"}},[e._v("面试")]),e._v(" "),a("el-radio",{attrs:{label:"WRITTEN"}},[e._v("笔试")])],1)],1),e._v(" "),e.defaultInfo&&"COMPANY"==e.defaultInfo.createType?a("el-form-item",{staticClass:"w100",attrs:{label:"场地类型：",prop:"areaType"}},[e.placeRule?a("el-radio-group",{on:{change:e.areaTypeChange},model:{value:e.baseInfo.areaType,callback:function(t){e.$set(e.baseInfo,"areaType",t)},expression:"baseInfo.areaType"}},["ADMIN_ASSIGNMENT"==e.placeRule.allocationScheme||e.defaultInfo&&"ADMIN_ASSIGNMENT"==e.defaultInfo.areaType?a("el-radio",{attrs:{label:"ADMIN_ASSIGNMENT"}},[e._v("管理员分配")]):e._e(),e._v(" "),"COMPANY_CHOOSE"==e.placeRule.allocationScheme||e.defaultInfo&&"COMPANY_CHOOSE"==e.defaultInfo.areaType?a("el-radio",{attrs:{label:"COMPANY_CHOOSE"}},[e._v("选择可用场地")]):e._e(),e._v(" "),1==e.placeRule.isAllow||e.defaultInfo&&1==e.defaultInfo.isContact?a("el-radio",{attrs:{label:"isContact"}},[e._v("自行联系")]):e._e()],1):e._e()],1):e._e(),e._v(" "),e.defaultInfo&&"COMPANY"==e.defaultInfo.createType&&"ADMIN_ASSIGNMENT"==e.baseInfo.areaType&&e.placeRule.areaExplain?a("div",{staticClass:"areaExplain"},[a("el-collapse",{attrs:{accordion:""}},[a("el-collapse-item",[a("template",{slot:"title"},[a("span",{staticClass:"title"},[a("i",{staticClass:"header-icon el-icon-info"}),a("em",[e._v("笔面试场地说明：")])])]),e._v(" "),a("div",{staticClass:"content",domProps:{innerHTML:e._s(e.placeRule.areaExplain)}})],2)],1)],1):e._e(),e._v(" "),"COMPANY_CHOOSE"!=e.baseInfo.areaType?a("el-form-item",{staticClass:"w100",attrs:{prop:"date"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("em",{staticStyle:{color:"#d25050"}},[e._v("*")]),e._v("笔/面试时间：\n          ")]),e._v(" "),a("el-date-picker",{attrs:{format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.baseInfo.startDate,callback:function(t){e.$set(e.baseInfo,"startDate",t)},expression:"baseInfo.startDate"}}),e._v(" "),a("el-time-picker",{attrs:{"is-range":"","value-format":"HH:mm",format:"HH:mm","range-separator":"-","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},model:{value:e.baseInfo.startTime,callback:function(t){e.$set(e.baseInfo,"startTime",t)},expression:"baseInfo.startTime"}})],1):e._e(),e._v(" "),"COMPANY_CHOOSE"==e.baseInfo.areaType?a("el-form-item",{staticClass:"w100"},[a("span",{attrs:{slot:"label"},slot:"label"},[a("em",{staticStyle:{color:"#d25050"}},[e._v("*")]),e._v("笔面试时间：\n          ")]),e._v(" "),a("div",{staticClass:"dateBox"},[a("el-date-picker",{key:"rangeDate",attrs:{format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期","picker-options":e.pickerOptions},on:{change:e.dateChange},model:{value:e.baseInfo.year,callback:function(t){e.$set(e.baseInfo,"year",t)},expression:"baseInfo.year"}}),e._v(" "),a("el-select",{attrs:{disabled:!e.baseInfo.timeOptions.length,placeholder:"请选择时间段"},on:{change:e.usableTimesChange},model:{value:e.baseInfo.timeRange,callback:function(t){e.$set(e.baseInfo,"timeRange",t)},expression:"baseInfo.timeRange"}},e._l(e.baseInfo.timeOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})}),1)],1)]):e._e(),e._v(" "),e.defaultInfo&&"isContact"==e.baseInfo.areaType||!e.defaultInfo?a("el-form-item",{attrs:{label:"笔面试地点：",prop:"areaDetail"}},[a("el-input",{model:{value:e.baseInfo.areaDetail,callback:function(t){e.$set(e.baseInfo,"areaDetail",t)},expression:"baseInfo.areaDetail"}})],1):e._e(),e._v(" "),"ADMIN_ASSIGNMENT"==e.baseInfo.areaType?a("el-form-item",{staticClass:"w100",attrs:{label:"场地要求："}},[a("el-input",{attrs:{placeholder:"请填入场地、时间要求等",type:"textarea",rows:"4",resize:"none"},model:{value:e.baseInfo.areaRequirement,callback:function(t){e.$set(e.baseInfo,"areaRequirement",t)},expression:"baseInfo.areaRequirement"}})],1):e._e(),e._v(" "),"ADMIN_ASSIGNMENT"==e.baseInfo.areaType?a("el-form-item",{attrs:{label:"场地类别",prop:"areaCategory"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择场地类别"},model:{value:e.baseInfo.areaCategory,callback:function(t){e.$set(e.baseInfo,"areaCategory",t)},expression:"baseInfo.areaCategory "}},e._l(e.areaTypeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):e._e()],1)],1)]),e._v(" "),"COMPANY_CHOOSE"==e.baseInfo.areaType?a("div",{staticClass:"placeinfo"},[a("div",{staticClass:"placeInfoForm"},[e._m(1),e._v(" "),a("div",{staticClass:"placeInfoForm"},[a("el-form",{attrs:{model:e.placeForm,rules:e.placeFormRule,"label-width":"170px"}},[e.baseInfo.timeRange?a("el-form-item",{staticClass:"w100",attrs:{prop:"place",label:"场地："}},[a("el-radio-group",{model:{value:e.placeForm.place,callback:function(t){e.$set(e.placeForm,"place",t)},expression:"placeForm.place"}},e._l(e.usablePlace,function(t,s){return a("el-radio",{key:s,attrs:{label:t.id},on:{change:e.placeRadioChange}},[e._v(e._s(t.name))])}),1),e._v(" "),e.placeForm.place?a("div",{staticClass:"usablePlace"},[a("em"),e._v(" "),a("h2",[e._v("可容纳人数："+e._s(e.curUsablePlaceInfo.peopleNum))]),e._v(" "),a("h2",{attrs:{title:e.curUsablePlaceInfo.description},domProps:{innerHTML:e._s("场地说明："+e.curUsablePlaceInfo.description)}})]):e._e()],1):e._e()],1)],1)])]):e._e(),e._v(" "),a("div",{staticClass:"unitInfo"},[e._m(2),e._v(" "),a("div",{staticClass:"unitForm"},[a("el-form",{ref:"unitInfoForm",attrs:{model:e.unitForm,rules:e.unitInfoRules,"label-width":"150px"}},[a("div",[a("el-form-item",{attrs:{label:"单位名称：",prop:"companyName"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.defaultInfo&&"0"==e.defaultInfo.status,placeholder:"请选择或输入公司名称",filterable:""},on:{change:e.unitChange},model:{value:e.unitForm.companyName,callback:function(t){e.$set(e.unitForm,"companyName",t)},expression:"unitForm.companyName"}},e._l(e.unitList,function(t,s){return e.unitList.length?a("el-option",{key:s,attrs:{label:t.companyName,value:t.id}}):e._e()}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"单位性质："}},[a("span",[e._v(e._s(e.unitInfo.propertyName))])])],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"单位联系人：",prop:"companyContactPeople"}},[a("el-input",{model:{value:e.unitForm.companyContactPeople,callback:function(t){e.$set(e.unitForm,"companyContactPeople",t)},expression:"unitForm.companyContactPeople "}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单位规模："}},[a("span",[e._v(e._s(e.unitInfo.scaleName))])])],1),e._v(" "),a("div",[a("el-form-item",{attrs:{label:"电话：",prop:"companyContactPhone"}},[a("el-input",{model:{value:e.unitForm.companyContactPhone,callback:function(t){e.$set(e.unitForm,"companyContactPhone",t)},expression:"unitForm.companyContactPhone "}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱：",prop:"companyEmail"}},[a("el-input",{model:{value:e.unitForm.companyEmail,callback:function(t){e.$set(e.unitForm,"companyEmail",t)},expression:"unitForm.companyEmail "}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"w100",attrs:{label:"单位地址："}},[a("span",[e._v(e._s(e.unitInfo.addressDetail))])]),e._v(" "),a("el-form-item",{staticClass:"w100",attrs:{label:"单位简介："}},[a("span",{domProps:{innerHTML:e._s(e.unitInfo.summary)}})])],1)],1)]),e._v(" "),e.defaultInfo?e._e():a("div",{staticClass:"formBtn"},[a("a",{staticClass:"publish",on:{click:e.toSubmit}},[e._v("发布")])]),e._v(" "),e.defaultInfo?a("div",{staticClass:"formBtn"},[1==e.defaultInfo.status?a("a",{staticClass:"publish",on:{click:e.toSubmit}},[e._v("修改")]):e._e(),e._v(" "),0==e.defaultInfo.status?a("div",[a("a",{on:{click:e.pass}},[e._v("通过")]),e._v(" "),a("a",{on:{click:function(t){return e.showReason("fail")}}},[e._v("不通过")]),e._v(" "),a("a",{on:{click:function(t){return e.showReason("reject")}}},[e._v("驳回重新提交")])]):e._e()]):e._e(),e._v(" "),e.reasonVisible?a("div",{staticClass:"reason btnGroup"},[a("el-dialog",{attrs:{visible:e.reasonVisible,title:"审核意见",width:"480px"},on:{"update:visible":function(t){e.reasonVisible=t}}},[a("div",{staticClass:"sumarryInput"},[a("el-input",{attrs:{type:"textarea",resize:"none",rows:"4"},model:{value:e.reason,callback:function(t){e.reason=t},expression:"reason"}}),e._v(" "),a("a",{staticStyle:{"margin-top":"20px"},on:{click:e.reject}},[e._v("提交")])],1)])],1):e._e()])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{staticClass:"clearfix title"},[t("span",[t("em"),t("i",[this._v("基本信息")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title clearfix"},[t("h1",[t("span",[t("em"),this._v(" "),t("i",[this._v("场地信息")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{staticClass:"clearfix title"},[t("span",[t("em"),t("i",[this._v("单位信息")])])])}]};var _=a("C7Lr")(v,g,!1,function(e){a("bWsg"),a("75+J")},"data-v-2aa661c4",null).exports,I=a("WD6V"),y=(I.a,{props:["loginType","interviewId","placeRule"],components:{oplog:I.a,editInterviewOfUnit:f,editInterviewOfAdmin:_},data:function(){return{details:{},status:"",editStatus:!1,statusName:"",showLog:!1,companyInfo:{},dataUrl:""}},methods:{catchDetails:function(){var e=this;"COMPANY"==this.loginType.loginType?Object(s.c)(this.interviewId).then(function(t){t.state&&(e.details=t.data,e.companyInfo=t.data.companyInfo,e.status=e.details.status,e.statusName=e.details.statusName)}):Object(s.b)(this.interviewId).then(function(t){t.state&&(e.details=t.data,e.companyInfo=t.data.companyInfo,e.status=e.details.status,e.statusName=e.details.statusName)}),this.dataUrl="/api/employment/manage/examination/getOperationDetailList?id="+this.interviewId+"&time="+(new Date).getTime()},recall:function(){var e=this;this.$confirm("撤回会释放占用的场地,是否继续撤回?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.d)(e.details.id).then(function(t){t.state&&(e.$message.success("撤回成功"),e.details.status=3,e.statusName="已撤回",e.status=3)})}).catch(function(){e.$message({type:"info",message:"已取消撤回"})})},edit:function(){this.editStatus=!this.editStatus},backToParent:function(){this.$emit("backToParent")}},created:function(){this.catchDetails()}}),T={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"details"}},[a("div",{staticClass:"statusBar box"},[a("p",[a("span",{class:{default:0==e.status,error:2==e.status||5==e.status}},[e._v(e._s(e.statusName))])]),e._v(" "),a("h3",[a("a",{on:{click:function(t){e.showLog=!e.showLog}}},[e._v("操作日志")]),e._v(" "),"COMPANY"==e.loginType.loginType?a("div",{staticClass:"pull-right"},[5==e.status||3==e.status||1==e.status?a("a",{on:{click:e.edit}},[a("i"),a("em",[e._v(e._s(e.editStatus?"取消编辑":"编辑"))])]):e._e()]):e._e(),e._v(" "),"COMPANY"!=e.loginType.loginType?a("div",{staticClass:"pull-right"},[1==e.status||0==e.status?a("a",{on:{click:e.edit}},[a("i"),a("em",[e._v(e._s(e.editStatus?"取消编辑":"编辑"))])]):e._e()]):e._e()])]),e._v(" "),e.editStatus?e._e():a("div",[a("div",{staticClass:"baseInfo"},[e._m(0),e._v(" "),a("ul",{staticClass:"baseInfoList"},[a("li",[a("span",[e._v("笔/面试标题：")]),e._v(" "),a("i",[e._v(e._s(e.details.title))])]),e._v(" "),a("li"),a("li",[a("span",[e._v("类型：")]),e._v(" "),a("i",[e._v(e._s("WRITTEN"==e.details.type?"笔试":"面试"))])]),e._v(" "),a("li",[a("span",[e._v("笔试面试时间：")]),e._v(" "),a("i",[e._v(e._s(e.details.beginTime+"~"+e.details.endTime))])]),e._v(" "),a("li",[a("span",[e._v("笔试面试场地：")]),e._v(" "),a("i",[e._v(e._s(e.details.areaDetail?e.details.areaDetail:"管理员分配场地"))])]),e._v(" "),e.details.areaCategoryName?a("li",[a("span",[e._v("场地类别：")]),e._v(" "),a("i",[e._v(e._s(e.details.areaCategoryName))])]):e._e(),e._v(" "),"ADMIN_ASSIGNMENT"==e.details.areaType?a("li",{staticClass:"areaExplain"},[a("el-collapse",{attrs:{accordion:""}},[a("el-collapse-item",[a("template",{slot:"title"},[a("span",{staticClass:"title"},[a("em",[e._v("笔面试场地说明：")])])]),e._v(" "),a("div",{staticClass:"content",domProps:{innerHTML:e._s(e.details.areaExplain)}})],2)],1)],1):e._e(),e._v(" "),e.details.areaDescription?a("li",[a("span",[e._v("场地要求：")]),e._v(" "),a("i",{domProps:{innerHTML:e._s(e.details.areaDescription)}})]):e._e(),e._v(" "),"COMPANY"==e.details.createType?a("div",{staticClass:"box"},[a("li",[a("span",[e._v("单位联系人：")]),e._v(" "),a("i",[e._v(e._s(e.details.contactPeople))])]),e._v(" "),a("li",[a("span",[e._v("电话：")]),e._v(" "),a("i",[e._v(e._s(e.details.contactPhone))])])]):e._e(),e._v(" "),a("li",[a("span",[e._v("邮箱：")]),e._v(" "),a("i",[e._v(e._s(e.details.email))])])])]),e._v(" "),"COMPANY"!=e.loginType.loginType?a("div",{staticClass:"unitInfo"},[a("div",{staticClass:"title "},[e._m(1),e._v(" "),a("ul",{staticClass:"baseInfoList unitInfoList"},[a("div",[a("li",[a("span",[e._v("单位名称：")]),e._v(" "),a("i",[e._v(e._s(e.companyInfo.companyName))])]),e._v(" "),a("li",[a("span",[e._v("单位性质：")]),e._v(" "),a("i",[e._v(e._s(e.companyInfo.propertyName))])])]),e._v(" "),a("div",[a("li",[a("span",[e._v("单位规模：")]),e._v(" "),a("i",[e._v(e._s(e.companyInfo.scaleName))])]),e._v(" "),a("li",[a("span",[e._v("邮箱：")]),e._v(" "),a("i",[e._v(e._s(e.companyInfo.mailAddress))])])]),e._v(" "),a("div",[a("li",[a("span",[e._v("单位联系人：")]),e._v(" "),a("i",[e._v(e._s(e.companyInfo.contactPeople))])]),e._v(" "),a("li",[a("span",[e._v("电话：")]),e._v(" "),a("i",[e._v(e._s(e.companyInfo.contactPhone))])])]),e._v(" "),a("li",[a("span",[e._v("单位地址：")]),e._v(" "),a("i",[e._v(e._s(e.companyInfo.addressDetail))])]),e._v(" "),a("li",{staticClass:"box"},[a("span",[e._v("单位简介：")]),e._v(" "),a("i",{domProps:{innerHTML:e._s(e.companyInfo.summary)}})])])])]):e._e()]),e._v(" "),e.editStatus&&"COMPANY"==e.loginType.loginType?a("div",[a("edit-interview-of-unit",{attrs:{placeRule:e.placeRule,defaultInfo:e.details},on:{backToParent:e.backToParent}})],1):e._e(),e._v(" "),e.editStatus&&e.loginType.isAdmin?a("div",[a("edit-interview-of-admin",{attrs:{placeRule:e.placeRule,defaultInfo:e.details},on:{backToParent:e.backToParent}})],1):e._e(),e._v(" "),"COMPANY"==e.loginType.loginType?a("div",{staticClass:"btnGroup"},[0==e.status?a("a",{staticClass:"reCall default",on:{click:e.recall}},[e._v("撤回")]):e._e()]):e._e(),e._v(" "),e.loginType.isAdmin?a("div",{staticClass:"btnGroup"}):e._e(),e._v(" "),a("div",{class:{show:e.showLog},attrs:{id:"timeline"}},[a("oplog",{attrs:{dataUrl:e.dataUrl}})],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title clearfix"},[t("h1",[t("span",[t("em"),this._v(" "),t("i",[this._v("基本信息")])])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{staticClass:"clearfix"},[t("span",[t("em"),this._v(" "),t("i",[this._v("单位信息")])])])}]};var C=a("C7Lr")(y,T,!1,function(e){a("6TYE"),a("kcYQ")},"data-v-5cdefea2",null).exports,N={props:["data"],data:function(){return{columns:[],tableDataUrl:"",showMultiple:!0,tableCheckedListAll:"",tableCheckedList:[],dialogVisible:!1,addAssignType:"single",loginType:{},placeRule:{},details:"",defaultInfo:{},interviewId:"",curStatus:"list",assistant:{name:"",phone:""},assistantRules:{name:[{required:!0,message:"请输入跟场助理名字",trigger:"blur"}],phone:[{required:!0,message:"请输入跟场助理手机号",trigger:"blur"},{validator:function(e,t,a){if(!t)return a(new Error("手机号不能为空"));if(!/^1[3|4|5|7|8][0-9]\d{8}$/.test(t))return a(new Error("请输入正确的手机号"));a()},trigger:"blur"}]},curId:""}},components:{interviewDetail:C,addInterviewUnit:f,addInterviewAdmin:_},methods:{_tableChecked:function(e){var t=[];e.forEach(function(e){t.push(e.id)}),this.tableCheckedListAll=e.length,this.tableCheckedList=t},cancle:function(){this.$refs.assistant.resetFields(),this.$refs.assistant.clearValidate(),this.dialogVisible=!1},submit:function(){var e=this;this.$refs.assistant.validate(function(t){if(t){var a=[];"single"==e.addAssignType?a.push(e.curId):a=e.tableCheckedList,Object(s.a)(a,e.assistant.name,e.assistant.phone).then(function(t){t.state?(e.$message.success("跟场助理设置成功!"),e.tableCheckedListAll="",e.tableCheckedList=[],e.setTableUrl(e.loginType.loginType)):(e.tableCheckedListAll="",e.tableCheckedList=[],e.$message.error(t.message)),e.dialogVisible=!1})}})},batchAssistant:function(){if(!this.tableCheckedListAll)return this.$message.error("请先勾选单位");this.assistant={name:"",phone:""},this.addAssignType="list",this.dialogVisible=!0},createExam:function(){var e=this;"COMPANY"==this.loginType.loginType?Object(m.b)("EXAMINATION").then(function(t){t.state?Object(m.c)().then(function(t){t.state&&(1!=t.data?(e.curStatus="edit",e.defaultInfo=null):e.$message({type:"error",message:"该单位已被停用"}))}):e.$message({tyep:"error",message:t.message})}):(this.curStatus="edit",this.defaultInfo=null)},catchLoginType:function(){var e=this;Object(m.j)().then(function(t){e.loginType=t.data,e.setTableUrl(e.loginType.loginType),e.setColumns(e.loginType.loginType)})},setColumns:function(e){var t=this;"COMPANY"==e?(this.showMultiple=!1,this.columns=[{id:"title",title:"笔试面试名称",className:"text-left",width:130,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!1}},formatter:function(e){return e.name}},{id:"timeSpace",title:"时间",className:"text-left line-height-normal",width:150,hidden:!1,search:{type:"datetime",data:{dateFormat:"yyyy-MM-dd hh:ii",placeholder:"笔面试",change:function(e){e.value,e.target;t.tableDataUrl="/table-data/employment/examination/getList?timeStamp="+(new Date).getTime()+"&beginTime="+t.$refs.interviewList.tableSearchFields.timeSpace_start+"&endTime="+t.$refs.interviewList.tableSearchFields.timeSpace_end}}}},{id:"areaName",title:"场地",className:"text-left",width:130,hidden:!1},{id:"auditTime",title:"提交时间",className:"text-left",width:130,hidden:!1},{id:"status",title:"审核状态",className:"text-left",width:100,search:{type:"select",data:{optionsLabel:"label",optionsValue:"value",options:[{label:"待审核",value:0},{label:"已通过",value:1},{label:"未通过",value:2},{label:"已撤回",value:3},{label:"已下架",value:4},{label:"已驳回",value:5}],placeholer:"",autoFocus:!1}},formatter:function(e){return e.statusName}},{id:"reason",title:"审核意见",className:"text-left",width:130,hidden:!1,formatter:function(e){if(!e.reason)return"-"}},{id:"opts",title:"操作",width:80,hidden:!1,formatter:function(e){return[{tag:"a",text:"查看",callback:function(e,a){t.interviewId=e.id,t.curStatus="details"}},{tag:"a",text:"撤回",className:"0"==e.status?"":"none",callback:function(e,a){Object(s.d)(e.id).then(function(e){e.state?(t.$message.success("撤回成功"),t.setTableUrl(t.loginType.loginType)):t.$message.error(e.message)})}}]}}]):"笔/面试管理"==this.data.title?this.columns=[{id:"title",title:"笔面试名称",className:"text-left",width:150,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!1}},formatter:function(e){return e.name}},{id:"companyName",title:"单位名称",className:"text-left",width:150,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!1}}},{id:"timeSpace",title:"时间",className:"text-left line-height-normal",width:150,hidden:!1,search:{type:"datetime",data:{dateFormat:"yyyy-MM-dd hh:ii",placeholder:"笔面试",change:function(e){e.value,e.target;t.tableDataUrl="/table-data/employment/manage/examination/getExaminationBySearch?timeStamp="+(new Date).getTime()+"&beginTime="+t.$refs.interviewList.tableSearchFields.timeSpace_start+"&endTime="+t.$refs.interviewList.tableSearchFields.timeSpace_end}}}},{id:"areaName",title:"场地",className:"text-left",width:180,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!1}}},{id:"allocationScheme",title:"场地分配方式",className:"text-left",width:100,hidden:!1},{id:"assistantName",title:"跟场助理",className:"text-left",width:100,hidden:!1,formatter:function(e){if(!e.assistantName)return"-"}},{id:"assistantPhone",title:"助理联系方式",className:"text-left",width:100,hidden:!1},{id:"opts",title:"操作",width:200,hidden:!1,formatter:function(e){return[{tag:"a",text:"查看",callback:function(e,a){t.tableCheckedListAll="",t.tableCheckedList=[],t.interviewId=e.id,t.curStatus="details"}},{tag:"a",text:"跟场助理",callback:function(e,a){t.curId=e.id,t.assistant.name=e.assistantName,t.assistant.phone=e.assistantPhone,t.addAssignType="single",t.dialogVisible=!0}},{tag:"a",text:1==e.status?"下架":"重新上架",callback:function(e,a){var s=1==e.status?"下架":"重新上架";t.$confirm("是否执行"+s+"操作","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(u.e)({url:"/api/employment/audit/soldOutExaminationAudit?id="+e.id,type:"post",success:function(e){e.state?(t.$message.success(s+"成功！"),t.setTableUrl(t.loginType.loginType)):(t.$message.error(e.message),t.setTableUrl(t.loginType.loginType))}})}).catch(function(){t.$message({type:"info",message:"已取消"})})}}]}}]:(this.showMultiple=!1,this.columns=[{id:"companyName",title:"单位名称",className:"text-left",width:120,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!1}}},{id:"name",title:"笔面试标题",className:"text-left",width:120,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!1}}},{id:"timeSpace",title:"时间",className:"text-left line-height-normal",width:150,hidden:!1,search:{type:"datetime",data:{dateFormat:"yyyy-MM-dd hh:ii",placeholder:"笔面试",change:function(e){e.value,e.target;t.tableDataUrl="/table-data/employment/audit/getExaminationAuditBySearch?timeStamp="+(new Date).getTime()+"&beginTime="+t.$refs.interviewList.tableSearchFields.timeSpace_start+"&endTime="+t.$refs.interviewList.tableSearchFields.timeSpace_end}}}},{id:"areaName",title:"场地",className:"text-left",width:100,search:{type:"input",data:{placeholer:"",autoFocus:!1}}},{id:"contactPeople",title:"联系人",className:"text-left",width:100},{id:"contactPhone",title:"联系电话",className:"text-left",width:100},{id:"auditTime",title:"提交时间",className:"text-left",width:150},{id:"status",title:"审核状态",className:"text-left",width:100,search:{type:"select",data:{optionsLabel:"label",optionsValue:"value",options:[{label:"待审核",value:0},{label:"已通过",value:1},{label:"未通过",value:2},{label:"驳回",value:5}],placeholer:"",autoFocus:!1}},formatter:function(e){return e.statusName}},{id:"reason",title:"审核意见",className:"text-left",width:100,hidden:!1,formatter:function(e){if(!e.reason)return" - "}},{id:"opts",title:"操作",width:50,hidden:!1,formatter:function(e){return[{tag:"a",text:"查看",className:0==e.status?"none":"",callback:function(e,a){t.interviewId=e.id,t.curStatus="details"}},{tag:"a",text:"审核",className:0==e.status?"":"none",callback:function(e,a){Object(s.b)(e.id).then(function(e){e.state&&(t.defaultInfo=e.data,t.curStatus="edit")})}}]}}])},setTableUrl:function(e){"COMPANY"==e?this.tableDataUrl="/table-data/employment/examination/getList?timeStamp="+(new Date).getTime():"笔/面试管理"==this.data.title?this.tableDataUrl="/table-data/employment/manage/examination/getExaminationBySearch?timeStamp="+(new Date).getTime():this.tableDataUrl="/table-data/employment/audit/getExaminationAuditBySearch?timeStamp="+(new Date).getTime()},backToParent:function(){this.curStatus="list"},catchPlaceRules:function(){var e=this;Object(r.a)("EXAMINATION").then(function(t){t&&(e.placeRule=t[0])})}},created:function(){this.catchLoginType(),this.catchPlaceRules()}},P={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contentBox",attrs:{id:"interview"}},["list"!=e.curStatus?a("el-button",{staticStyle:{color:"#666"},attrs:{type:"text",icon:"el-icon-back"},on:{click:function(t){e.curStatus="list"}}},[e._v("返回")]):e._e(),e._v(" "),"list"==e.curStatus?a("div",{staticClass:"interviewTable"},[a("v-table",{ref:"interviewList",attrs:{url:e.tableDataUrl,columns:e.columns,pagesize:"15",idField:"id",multiple:e.showMultiple,order:!0,search:!1,columnsControl:!0},on:{afterChecked:e._tableChecked}},[a("div",{staticClass:"pull-left",attrs:{slot:"btn-group"},slot:"btn-group"},[e.tableCheckedListAll?a("el-button",{staticClass:"operability-hint",attrs:{type:"text"}},[e._v("已选择"+e._s(e.tableCheckedListAll)+"项,其中可操作的有"+e._s(e.tableCheckedList.length)+"项")]):e._e()],1),e._v(" "),a("div",{staticClass:"pull-right",attrs:{slot:"btn-group"},slot:"btn-group"},[e.showMultiple?a("el-button",{staticClass:"custom-btn",attrs:{type:"primary"},on:{click:e.batchAssistant}},[e._v("批量设置跟场助理")]):e._e(),e._v(" "),a("el-button",{staticClass:"custom-btn",attrs:{type:"primary"},on:{click:e.createExam}},[e._v("新增笔面试")])],1)])],1):e._e(),e._v(" "),a("div",{staticClass:"setAssistant"},[a("el-dialog",{attrs:{visible:e.dialogVisible,width:"480px","before-close":e.beforCancle},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"form"},[a("el-form",{ref:"assistant",attrs:{model:e.assistant,rules:e.assistantRules,"label-width":"50px"}},[a("el-form-item",{attrs:{prop:"name"}},[a("i",{staticClass:"nameIcon",attrs:{slot:"label"},slot:"label"}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入跟场助理姓名"},model:{value:e.assistant.name,callback:function(t){e.$set(e.assistant,"name",t)},expression:"assistant.name"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"phone"}},[a("i",{staticClass:"phoneIcon",attrs:{slot:"label"},slot:"label"}),e._v(" "),a("el-input",{attrs:{placeholder:"请输入跟场助理电话"},model:{value:e.assistant.phone,callback:function(t){e.$set(e.assistant,"phone",t)},expression:"assistant.phone"}})],1),e._v(" "),a("div",{staticClass:"btnGroup"},[a("a",{on:{click:e.cancle}},[e._v("取 消")]),e._v(" "),a("a",{on:{click:e.submit}},[e._v("确 定")])])],1)],1)])],1),e._v(" "),"edit"==e.curStatus&&"COMPANY"==e.loginType.loginType?a("add-interview-unit",{attrs:{loginType:e.loginType,placeRule:e.placeRule},on:{backToParent:e.backToParent}}):e._e(),e._v(" "),"edit"==e.curStatus&&e.loginType.isAdmin?a("add-interview-admin",{attrs:{placeRule:e.placeRule,defaultInfo:e.defaultInfo,loginType:e.loginType},on:{backToParent:e.backToParent}}):e._e(),e._v(" "),"details"==e.curStatus?a("interview-detail",{attrs:{loginType:e.loginType,placeRule:e.placeRule,interviewId:e.interviewId},on:{backToParent:e.backToParent}}):e._e()],1)},staticRenderFns:[]};var x=a("C7Lr")(N,P,!1,function(e){a("0CKz"),a("4c/d"),a("nSsd")},"data-v-5d40ab76",null);t.default=x.exports}});