webpackJsonp([46,79],{"84rG":function(t,e,a){"use strict";(function(t){var e=a("3cXf");a.n(e),a("kV13"),a("C331")}).call(e,a("qqHy"))},Gn2t:function(t,e){},Kchf:function(t,e){},X7ya:function(t,e,a){"use strict";(function(t){var s=a("3cXf"),i=a.n(s),n=(a("kV13"),a("C331"));e.a={props:{},created:function(){var t=localStorage.getItem("lang");Object(n.g)(t)&&(this.lang=t),this.getJoinList(),this.getBriefList(),this.getCollegesList(),this.getGradesList(),this.getContentTypeList(),this.getTypeList()},data:function(){return{lang:"zh-cn",briefList:[],peopleType:[{value:"ALL",label:" 全体"},{value:"GRADE",label:"年级"},{value:"COLLEGE",label:"学院"}],peopleList:[],collegesList:[],gradesList:[],contentTypeList:[],typeList:[],joinList:[],coverImage:"",coverImgList:[],activeImgList:[],childTypeList:[],typePoint:"",params:{applyAuditNeeded:!0,applyEndTime:"",applyStartTime:"",contactWay:"",contentTypeId:"",studentCode:"",endTime:"",images:[],introduction:"",name:"",teacherName:"",teacherId:"",peopleType:"ALL",classTime:"",grade:[],organizations:[{organizationId:"",type:"PUBLISHER"},{organizationId:"",type:"SPONSOR"},{organizationId:"",type:"PURVEYOR"},{organizationId:"",type:"ASSISTANT"}],place:"",startTime:"",studentOriented:[],typeId:"",userLimit:""}}},computed:{translate:function(){return Object(n.g)(this.lang).creatActivity}},methods:{back:function(){this.$emit("back")},selectPeople:function(t){"GRADE"==t.val?this.peopleList=this.gradesList:"COLLEGE"==t.val?this.peopleList=this.collegesList:(this.params.peopleType="ALL",this.peopleList=[])},_valueChangeApplyStart:function(t){var e=this,a=this.params.applyStartTime,s=this.params.applyEndTime,i=0,n=0,l="";a&&(i=new Date(a.replace(/\-\g/,"/")).getTime()),s&&(n=new Date(s.replace(/\-\g/,"/")).getTime()),s&&i>=n&&(l="选择的时间要在报名结束时间之前！"),l&&(setTimeout(function(){e.params.applyStartTime=""},100),this.$toast(l))},_valueChangeApplyEnd:function(t){var e=this,a=this.params.applyStartTime,s=this.params.applyEndTime,i=0,n=0,l="";a&&(i=new Date(a.replace(/\-\g/,"/")).getTime()),s&&(n=new Date(s.replace(/\-\g/,"/")).getTime()),a&&n<=i&&(l="选择的时间要在报名开始时间之后！"),l&&(setTimeout(function(){e.params.applyEndTime=""},100),this.$toast(l))},_valueChangeStart:function(t){var e=this,a=this.params.startTime,s=this.params.endTime,i=0,n=0,l="";a&&(i=new Date(a.replace(/\-\g/,"/")).getTime()),s&&(n=new Date(s.replace(/\-\g/,"/")).getTime()),s&&i>=n&&(l="选择的时间要在活动结束时间之前！"),l&&(setTimeout(function(){e.params.startTime=""},100),this.$toast(l))},_valueChangeEnd:function(t){var e=this,a=this.params.startTime,s=this.params.endTime,i=0,n=0,l="";a&&(i=new Date(a.replace(/\-\g/,"/")).getTime()),s&&(n=new Date(s.replace(/\-\g/,"/")).getTime()),a&&n<=i&&(l="选择的时间要在活动开始时间之后！"),l&&(setTimeout(function(){e.params.endTime=""},100),this.$toast(l))},submitForm:function(){var t=this;if(this.params.images=[],this.params.name)if(this.params.typeId)if(this.params.contentTypeId)if(this.params.organizations[0].organizationId)if(this.params.organizations[1].organizationId)if(this.coverImgList.length&&this.params.images.push({image:this.coverImgList[0].hash,isCover:!0}),this.params.introduction)if(this.params.startTime)if(this.params.endTime)if(this.params.applyStartTime)if(this.params.applyEndTime)if(this.params.place)if(this.params.contactWay)if("ALL"===this.params.peopleType||this.params.studentCode.length){this.activeImgList.length&&this.params.images.push({image:this.activeImgList[0].hash,isCover:!1}),"GRADE"==this.params.peopleType?this.params.grade=this.params.studentCode.split(","):this.params.studentOriented=this.params.studentCode.split(",").map(function(t){return{code:t}});var e=JSON.parse(i()(this.params));e.organizations[3].organizationId||e.organizations.splice(3,1),e.organizations[2].organizationId||e.organizations.splice(2,1),e.startTime=e.startTime.substring(0,16),e.endTime=e.endTime.substring(0,16),e.applyStartTime=e.applyStartTime.substring(0,16),e.applyEndTime=e.applyEndTime.substring(0,16);Object(n.d)("/api/sc/activities",e).then(function(e){e.state?(t.$toast("发布成功!"),t.back(),t.params={applyAuditNeeded:!0,applyEndTime:"",applyStartTime:"",contactWay:"",contentTypeId:"",studentCode:"",endTime:"",images:[],introduction:"",name:"",teacherName:"",teacherId:"",peopleType:"",classTime:"",grade:[],organizations:[{organizationId:"",type:"PUBLISHER"},{organizationId:"",type:"SPONSOR"},{organizationId:"",type:"PURVEYOR"},{organizationId:"",type:"ASSISTANT"}],place:"",startTime:"",studentOriented:[],typeId:"",userLimit:""}):t.$toast(e.message)})}else this.$toast("选择面向群体!");else this.$toast("请输入联系方式!");else this.$toast("请输入活动地点!");else this.$toast("请选择报名结束时间!");else this.$toast("请选择报名开始时间!");else this.$toast("请选择活动结束时间!");else this.$toast("请选择活动开始时间!");else this.$toast("请输入活动简介!");else this.$toast("请选择主办方!");else this.$toast("请选择发布方!");else this.$toast("请选择活动类型!");else this.$toast("请选择活动定位!");else this.$toast("请输入活动名称!")},selectType:function(t){var e=this;this.contentTypeList.map(function(a){return a.id===t.value&&(e.childTypeList=a.childType),a})},selectChildType:function(t){var e=this;this.childTypeList.map(function(a){return a.id===t.value&&(e.typePoint=a.point),a})},deleteImg:function(t,e){var a="api/storage/files/"+this[e][t].hash;Object(n.d)(a,{},"post").then(function(t){}),this[e].splice(t,1)},onSelectImage:function(t){var e=event.target.files[0],a=this;if(e){event.target.value="";var s=new FileReader;s.onloadend=function(s){var i=new Image;i.src=s.target.result,i.onload=function(){a.$croppa({file:e,width:750,height:390,scale:"",sure:function(e){Object(n.d)("/api/storage/base64Images",{data:e}).then(function(s){"cover"===t?(a.coverImgList.length&&a.deleteImg(0,"coverImgList"),a.coverImgList.push({hash:s.data.hash,base64:e})):(a.activeImgList.length&&a.deleteImg(0,"activeImgList"),a.activeImgList.push({hash:s.data.hash,base64:e}))})}})}},s.readAsDataURL(e)}},selectImage:function(e){t("#"+e).click()},getJoinList:function(){var t=this;Object(n.d)("/api/sc/organizations/list/join").then(function(e){e.state&&(t.joinList=e.data)})},getBriefList:function(){var t=this;Object(n.d)("/api/sc/organizations/list/brief").then(function(e){e.state&&(t.briefList=e.data)})},getCollegesList:function(){var t=this;Object(n.d)("/api/colleges").then(function(e){e.state&&(t.collegesList=e.data)})},getGradesList:function(){var t=new Date,e=t.getFullYear();e=t.getMonth()+1<7?e-1:e;for(var a=0;a<5;a++)this.gradesList.push({code:""+(e-a),name:e-a+"级"})},getContentTypeList:function(){var t=this;Object(n.d)("/api/sc/activityContentType").then(function(e){e.state&&(t.contentTypeList=e.data.filter(function(t){return t.childType.length>0}))})},getTypeList:function(){var t=this;Object(n.d)("/api/sc/activities/types").then(function(e){e.state&&(t.typeList=e.data)})},_detect:function(t){this.params.teacherId=t.userId,this.params.userNo=t.userNo,this.params.teacherName=t.name,this.detectShow=!1}}}}).call(e,a("qqHy"))},a8Fm:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("84rG");var s=a("X7ya"),i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"creatActivity_wrap"},[a("a",{staticClass:"box_flex align_center back_wrap",attrs:{type:"button"},on:{click:function(e){return t.back()}}},[a("i",{staticClass:"maticon back-icon-btn",domProps:{innerHTML:t._s(t.icons("arrow_back"))}},[t._v("arrow_back")]),a("span",{staticClass:"nav-title"},[t._v("返回")])]),t._v(" "),a("div",{staticClass:"big_title"},[t._v("发布活动")]),t._v(" "),a("div",{staticClass:"box_flex flex_wrap"},[a("div",{staticClass:"form-group"},[t._m(0),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.name,expression:"params.name"}],staticClass:"form-control search-input modal-form-style",attrs:{type:"text"},domProps:{value:t.params.name},on:{input:function(e){e.target.composing||t.$set(t.params,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[t._m(1),t._v(" "),a("v-select",{attrs:{options:t.typeList,"options-value":"id","options-label":"name","close-on-select":"",justify:""},model:{value:t.params.typeId,callback:function(e){t.$set(t.params,"typeId",e)},expression:"params.typeId"}})],1)]),t._v(" "),a("div",{staticClass:"box_flex flex_wrap"},[a("div",{staticClass:"form-group"},[t._m(2),t._v(" "),a("v-select",{attrs:{options:t.contentTypeList,"options-value":"id","options-label":"typeName","close-on-select":"",justify:""},on:{afterSelected:t.selectType}})],1),t._v(" "),t.childTypeList.length?a("div",{staticClass:"form-group"},[a("v-select",{attrs:{options:t.childTypeList,"options-value":"id","options-label":"typeName","close-on-select":"",justify:""},on:{afterSelected:t.selectChildType},model:{value:t.params.contentTypeId,callback:function(e){t.$set(t.params,"contentTypeId",e)},expression:"params.contentTypeId"}}),t._v(" "),a("label",{staticClass:"input-label require",staticStyle:{"text-align":"left","padding-left":"10px"}},[t._v("活动积分:"+t._s(t.typePoint))])],1):t._e()]),t._v(" "),a("div",{staticClass:"box_flex flex_wrap"},[a("div",{staticClass:"form-group"},[t._m(3),t._v(" "),a("v-select",{attrs:{options:t.joinList,"options-value":"id","options-label":"name","close-on-select":"",justify:""},model:{value:t.params.organizations[0].organizationId,callback:function(e){t.$set(t.params.organizations[0],"organizationId",e)},expression:"params.organizations[0].organizationId"}})],1),t._v(" "),a("div",{staticClass:"form-group"},[t._m(4),t._v(" "),a("v-select",{attrs:{options:t.briefList,"options-value":"id","options-label":"name","close-on-select":"",justify:""},model:{value:t.params.organizations[1].organizationId,callback:function(e){t.$set(t.params.organizations[1],"organizationId",e)},expression:"params.organizations[1].organizationId"}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"input-label"},[t._v("承办方")]),t._v(" "),a("v-select",{attrs:{options:t.briefList,"options-value":"id","options-label":"name","close-on-select":"",justify:""},model:{value:t.params.organizations[2].organizationId,callback:function(e){t.$set(t.params.organizations[2],"organizationId",e)},expression:"params.organizations[2].organizationId"}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"input-label"},[t._v("协办方")]),t._v(" "),a("v-select",{attrs:{options:t.briefList,"options-value":"id","options-label":"name","close-on-select":"",justify:""},model:{value:t.params.organizations[3].organizationId,callback:function(e){t.$set(t.params.organizations[3],"organizationId",e)},expression:"params.organizations[3].organizationId"}})],1)]),t._v(" "),a("div",{staticClass:"box_flex flex_wrap"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"input-label require"},[t._v("任课老师")]),t._v(" "),a("detect",{staticClass:"form-control search-input modal-form-style",attrs:{id:"teacher",url:"/api/users/search",searchVal:t.params.userNo?t.params.teacherName+"("+t.params.userNo+")":"",type:"query"},on:{afterSelected:t._detect}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"input-label require"},[t._v("上课时间")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.classTime,expression:"params.classTime"}],staticClass:"form-control search-input modal-form-style",attrs:{type:"text"},domProps:{value:t.params.classTime},on:{input:function(e){e.target.composing||t.$set(t.params,"classTime",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"box_flex flex_wrap"},[a("div",{staticClass:"form-group box_flex column"},[a("div",{staticClass:"box_flex"},[a("label",{staticClass:"input-label require"},[t._v("活动封面")]),t._v(" "),a("div",{staticClass:"img-div"},[t.coverImgList.length?a("img",{staticClass:"img",attrs:{src:t.coverImgList[0].base64}}):t._e(),t._v(" "),a("div",{staticClass:"close-img text-center"},[t.coverImgList.length?a("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons("cancel"))},on:{click:function(e){return e.stopPropagation(),t.deleteImg(0,"coverImgList")}}},[t._v("cancel")]):a("i",{staticClass:"maticon add",domProps:{innerHTML:t._s(t.icons("add"))},on:{click:function(e){return e.stopPropagation(),t.selectImage("coverImage")}}},[t._v("add")])])]),t._v(" "),a("input",{staticClass:"form-control search-input modal-form-style",staticStyle:{display:"none"},attrs:{id:"coverImage",type:"file"},on:{change:function(e){return t.onSelectImage("cover")}}})])]),t._v(" "),a("div",{staticClass:"form-group box_flex column"},[a("div",{staticClass:"box_flex"},[a("label",{staticClass:"input-label require"},[t._v("活动图片")]),t._v(" "),a("div",{staticClass:"img-div"},[t.activeImgList.length?a("img",{staticClass:"img",attrs:{src:t.activeImgList[0].base64}}):t._e(),t._v(" "),a("div",{staticClass:"close-img text-center"},[t.activeImgList.length?a("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons("cancel"))},on:{click:function(e){return e.stopPropagation(),t.deleteImg(0,"activeImgList")}}},[t._v("cancel")]):a("i",{staticClass:"maticon add",domProps:{innerHTML:t._s(t.icons("add"))},on:{click:function(e){return e.stopPropagation(),t.selectImage("activeImage")}}},[t._v("add")])])]),t._v(" "),a("input",{staticClass:"form-control search-input modal-form-style",staticStyle:{display:"none"},attrs:{id:"activeImage",type:"file"},on:{change:function(e){return t.onSelectImage("active")}}})])])]),t._v(" "),a("div",{staticClass:"box_flex flex_wrap"},[a("div",{staticClass:"form-group"},[t._m(5),t._v(" "),a("v-textarea",{staticClass:"info-value textarea",staticStyle:{width:"674px"},attrs:{rows:"4","max-length":"1000",autoHeight:!0},model:{value:t.params.introduction,callback:function(e){t.$set(t.params,"introduction",e)},expression:"params.introduction"}})],1)]),t._v(" "),a("div",{staticClass:"box_flex flex_wrap"},[a("div",{staticClass:"form-group"},[t._m(6),t._v(" "),a("v-datepicker",{staticClass:"info-value btn-block",attrs:{format:"yyyy-MM-dd hh:ii",showTime:!1},on:{daySelected:t._valueChangeApplyStart},model:{value:t.params.applyStartTime,callback:function(e){t.$set(t.params,"applyStartTime",e)},expression:"params.applyStartTime"}})],1),t._v(" "),a("div",{staticClass:"form-group"},[t._m(7),t._v(" "),a("v-datepicker",{staticClass:"info-value btn-block",attrs:{format:"yyyy-MM-dd hh:ii",showTime:!1},on:{daySelected:t._valueChangeApplyEnd},model:{value:t.params.applyEndTime,callback:function(e){t.$set(t.params,"applyEndTime",e)},expression:"params.applyEndTime"}})],1),t._v(" "),a("div",{staticClass:"form-group"},[t._m(8),t._v(" "),a("v-datepicker",{staticClass:"info-value btn-block",attrs:{format:"yyyy-MM-dd hh:ii",showTime:!1},on:{daySelected:t._valueChangeStart},model:{value:t.params.startTime,callback:function(e){t.$set(t.params,"startTime",e)},expression:"params.startTime"}})],1),t._v(" "),a("div",{staticClass:"form-group"},[t._m(9),t._v(" "),a("v-datepicker",{staticClass:"info-value btn-block",attrs:{format:"yyyy-MM-dd hh:ii",showTime:!1},on:{daySelected:t._valueChangeEnd},model:{value:t.params.endTime,callback:function(e){t.$set(t.params,"endTime",e)},expression:"params.endTime"}})],1)]),t._v(" "),a("div",{staticClass:"box_flex flex_wrap"},[a("div",{staticClass:"form-group"},[t._m(10),t._v(" "),a("v-textarea",{staticClass:"info-value textarea",staticStyle:{width:"674px"},attrs:{autoHeight:!0,rows:"4","max-length":"50"},model:{value:t.params.place,callback:function(e){t.$set(t.params,"place",e)},expression:"params.place"}})],1)]),t._v(" "),a("div",{staticClass:"box_flex flex_wrap"},[a("div",{staticClass:"form-group"},[t._m(11),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.contactWay,expression:"params.contactWay"}],staticClass:"form-control search-input modal-form-style",attrs:{type:"text"},domProps:{value:t.params.contactWay},on:{input:function(e){e.target.composing||t.$set(t.params,"contactWay",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"input-label require"},[t._v("人数上限")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.params.userLimit,expression:"params.userLimit"}],staticClass:"form-control search-input modal-form-style",attrs:{type:"number"},domProps:{value:t.params.userLimit},on:{input:function(e){e.target.composing||t.$set(t.params,"userLimit",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[t._m(12),t._v(" "),a("v-select",{attrs:{options:t.peopleType,"options-value":"value","options-label":"label",justify:""},on:{afterSelected:t.selectPeople},model:{value:t.params.peopleType,callback:function(e){t.$set(t.params,"peopleType",e)},expression:"params.peopleType"}}),t._v(" "),"ALL"!=t.params.peopleType?a("v-select",{staticStyle:{"margin-left":"20px"},attrs:{options:t.peopleList,"options-value":"code","options-label":"name",multiple:"true",justify:""},model:{value:t.params.studentCode,callback:function(e){t.$set(t.params,"studentCode",e)},expression:"params.studentCode"}}):t._e()],1)]),t._v(" "),a("div",{staticClass:"box_flex flex_wrap"},[a("div",{staticClass:"form-group"},[t._m(13),t._v(" "),a("div",{staticClass:"bool-div",class:t.params.applyAuditNeeded?"active":"",on:{click:function(e){t.params.applyAuditNeeded=!t.params.applyAuditNeeded}}},[a("span")])])]),t._v(" "),a("div",{staticClass:"box_flex flex_center"},[a("button",{staticClass:"btn submit-btn",on:{click:function(e){return t.submitForm()}}},[t._v("发布")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label require"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("活动名称")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label require"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("活动定位")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label require"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("活动类型")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label require"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("发布方")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label require"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("主办方")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label require"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("活动简介")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label require"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("报名开始时间")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label require"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("报名结束时间")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label require"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("活动开始时间")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label require"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("活动结束时间")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label require"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("活动地点")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label require"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("联系方式")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label require"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("面向群体")])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label require"},[e("span",{staticClass:"star"},[this._v("*")]),this._v("报名是否审核")])}]};var n=function(t){a("Gn2t"),a("fv1I")},l=a("C7Lr")(s.a,i,!1,n,"data-v-55b42850",null);e.default=l.exports},eWak:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("kV13");var s=a("C331"),i=a("a8Fm"),n=(i.default,{props:{},components:{createActivity:i.default},created:function(){var t=this,e=localStorage.getItem("lang"),a=this;Object(s.g)(e)&&(this.lang=e),this.columns=[{id:"name",title:this.translate.activityName,className:"text-left",hidden:!1,search:{type:"input",data:{placeholder:""}}},{id:"activityStatus",title:this.translate.activityStatus,className:"text-left",hidden:!1,formatter:function(t){switch(t.status){case"BEFORE_ACTIVITY_START":return"活动未开始";case"ACTIVITY_ING":return"审核中";case"AFTER_ACTIVITY_END":return"活动已结束"}}},{id:"auditStatus",title:this.translate.auditStatus,className:"text-left",hidden:!1,search:{type:"multiSelect",data:{options:this.auditStatusList,optionsLabel:"label",optionsValue:"value"}},formatter:function(t){switch(t.auditStatus){case"WAIT_PUBLISH":return"等待重新发布";case"AUDIT_ING":return"审核中";case"SUCCESS":return"已发布";case"FAIL":return"审核不通过";case"RESCISSORY":return"放弃发布";case"REMOVED":return"已下架"}}},{id:"publisherName",title:this.translate.promulgator,className:"text-left",hidden:!1,formatter:function(t){return t.publisher.name}},{id:"createTime",title:this.translate.publishTime,className:"text-left",hidden:!1},{id:"opt",title:this.translate.opt,className:"text-left",hidden:!1,formatter:function(t,e){var i=[];"WAIT_PUBLISH"!=t.auditStatus&&"AUDIT_ING"!=t.auditStatus||i.push({tag:"a",text:a.translate.show,className:"opt-btn",callback:function(t,e){a.$emit("addBread",{route:"/app/flow?id="+t.activityType.id+"&appType=activityAudit",title:t.activityType.name,appData:t.activityType,entranceType:"activityAudit"})}}),"SUCCESS"===t.auditStatus&&i.push({tag:"a",text:a.translate.down,className:"opt-btn",callback:function(t,e){"SUCCESS"===t.auditStatus&&"AFTER_ACTIVITY_END"!==t.status?confirm(a.translate.downTips)&&Object(s.e)({url:"/api/sc/activities/"+t.id,dataType:"json",type:"post",success:function(t){t.state?(a.$toast(a.translate.deleteSuccessTip),a.url=a.url+"&timestamp="+(new Date).getTime()):a.$toast(a.translate.deleteFailedTip+":"+t.message)}}):a.$toast("因该活动已结束，无法下架")}});return["FAIL","RESCISSORY","REMOVED","WAIT_PUBLISH"].indexOf(t.auditStatus)>=0&&i.push({tag:"a",text:"删除",className:"opt-btn",callback:function(t,e){confirm("是否删除该活动")&&Object(s.e)({url:"/api/sc/activities/delete/"+t.id,dataType:"json",type:"post",success:function(t){t.state?(a.$toast("删除成功"),a.url=a.url+"&timestamp="+(new Date).getTime()):a.$toast(t.message)}})}}),i}}],this.importParams.importBtnType=[{url:"/sc/activities/batchActivityTemplate",method:"get",isShowBtn:!0,name:"增量导入",success:function(e){e.state&&(t.timeStamp=(new Date).getTime(),t.showImport=!1)}}]},data:function(){return{columns:[],url:"/table-data/sc/activities/managements/pages?timestamp=",timestamp:"",ActivityAuditStatus:[],lang:"zh-cn",showAdd:!1,auditStatusList:[{value:"WAIT_PUBLISH",label:"等待重新发布"},{value:"AUDIT_ING",label:"审核中"},{value:"SUCCESS",label:"已发布"},{value:"FAIL",label:"审核不通过"},{value:"RESCISSORY",label:"放弃发布"},{value:"REMOVED",label:"已下架"}],showImport:!1,importParams:{parentPageTitle:"活动管理",downloadTemplateUrl:"/sc/activities/getActivityImportTemplate",downloadErrorTemplateUrl:"/sc/activities/getActivityErrorTemplate",checkTemplateUrl:"/sc/activities/activityTemplate/excel",templateName:"批量新增活动管理",importBtnType:null}}},computed:{translate:function(){return Object(s.g)(this.lang).activityDown}},methods:{back:function(){this.showAdd=!1,this.timestamp=(new Date).getTime()}}}),l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.showAdd||t.showImport?t.showImport?a("v-import",t._b({on:{backParentPage:function(e){t.showImport=!1}}},"v-import",t.importParams,!1)):a("create-activity",{on:{back:t.back}}):a("div",{staticClass:"activity-down"},[a("div",{staticClass:"content text-center"},[a("v-table",{ref:"activityDownTable",attrs:{title:t.translate.title,url:t.url+t.timestamp,pagesize:"10",idField:"id",columns:t.columns,multiple:!1,order:!0,search:!1}},[a("div",{staticClass:"btn-group pull-right",attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[a("button",{staticClass:"btn btn-bgColor-style clearBtnBorder",on:{click:function(e){t.showImport=!0}}},[t._v("批量导入")]),t._v(" "),a("button",{staticClass:"btn btn-bgColor-style clearBtnBorder",on:{click:function(e){t.showAdd=!0}}},[t._v("发布活动")])])])],1)])},staticRenderFns:[]};var r=a("C7Lr")(n,l,!1,function(t){a("Kchf")},null,null);e.default=r.exports},fv1I:function(t,e){}});