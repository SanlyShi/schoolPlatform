webpackJsonp([243],{"4kyQ":function(e,t){},"C2J+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("kV13");var s=a("C331"),i={props:{data:{default:null},role:{default:""}},created:function(){var e=localStorage.getItem("lang");switch(Object(s.g)(e)&&(this.lang=e),this.role){case"school":this.definedSearch.reqSource="school";break;case"college":this.definedSearch.reqSource="college";break;case"myManage":this.definedSearch.reqSource="instructor"}this.columns=[{id:"modifiedUserNo",title:"学号",width:120,className:"text-left",hidden:!1,search:{type:"number"},formatter:function(e){return e.modifiedUser.userNo}},{id:"modifiedUserName",title:"姓名",width:80,className:"text-left",hidden:!1,search:{type:"value"},formatter:function(e){return e.modifiedUser.name}},{id:"columnName",title:"修改字段",width:120,className:"text-left",hidden:!1,search:{type:"value"}},{id:"source",title:"修改来源",width:130,className:"text-left",hidden:!1,search:{type:"input"}},{id:"reviseUserName",title:"修改人姓名",width:80,className:"text-left",hidden:!1,search:{type:"value"},formatter:function(e){return e.reviseUser.name}},{id:"reviseUserNo",title:"修改人工号",width:120,className:"text-left",hidden:!1,search:{type:"value"},formatter:function(e){return e.reviseUser.userNo}},{id:"createTime",title:"修改时间",width:110,className:"text-left",hidden:!1},{id:"valueBefore",title:"修改前数据",width:120,className:"text-left",hidden:!1,search:{type:"value"}},{id:"valueAfter",title:"修改后数据",width:120,className:"text-left",hidden:!1,search:{type:"value"}}]},data:function(){return{definedSearch:{modifiedUserNo:"",modifiedUserName:"",columnName:"",reviseUserName:"",reviseUserNo:"",valueBefore:"",valueAfter:"",source:""},columns:[],url:"/table-data/document/logs/page",showAddModal:!1,department:{},newDepartment:{name:""},modalType:"",isChange:!1,isDisabled:!1,lang:"zh-cn"}},computed:{translate:function(){return Object(s.g)(this.lang).departmentManage}},methods:{_verifyLength:function(){var e=0,t=0,a=0;if(!this.newDepartment.name)return!1;this.isChange=!0;for(var s=0;s<this.newDepartment.name.length;s++)this.newDepartment.name.charCodeAt(s)>127||94===this.newDepartment.name.charCodeAt(s)?e++:t+=.5,25===parseInt(e+t)&&(a=s);parseInt(e+t)>25&&(this.newDepartment.name=this.newDepartment.name.slice(0,a+1))},editDepartment:function(){var e=this;e.isDisabled=!0,Object(s.e)({url:"/api/department/"+this.newDepartment.id,dataType:"json",data:{name:this.newDepartment.name},type:"post",success:function(t){e.isDisabled=!1,t.state?(e.department.id=e.newDepartment.id,e.department.name=e.newDepartment.name,e.showAddModal=!1,e.$toast(e.translate.editSuccessTip)):e.$toast(e.translate.editFailedTip+":"+t.message)}})},addModal:function(){this.newDepartment={},this.modalType=this.translate.addNew,this.showAddModal=!0},addDepartment:function(){var e=this;this.newDepartment.name?(e.isDisabled=!0,Object(s.e)({url:"/api/department",dataType:"json",data:{name:this.newDepartment.name},type:"post",success:function(t){e.isDisabled=!1,t.state?(e.url="/table-data/department?timestamp="+(new Date).getTime(),e.showAddModal=!1,e.$toast(e.translate.addSuccessTip)):e.$toast(e.translate.addFailedTip+":"+t.message)}})):e.$toast("请输入部门名称")},changeRole:function(e){if(e)return!1;this.modalType===this.translate.addNew?this.addDepartment():this.modalType===this.translate.edit&&this.editDepartment()},cancleModal:function(){this.isChange?confirm(this.translate.cancelConfirmTip)&&(this.showAddModal=!1):this.showAddModal=!1}}},n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container-fluid",attrs:{id:"org-department-page"}},[t("div",{staticClass:"row text-center"},[t("v-table",{attrs:{title:"",url:this.url,pagesize:"10",idField:"id",columns:this.columns,multiple:!1,order:!0,search:!0,searchParams:this.definedSearch}})],1)])},staticRenderFns:[]};var r=a("C7Lr")(i,n,!1,function(e){a("4kyQ")},null,null);t.default=r.exports}});