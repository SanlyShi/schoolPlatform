webpackJsonp([3],{"2jzU":function(t,e){},"6hO4":function(t,e,a){var s={"./btn_delete_red@2x.png":"XE95","./btn_fold@2x.png":"FPbH","./btn_unfold@2x.png":"h0CT"};function i(t){return a(n(t))}function n(t){var e=s[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}i.keys=function(){return Object.keys(s)},i.resolve=n,t.exports=i,i.id="6hO4"},"9Aop":function(t,e){},BchM:function(t,e){},FPbH:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAAXNSR0IArs4c6QAAADxQTFRFTXn2WoP3X4f3jKj6oLj6obj6orn6o7r6pLr6pLv6pbv6prz6p7z6p736qL36qb76qr/6q7/67PH/////qON9fgAAAFlJREFUKM/V0zkSgEAIRNEecN9G6fvf1cSyHBVi/ekLaUBTwUuiRliCUzIo3BTiY0Dfb6t8W8nas0ySTWCOLjxqnzbzrLvbxEt9aSOLhl8eIhxYOM1w1NE77JQLBdmMh1XyAAAAAElFTkSuQmCC"},JQrh:function(t,e){},JRsF:function(t,e,a){t.exports=a.p+"static/img/loading.2cbb5e9.gif"},PmBO:function(t,e){},SSkY:function(t,e){},XE95:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAJrElEQVR4Xu2be7QVVR3Hf785sweIK/gIy8cSepll3BQfRUBKqZi2zNlzB24sb11TWUsKW/nIypKLyx62tIcmrgWat1Akh/ntaJUJUiEhuUTQMNOWVmqgoWQ8I87MmV9rbt3WPefMnLPPzHBEF/Pv/f7297c/9zd779l7H4QDT0MCeIBPYwIHADWpkLYC4jlzhgWbN18KAJ3AbLRcvYiMiM+aw4ffgnffvaPl+AwBbQVUtu1FAHBBhjyrQhBgjVBqSt52dOLbCiiw7R0McJBOYs00wjQPQ897tZku79/bDei3DDA5b9IA8DdBNBYRuYC29p9ZjLu7x4V7936PETsBoPUxiPm/Y1CpdBV63uP7Gk7cflsrqB0dKtrjAKD9aZov+r/bjvaaVhC7bimoVGYj81lQ0AzUjo418djJiCtEqTQfPa/SSNsUUCjl/Ig5Xty94R4D8TaTaHZmQNzbOzzcsWMHM4s3HJ14hkIMzFGjRmF//7/T+tewgrinZ2S4e3cMqPUp+XVAFBEjc+TIUbho0e5MgOKgwLbvZQD3ddDfllNEAE8oNT3zKxYHsut2hGE4jxGrBmlkHskAb245q9cgAAG2MuLQKtmJzCtM05yLnrcrF6C04NC23Qjg3tegvy1bGgDTTaW8lgPzrKRDxzk/iiKVxbTdMYZh2Kbv/zSLb9NpPrWCpDw3Yv55FtN2xxiIHzeJfpHFNzOgwLbPZIAVWUzbHYMAZwmlHsjimx1QV9fpXKn8Jotpu2OwVJoqli5dlcU3OyApJzHzmiym7Y5BxMmC6KEsvpkBlaU8BZgfyWLa9hjEUy2idVl8MwNi1z0hCMPHspi2O0aY5olZN9iyA3Kc44Mo+kNLnUXcAAB3AEAFAXqZ+YM68Yj4MAP0A7MJiBcB84k6cYMaYRjvQ99/spWYQW12QDNmHBuUy3/SNUXEtWZn52nY1xfGMdzXZ4QbNy5n5jMatYGIK83OzmnY1xcNxM2aJcKtW1frwo1jhGEci77/jG6uQ3XZAXV3jwv27v2rrqmB6JpES4fqA8eZxlF0f0NAhnG28P3lQzWh40yPougnut5i2LC34ZIlz+nqiwHkukcFYbhJ2xRxokX08FA9u+67gzB8ulEbwjSPQ8+rqtTAdSdyGK7V9RameTR63mZdfVGAxgRh+LKuKZrmFOF5VcsClvLtAfOfGwJCfAcS/aWq8rq6pnClslrXW5jm4eh5r+jqiwHU23twsH37P3VNEfEjgqhqYcmue0wQhs83qaCx6HkvVAGScioz/1rXW4wefQj292/T1RcDqKdnZLBrV8OtghqjuuU+S3lEwPxikwo6EoleqgLU4meO6OjoaLQp1nAMzEI1jmHXtYIw3KsbbxjGuabv31czBjV9TZNej9BxzomiSPvjU4wZY+GCBYFursVUEDMGUg5MvTqPgfgJk+hnVYBmzjwk2LOn4fm6GDHiUFy8uOpVDqU8L2JepuMbawSRkfWYOvM0HxsHth0wgKmTqGEYXabv+zUV1BGE4c4mY9BBtbt+oeM4URRVLRnS2kCAUCiV+dAhHyAp/8XMI7QAIXabRFVrl/jUJNi+fU9DQKNHj6g9dQilnBExL9HxRcQ9guhNOtokTV5A25h5tI65YRg9pu/fVVNBpSAMB1bWaY8wTbP2cC90nAuiKIrvGjV9EHG7IDq4qTBFkA+Qbb+iu3FvIF5oEvXX5lG27YZXWCyl6nIMpeyNmO/U6XS8YS+UGqOj3RcV9CIzH6FjbiBeYhLdXqsNpCynHUzGB3uCyKqNCaW8OGJeqOOLiC8JoiN1tIUDKkv5HDCP1TI3jNmW79+WACh1HEsbP8qOcylE0XwtX8TnLaJxWtoEUa5XrCzlM8D8Ti1zxMssolvqADW4locAO4RSdWNcWco5wHyzpu+zFtG7tLSFA7LtPwLAe3TM0TCuEL7/nYQK+gczH5pY3oivCqLD6mIc53KOopt0fAHgKUup92pq62R5K+hxYH6/jjkiXi2Ivp0AaAszH54C6GVB9JaEmC8y8w06voD4e4voBC1t0RUUSLmOmU/WMUfD+Krw/a8ndHYTMx+VAmizIDo6oYKu4Si6XssX8VFBdIqOtvBBOrDttQwwUcccEfsE0bxabcOBPmWADaScy8x9Wr4AvxNKfUhHuy8ArWKA03TMEfF6QfS1BEDpAz1i4gAb2Pb1DHCNli/Ag0Kp03W0xQOS8oFme8qDpoh4gyD6UgKgp4D5uMQOID5tEdVNAoGU32Lmq3U6He9pC6IzdbTFA7Lt+xjgYzrmiHiTILqyDpBtbwSA8SltPGEpFd+prnoCKW9k5iu0fAF+KZQ6R0dbPCAplzHzeTrmaBg3C9//fEIFbUg9xkF8zCKakDBIf5+j6DItX4BlQqnzdbT7ApDHzF065gbifJPoswnV8AgzJ84yiLhOEJ1aGxNKeWvE3PDy5ZBXe6kgynxDLt86yLYXA8AndQABwEJLqVkJgB5i5sRZJj5LE0STEl7LBQBwiabvPZZSMzW1dbJ8gKT8ETB/Sssc8U6L6DMJgB5k5g8nljfiakFUN0uWpfwhMF+o6ftji+jTWtoEUV5AC4H5Yk3zuyyleuoA2fZKBvhoyvv/K6FU3clrS787Q7zdItKttmIrqKVL5ohLLKK61zGQ8n5mnpZSQcsF0dkJA/s9wNyt84/RuSzeqJ1cFRQ4TiuzySqh1NSEzq4H5rqZakCX8h0V2Lb+AjVl9tSBO5CCrjBJ1+J6JDRNcwJ63hODbZUd5wPIvDbtonp80ZsBJg09smbXHR+G4QbdwwI0jBuF71+VtZ95AX2Dmb+sa44AWxjxOiyVNnIUnYTM16Ztdfx/mgbYxojz0DDWcxSNH4gBqPvCT8sBEb8piL6im2OtLh8g257HANdmNW9HHAJcJ5Sam9UrHyDH0d52yJpg3ri0bRbddvMBklJ/40o3o4J1aRt1uja5AJVt+wsAULeNqmveJt3lllLfzeqVF1D8bfWDrOZtivucpdStWb1yAWrlCDhrgnnjjIQj71bazAWIpZwQMK9vxbDdWoF4EhLFt2szPfkAMWPoOC8wc93GeqZsCg5CxE2m7x+T9epLnE4uQHED+/lAnWuALgRQfNMsrFTWpG16FVwU2s3Fm21mqTQZPa+sHZQgzF1BcZvsum8NKpWVwHx8nmQKi0V8UpRKZ6Dn/T1vm4UA+h+kjkqlEm+mX6T7IZk3+dr4+DYZIt5RKpWubPZbVF3vwgANGrKUYwMAGwBOxvijcl//5h4xvga4BQAeFQAKiRpeK9YFM6grHFCrCezv+gOAmvyH/gMW6/p2xartgAAAAABJRU5ErkJggg=="},cJZF:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("a3Yh"),i=a.n(s),n=a("3cXf"),o=a.n(n),c=a("qqHy"),r=a.n(c),l=a("C331"),u=a("tjnL"),d=a("JUJb"),h=a("Q8Fq"),p=a.n(h),m=a("NcNL"),f=a.n(m),b=a("IHPB"),v=a.n(b),g={components:{},props:{tableData:{default:null},columns:{default:[{value:"title",label:"字段名称",align:"left",width:160},{value:"doneText",label:"已填写",align:"center",width:""},{value:"notDoneText",label:"未填写",align:"center",width:""}]}},data:function(){return{}},computed:{newTableData:function(){return JSON.parse(o()(this.tableData))}},watch:{},created:function(){},mounted:function(){},methods:{expend:function(t){var e=this.$refs.formTableBox;this.newTableData.map(function(a){t.name!==a.name?(e.toggleRowExpansion(a,!1),a.expansion=!1):a.expansion=!a.expansion}),e.toggleRowExpansion(t)}}},C={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"formTable"}},[s("el-table",{ref:"formTableBox",staticStyle:{width:"100%"},attrs:{data:t.newTableData,stripe:""}},[s("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-table",{staticClass:"inner-table",staticStyle:{width:"100%","margin-left":"64px"},attrs:{data:e.row.children,"show-header":!1}},[s("el-table-column",{attrs:{prop:"name",label:"字段名称","header-align":"left",align:"left",width:"180"}}),t._v(" "),s("el-table-column",{attrs:{prop:"text",label:"已填写","header-align":"center",align:"center"}}),t._v(" "),s("el-table-column",{attrs:{prop:"","header-align":"center",align:"center",label:"未填写"}})],1)]}}])}),t._v(" "),s("el-table-column",{attrs:{type:"index",label:"#","header-align":"left",align:"left",width:"64"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{attrs:{sytle:"postions: relative;"}},[e.row.children&&e.row.children.length>0?s("img",{staticClass:"icon-fold",attrs:{src:a("6hO4")("./btn_"+(e.row.expansion?"unfold":"fold")+"@2x.png"),alt:""},on:{click:function(a){return t.expend(e.row)}}}):t._e(),t._v(" "),s("span",[t._v(t._s(e.$index+1))])])]}}])}),t._v(" "),t._l(t.columns,function(t,e){return s("el-table-column",{key:e,attrs:{prop:t.value,label:t.label,"header-align":t.align,align:t.align,width:t.width}})})],2)],1)},staticRenderFns:[]};var _=a("C7Lr")(g,C,!1,function(t){a("PmBO")},null,null).exports,y=(Object,{components:{},props:{statistics:{type:Object,default:function(){return null}},height:{default:24}},data:function(){return{barCircleWidth:8,newBarLength:800,colorList:["#30BA9F","#25C6DA","#FF8BAB","#FFB748","#FFEE5A"]}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{getColor:function(t){return"未填写"===this.statistics.details[t].name||"未上传"===this.statistics.details[t].name?"#F8F9FB":this.colorList[t%5]}}}),w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"count-bar-container",style:"height:"+t.height+"px"},[t.statistics.details?t._l(t.statistics.details,function(e,s){return a("div",{key:s,staticClass:"bar-container",style:"width:"+e.percent},[a("el-popover",{style:"width:"+e.percent,attrs:{placement:"top-start",trigger:"hover"}},[a("div",{staticClass:"pop-cnt"},[a("h5",[a("span",{staticClass:"dot",style:{background:t.getColor(s)}}),t._v(t._s(e.name))]),t._v(" "),a("div",[a("span",{staticClass:"count-num"},[t._v(t._s(e.count))]),t._v(" 人("+t._s(e.percent)+")")])]),t._v(" "),a("p",{staticClass:"count-bar",style:{background:t.getColor(s)},attrs:{slot:"reference"},slot:"reference"})]),t._v(" "),a("p",{staticClass:"count-bar-text",style:"width:calc("+e.percent+" - 20px)",attrs:{title:e.name+" "+e.count+"人"}},[t._v(t._s(e.name)+": "),a("span",{staticClass:"count-num"},[t._v(t._s(e.count))]),t._v("人")])],1)}):a("div",{staticClass:"bar-container bg-gray",style:"width:"+t.statistics.percent},[a("el-popover",{style:"width:"+t.statistics.percent,attrs:{placement:"top-start",trigger:"hover"}},[a("div",{staticClass:"pop-cnt"},[a("h5",[a("span",{staticClass:"dot",staticStyle:{background:"#FFCB44"}}),t._v(t._s(t.statistics.name))]),t._v(" "),a("div",[a("span",{staticClass:"count-num"},[t._v(t._s(t.statistics.count))]),t._v(" 人("+t._s(t.statistics.percent)+")")])]),t._v(" "),a("p",{staticClass:"count-bar",style:"background: #FFCB44; height: "+t.height+"px;",attrs:{slot:"reference"},slot:"reference"})]),t._v(" "),a("p",{staticClass:"count-bar-text",attrs:{title:t.statistics.count+"人"}},[a("span",{staticClass:"count-num"},[t._v(t._s(t.statistics.count))]),t._v("人")])],1)],2)},staticRenderFns:[]};var x=a("C7Lr")(y,w,!1,function(t){a("SSkY")},"data-v-25a09c9a",null).exports,I={components:{barChart:x},props:{tableData:{default:null},columns:{default:[{value:"title",label:"字段名称",align:"left",width:160},{value:"chart",label:"图表",align:"left",width:""}]}},data:function(){return{}},computed:{newTableData:function(){return JSON.parse(o()(this.tableData))}},watch:{},created:function(){},mounted:function(){},methods:{expend:function(t){var e=this.$refs.formChartBox;this.newTableData.map(function(a){t.name!==a.name?(e.toggleRowExpansion(a,!1),a.expansion=!1):a.expansion=!a.expansion}),e.toggleRowExpansion(t)}}},k={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"formChart"}},[s("el-table",{ref:"formChartBox",staticStyle:{width:"100%"},attrs:{data:t.newTableData}},[s("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("el-table",{staticClass:"inner-table",staticStyle:{width:"100%","margin-left":"35px"},attrs:{data:e.row.children,"show-header":!1}},[s("el-table-column",{attrs:{prop:"name",label:"字段","header-align":"left",align:"left",width:"180"}}),t._v(" "),s("el-table-column",{attrs:{prop:"",label:"图表","header-align":"left",align:"left"},scopedSlots:t._u([{key:"default",fn:function(t){return[s("bar-chart",{attrs:{statistics:t.row,height:16}})]}}],null,!0)})],1)]}}])}),t._v(" "),s("el-table-column",{attrs:{type:"index",label:"","header-align":"right",align:"right",width:"36"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.children&&e.row.children.length>0?s("img",{staticClass:"icon-fold",attrs:{src:a("6hO4")("./btn_"+(e.row.expansion?"unfold":"fold")+"@2x.png"),alt:""},on:{click:function(a){return t.expend(e.row)}}}):t._e()]}}])}),t._v(" "),t._l(t.columns,function(e,a){return s("el-table-column",{key:a,attrs:{prop:e.value,label:e.label,"header-align":"left",align:"left",width:e.width},scopedSlots:t._u([{key:"default",fn:function(a){return["chart"==e.value?s("bar-chart",{attrs:{statistics:a.row}}):s("span",[t._v(t._s(a.row[e.value]))])]}}],null,!0)})})],2)],1)},staticRenderFns:[]};var S=a("C7Lr")(I,k,!1,function(t){a("BchM")},null,null).exports,D={components:{formTable:_,formChart:S},props:{curBusiness:{default:null},playerId:{default:null},searchParams:{default:null}},data:function(){return{allChecked:!0,showTable:!1,dimensionFields:[],targetFields:[],inputVisible:{dimensionFields:!1,targetFields:!1},inputValue:{dimensionFields:"",targetFields:""},columns:{word:[],chart:[]},tabIndex:"statistics",selectIndex:{statistics:"word",dimensionality:"word"},treeData:[{name:"0",title:"全选",children:[]}],filterData:[],treeChecked:[],defaultProps:{children:"children",label:"title"},isLoading:{statistics:!0,dimensionality:!0},tableData:{statistics:[],newStatistics:[],dimensionality:[]}}},computed:{},watch:{},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){t.getFields(),t.getStatisticsData()})},methods:{getFields:function(){var t=this;Object(l.d)("/api/statistics/formEngine/business/"+this.curBusiness.id+"/statistics/components?playerId="+this.playerId).then(function(e){if(e.state){t.treeData[0].children=e.data,t.$set(t.treeData[0],"children",e.data);var a=e.data.map(function(e,a){return e.value=e.title,e.joinStatistics&&t.filterData.push(e),e.name});t.$set(t,"treeChecked",a),t.$nextTick(function(){t.$refs.formTree.setCheckedKeys(t.treeChecked)}),t.$forceUpdate()}else t.$toast(e.message)})},getStatisticsData:function(){var t=this;Object(l.d)("/api/statistics/formEngine/business/"+this.curBusiness.id+"/statistics?playerId="+this.playerId+this.searchParams,{},"post").then(function(e){e.state?(t.tableData.statistics=e.data,t.tableData.statistics.forEach(function(e,a){e.isChecked=!0,t.computeCount(e),t.hasShowMoreData(e.name)&&(e.children=[],e.details.map(function(t){"未填写"===t.name&&"未上传"===t.name||e.children.push(t)}))}),t.tableData.newStatistics=t.tableData.statistics,t.isLoading.statistics=!1):t.$toast(e.message)})},getDimensionData:function(){var t=this,e=this.getDimensionParams();if(e){this.showTable=!0;var a="/api/statistics/formEngine/business/"+this.curBusiness.id+"/statistics/dimension?playerId="+this.playerId+this.searchParams;Object(l.d)(a,e,"post").then(function(a){if(a.state){if(t.tableData.dimensionality=a.data,t.tableData.dimensionality.forEach(function(a){for(var s in a.dimension)a[s]=a.dimension[s];if(t.computeCount(a),t.hasShowMoreData(e.targetFields)){a.details.map(function(t){a[t.name]=t.text});a.s}}),t.hasShowMoreData(e.targetFields)){var s=[];t.tableData.dimensionality[0].details.map(function(t){s.push({value:t.name,label:t.name,align:"left",width:140})}),t.columns.word=[].concat(v()(t.columns.word),s)}t.isLoading.dimensionality=!1}else t.$toast(a.message)})}},computeCount:function(t){var e=this,a=(t.details.length,0),s=t.details.reduce(function(t,e){return t+e.count},0);t.details.forEach(function(t){t.count=t.count||0,"未填写"!==t.name&&"未上传"!==t.name&&(a+=t.count);var i=e.computePercent(s,t.count);e.$set(t,"percent",i),e.$set(t,"text",t.count+"("+i+")")});var i=Number(s-a);this.$set(t,"doneText",a+"("+this.computePercent(s,a)+")"),this.$set(t,"notDoneText",i+"("+this.computePercent(s,i)+")")},computePercent:function(t,e){var a=0;return t>0&&(a=e/t),Number(100*a).toFixed(2)+"%"},exportStatistics:function(){var t=this.curBusiness.appName+"统计"+this.getCurrentDate(),e="?playerId="+this.playerId+"&fileName="+t+this.searchParams;window.location.href="/downloads/statistics/formEngine/business/"+this.curBusiness.id+"/statistics/excel"+e},exportDimension:function(){var t=this.getDimensionParams();if(t){var e=this.curBusiness.appName+"多维统计"+this.getCurrentDate(),a="?playerId="+this.playerId+"&fileName="+e+"&dimensionFields="+t.dimensionFields+"&targetFields="+t.targetFields+this.searchParams;window.location.href="/downloads/statistics/formEngine/business/"+this.curBusiness.id+"/statistics/dimension/excel"+a}},getCurrentDate:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate();return a<10&&(a="0"+a),s<10&&(s="0"+s),""+e+a+s},getDimensionParams:function(){var t=this,e=[];if(0==this.dimensionFields.length)return this.$toast("维度不能为空"),!1;if(0==this.targetFields.length)return this.$toast("指标不能为空"),!1;var a=[];this.dimensionFields.map(function(s){var i=t.filterData.find(function(t){return t.value===s});a.push({value:i.name,label:s,width:160}),e.push(i.name)});var s={dimensionFields:e,targetFields:this.treeData[0].children.find(function(e){return e.value===t.targetFields[0]}).name},i=[{value:"doneText",label:this.targetFields[0]+"(已填写)",align:"center",width:a.length>2?180:""},{value:"notDoneText",label:this.targetFields[0]+"(未填写)",align:"center",width:a.length>2?180:""}];this.hasShowMoreData(s.targetFields)&&(i=[]);var n=[{value:"chart",label:this.targetFields[0],width:a.length>2?400:""}];return this.columns.word=[].concat(a,v()(i)),this.columns.chart=[].concat(a,n),s},hasShowMoreData:function(t){return t.indexOf("radio")>-1||t.indexOf("checkbox")>-1||t.indexOf("address")>-1||t.indexOf("datetime")>-1||t.indexOf("select")>-1},_back:function(){this.$emit("back")},handleClose:function(t,e){this.showTable=!1,this.isLoading.dimensionality=!0,this[e].splice(t,1)},showInput:function(t){var e=this;this.inputVisible[t]=!0,this.$nextTick(function(a){e.$refs[t+"Input"].focus()})},handleSelect:function(t,e){this.handleInputConfirm(e)},handleInputConfirm:function(t){var e=this;this.showTable=!1,this.isLoading.dimensionality=!0,setTimeout(function(){var a=e.inputValue[t];e[t].findIndex(function(t){return t===a})>-1?e.$toast("您已选择了该字段"):a&&e[t].push(a),e.inputVisible[t]=!1,e.inputValue[t]=""},100)},handleTreeCheck:function(t){var e=this;if("0"===t.name){var a=!0;this.tableData.newStatistics.length===this.tableData.statistics.length&&(a=!this.allChecked),this.allChecked=a,this.tableData.statistics.forEach(function(t){e.$set(t,"isChecked",a)}),this.tableData.newStatistics=this.allChecked?this.tableData.statistics:[]}else{var s=this.tableData.statistics.find(function(e){return e.name==t.name});this.$set(s,"isChecked",!s.isChecked),this.tableData.newStatistics=this.tableData.statistics.filter(function(t){return t.isChecked})}}}},A={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"formStatistics"}},[s("a",{staticClass:"box_flex align_center back_wrap",attrs:{type:"button"},on:{click:function(e){return t._back()}}},[s("i",{staticClass:"maticon back-icon-btn",domProps:{innerHTML:t._s(t.icons("arrow_back"))}},[t._v("arrow_back")]),s("span",{staticClass:"nav-title"},[t._v("返回")])]),t._v(" "),s("div",{staticClass:"body"},[s("div",{staticClass:"tab-wrap"},[s("div",{staticClass:"tab-item",class:{on:"statistics"==t.tabIndex},on:{click:function(e){t.tabIndex="statistics"}}},[t._v("统计")]),t._v(" "),s("div",{staticClass:"tab-item",class:{on:"dimensionality"==t.tabIndex},on:{click:function(e){t.tabIndex="dimensionality"}}},[t._v("多维统计")])]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"left-body"},[s("h1",[t._v("数据源")]),t._v(" "),s("div",{staticClass:"form-title"},[t._v(t._s(t.curBusiness.appName))]),t._v(" "),s("div",{staticClass:"tree"},[s("h1",[t._v("字段")]),t._v(" "),s("el-tree",{directives:[{name:"show",rawName:"v-show",value:"statistics"==t.tabIndex,expression:"tabIndex == 'statistics'"}],ref:"formTree",attrs:{data:t.treeData,"show-checkbox":"","node-key":"name","default-expand-all":!0,"default-checked-keys":t.treeChecked,props:t.defaultProps},on:{check:t.handleTreeCheck}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"dimensionality"==t.tabIndex,expression:"tabIndex == 'dimensionality'"}],staticClass:"my-tree"},t._l(t.treeData[0].children,function(e,a){return s("div",{key:a,staticClass:"box_flex my-tree-wrap"},[s("i",{staticClass:"my-tree-line"}),t._v(" "),s("span",{staticClass:"my-tree-item"},[t._v(t._s(e.title))])])}),0)],1)]),t._v(" "),s("div",{staticClass:"right-body"},["statistics"==t.tabIndex?s("div",[s("div",{staticClass:"statistic-select box_flex flex_between"},[s("div",{staticClass:"radio-group"},[s("div",{staticClass:"radio-button",class:{on:"chart"==t.selectIndex[t.tabIndex]},on:{click:function(e){t.selectIndex[t.tabIndex]="chart"}}},[t._v("图表")]),t._v(" "),s("div",{staticClass:"radio-button",class:{on:"word"==t.selectIndex[t.tabIndex]},on:{click:function(e){t.selectIndex[t.tabIndex]="word"}}},[t._v("文字")])]),t._v(" "),s("button",{staticClass:"btn batch-add-btn btn-bgColor-style",on:{click:t.exportStatistics}},[s("i",{staticClass:"el-icon-download"}),t._v(" 导出\n            ")])]),t._v(" "),t.isLoading.statistics?s("div",{staticClass:"form-loading"},[s("img",{attrs:{src:a("JRsF"),alt:""}}),t._v(" "),s("p",{staticClass:"loading-txt"},[t._v("加载中...")])]):t._e(),t._v(" "),s("form-chart",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading.statistics&&"chart"==t.selectIndex[t.tabIndex],expression:"!isLoading.statistics&&selectIndex[tabIndex]=='chart'"}],attrs:{tableData:t.tableData.newStatistics}}),t._v(" "),s("form-table",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading.statistics&&"word"==t.selectIndex[t.tabIndex],expression:"!isLoading.statistics&&selectIndex[tabIndex]=='word'"}],attrs:{tableData:t.tableData.newStatistics}})],1):s("div",[s("div",{staticClass:"dimensionality-select"},[s("div",{staticClass:"select-box mb-16"},[s("label",[t._v("维度")]),t._v(" "),t._l(t.dimensionFields,function(e,a){return s("el-tag",{key:a,attrs:{closable:"","disable-transitions":!1},on:{close:function(e){return t.handleClose(a,"dimensionFields")}}},[t._v("\n                "+t._s(e.length>4?e.substring(0,4)+"...":e)+"\n              ")])}),t._v(" "),t.inputVisible.dimensionFields?s("el-select",{ref:"dimensionFieldsInput",staticClass:"input-new-tag",attrs:{size:"small",filterable:"",placeholder:"请选择"},on:{change:function(e){return t.handleSelect(e,"dimensionFields")},blur:function(e){return t.handleInputConfirm("dimensionFields")}},model:{value:t.inputValue.dimensionFields,callback:function(e){t.$set(t.inputValue,"dimensionFields",e)},expression:"inputValue.dimensionFields"}},t._l(t.filterData,function(t){return s("el-option",{key:t.value,attrs:{label:t.value,value:t.value}})}),1):t.dimensionFields.length<5?s("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(e){return t.showInput("dimensionFields")}}},[t._v("+ 添加")]):t._e()],2),t._v(" "),s("div",{staticClass:"box_flex align_center flex_between flex_wrap"},[s("div",{staticClass:"box_flex align_center mb-16"},[s("div",{staticClass:"select-box"},[s("label",[t._v("指标")]),t._v(" "),t._l(t.targetFields,function(e,a){return s("el-tag",{key:a,attrs:{closable:"","disable-transitions":!1},on:{close:function(e){return t.handleClose(a,"targetFields")}}},[t._v("\n                    "+t._s(e)+"\n                  ")])}),t._v(" "),t.inputVisible.targetFields?s("el-select",{ref:"targetFieldsInput",staticClass:"input-new-tag",attrs:{size:"small",filterable:"",placeholder:"请选择"},on:{change:function(e){return t.handleSelect(e,"targetFields")},blur:function(e){return t.handleInputConfirm("targetFields")}},model:{value:t.inputValue.targetFields,callback:function(e){t.$set(t.inputValue,"targetFields",e)},expression:"inputValue.targetFields"}},t._l(t.treeData[0].children,function(t){return s("el-option",{key:t.value,attrs:{label:t.value,value:t.value}})}),1):0==t.targetFields.length?s("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(e){return t.showInput("targetFields")}}},[t._v("+ 添加")]):t._e()],2),t._v(" "),s("button",{staticClass:"btn batch-add-btn btn-bgColor-style",on:{click:t.getDimensionData}},[t._v("\n                  统计\n                ")]),t._v(" "),s("button",{staticClass:"btn batch-add-btn btn-bgColor-style",on:{click:t.exportDimension}},[s("i",{staticClass:"el-icon-download"}),t._v(" 导出\n                ")])]),t._v(" "),s("div",{staticClass:"radio-group mb-16"},[s("div",{staticClass:"radio-button",class:{on:"chart"==t.selectIndex[t.tabIndex]},on:{click:function(e){t.selectIndex[t.tabIndex]="chart"}}},[t._v("图表")]),t._v(" "),s("div",{staticClass:"radio-button",class:{on:"word"==t.selectIndex[t.tabIndex]},on:{click:function(e){t.selectIndex[t.tabIndex]="word"}}},[t._v("文字")])])]),t._v(" "),t.showTable?[t.isLoading.dimensionality?s("div",{staticClass:"form-loading"},[s("img",{attrs:{src:a("JRsF"),alt:""}}),t._v(" "),s("p",{staticClass:"loading-txt"},[t._v("加载中...")])]):t._e(),t._v(" "),s("form-chart",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading.dimensionality&&"chart"==t.selectIndex[t.tabIndex],expression:"!isLoading.dimensionality&&selectIndex[tabIndex]=='chart'"}],attrs:{columns:t.columns.chart,tableData:t.tableData.dimensionality}}),t._v(" "),s("form-table",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading.dimensionality&&"word"==t.selectIndex[t.tabIndex],expression:"!isLoading.dimensionality&&selectIndex[tabIndex]=='word'"}],attrs:{columns:t.columns.word,tableData:t.tableData.dimensionality}})]:t._e()],2)])])])])])},staticRenderFns:[]};var O=a("C7Lr")(D,A,!1,function(t){a("JQrh"),a("2jzU")},"data-v-a7a2e6bc",null).exports,T=(u.a,d.a,{mixins:[u.a,d.a],inject:{windowObj:{default:null}},components:{formStatistics:O},props:{tableName:"",appData:{default:null},data:{default:null},account:null},data:function(){return{searchParams:"",isShowStatistics:!1,showBatch:!1,selectBusIds:"",businessBatchBusList:[],showMuchBusModel:!1,outListBatchBus:[],pdfSetting:{index:0,list:[],downloading:!1,zip:new p.a,timer:null,modalShow:!1,log:!1},destoryForm:!1,haveModel:!1,batchModalShow:!1,rangeB:"",range:"",tongjiRangeArr:[],baobiaoRangeArr:[],appAll:!0,curPlayerType:"",length:0,clickIndex:0,jisuanArray:[{titleName:"",cal:[{name:"计算1",caculate:1e3},{name:"计算2",caculate:500}]},{titleName:"辅导员B",cal:[{name:"计算3",caculate:1e3},{name:"计算4",caculate:500}]}],tabArray:[{name:"报表1"},{name:"报表2"},{name:"报表3"}],opt:1,baobiaoExportBOOL:!1,showBaobiaomodel:!1,countCollegeCode:"",countData:[],historyCountData:[],historyCountOptions:[],barCircleWidth:8,countPartShow:!1,countModal:!1,countTabActive:"",isAddCombinationCount:!1,dictTypes:[],countRadios:[],defaultOptions:{college:"0",grade:"0",studentType:"0"},gradeOptions:[],collegeSelectOptions:[],countItemData:[],countItemSelectArr:[],countOptionData:[],countOptionArr:{selectArr:[],oldData:[]},countOptionSelectArr:[],countOptionIndex:0,countOptionMark:"",isShowOptionsModal:{countOption:!1,combinationCount:!1},combinationCountItemData:[],combCountItemSelectData:{nameArr:[],titleArr:[]},combCountOptionData:[],curSelectCombOptions:[],selectCombOptions:[],combstatisticsItems:{combination:!0,title:"",name:"",options:[]},combCountOptionIndex:0,countSearchCollegeCode:"",countSearchStudentType:"",countSearchGrade:"",countCollegeName:"",countStudentTypeName:"",countGradeName:"",isCollegeOrPlayer:!1,curCountItems:[],curCheckType:1,isCombination:!1,saveCollegeOrPlyaerCountData:[],curSelectCountData:{},isClickFilterTab:!1,saveCountData:{countTabActive:"",select:{college:"0",grade:"0",studentType:"0"},countType:{id:0,value:{}},countItemData:{id:0,value:{}},countData:[],combCountItemData:[],oldCountItemData:[],countItemSelectArr:[],newAddcountItem:[],countOptionArray:[]},curStatisticsItems:[],overviewHistoryData:{countData:[],countItemData:[],countItemSelectArr:[],countOptionSelectArr:[]},collegeHistoryData:{countData:[],countItemData:[],countOptionSelectArr:[]},instructorHistoryData:{countData:[],countItemData:[],countOptionSelectArr:[]},newCollegeOrPlayerData:[],multipleSelectComparison:[],previousIndexArr:[],newAddcountItem:[],isRecordCurOptionsArr:!1,countItemHeight:125,setHeight:628,countContentHeight:635,combContentHeight:510,collegeComparison:!1,instructorComparison:!1,curCountOptions:{},isDisabled:!1,baseFields:["姓名","学号","年级","新生账号","学院","培养层次","状态","操作"],playersTime:[],myFormPreview:!1,saveBtnContrl:!0,submitBtnControl:!0,collegeOptions:[],backControl:"",playerId:"",formData_components_check:"",formData_name_check:"",formData_property_script_check:"",log:null,showPlayerForm:!1,instanceId:"",method:"get",url:"",sortParams:"",student:{name:"",categories:[]},showDetail:!1,ts:new Date,lang:"zh-cn",tableShowControl:!0,importPartners:!1,headerShow:!0,columns:[],columnSearchType:{input:"input",number:"input",address:"input",select:"select",radio:"select",datetime:"datetime"},partnerContent:!1,collapsed:!1,curApp:null,curUserType:null,curBusinessId:null,curTab:"guide",formData:null,formData_components:"",formData_name:"",formData_property_script:"",preview:!1,businessList:[],errorMessage:"",recordData:[],outputList:[],gbCodeLength:0,isNationalList:["性别","民族","政治面貌","学历","专业","培养方式","生源地","师范生类别","困难生类别","毕业去向","单位性质","单位行业","单位所在地","工作职位类别","报到证签发类别","签往单位所在地"],nationalList:[],nationalArray:[],nationalCode:["sexCode","nationCode","politicalStatusCode","educationLevelCode","majorCode","cultivateModeCode","originPlaceCode","normalSchoolStudentsTypeCode","difficultIdentificationLevelCode","graduationDestinationCode","unitPropertiesCode","uniTradeCode","unitLocationCode","jobCategoryCode","registrationCertificateIssuingTypeCode","signatureUnitLocationCode"],outList:[],formFields:[],outputModalShow:!1,notAllowOutput:["label","splitLine"],notAllowShow:["label","splitLine","image","attachment","table"],importParams:{parentPageTitle:"",downloadTemplateUrl:"",downloadErrorTemplateUrl:"",checkTemplateUrl:"",templateName:"",importBtnType:null},statistic:{dataIndex:"",barIndex:""},curPlayer:null,exportFiledArr:[],showAttachmentPreview:!1,acttachmentObj:{},acttachmentUrl:"",curBusinessTime:"",multiForm:!1,myFormsColumn:[],myFormTableUrl:"",isMergeTable:!0}},computed:{allCheck:function(){return this.formFields.length==this.outputList.length&&this.nationalList.length==this.gbCodeLength||this.formFields.length==this.outputList.length/2},allCheckBatchBus:function(){return this.outListBatchBus.every(function(t){return 1==t.exportable})},allSelectButton:function(){return!(this.countItemSelectArr.length<this.countItemData.length&&this.countItemSelectArr.length>=0)},curBusiness:function(){var t=this,e=null;return this.businessList.forEach(function(a){a.id===t.curBusinessId&&(e=a)}),e},statisticTableUrl:function(){var t="/statistics/business/"+this.curBusinessId+"/statistics/details/pages?";return this.playerId&&(t+="&playerId="+this.playerId),this.countCollegeCode&&(t+="&playerId="+this.countCollegeCode),t+="&itemIndex="+this.statistic.dataIndex,t+="&detailIndex="+this.statistic.barIndex},translate:function(){return Object(l.g)(this.lang).infoManage},curCountData:function(){var t=this;return this.countOptionArr.oldData=[],this.countData.forEach(function(e,a){var s=0,i=e.details.length;e.details.forEach(function(t){t.count=null===t.count?0:t.count,s+=t.count}),e.details.forEach(function(e){e.count=null===e.count?0:e.count;var a=0;a=0===s?1/i:e.count/s;var n=Number(100*a).toFixed(2)+"%";t.$set(e,"percent",n)})}),this.countItemData.forEach(function(e){t.countOptionArr.oldData.push(JSON.parse(o()(e.details)))}),this.countData},newCurCountData:function(){var t=this;return this.isRecordCurOptionsArr||this.isCollegeOrPlayer&&(this.countOptionArr.selectArr=[]),this.newCollegeOrPlayerData.forEach(function(e){e.details.forEach(function(e){var a=0,s=e.statisticsResult.length;e.statisticsResult.forEach(function(t,e){t.count=null===t.count?0:t.count,a+=t.count}),e.statisticsResult.forEach(function(e){e.count=null===e.count?0:e.count;var i=0;i=0===a?1/s:e.count/a;var n=Number(100*i).toFixed(2)+"%";t.$set(e,"percent",n)})})}),this.countItemData.forEach(function(e,a){var s=[];JSON.parse(o()(e.details)).forEach(function(t){s.push(t.name)}),t.countOptionArr.selectArr.push({id:a,value:s})}),this.newCollegeOrPlayerData},curCountUrl:function(){return 2===this.curCheckType?"/api/statistics/formEngine/business/"+this.curBusinessId+"/statistics/collegeComparison?playerId="+this.playerId+"&grade="+this.countSearchGrade+"&studentType="+this.countSearchStudentType:4===this.curCheckType?"/api/statistics/formEngine/business/"+this.curBusinessId+"/statistics/classComparison?playerId="+this.playerId+"&grade="+this.countSearchGrade+"&studentType="+this.countSearchStudentType+"&collegeCode="+this.countSearchCollegeCode:this.curCheckType>=5?"/api/statistics/formEngine/business/"+this.curBusinessId+"/statistics/rangeComparison?playerId="+this.playerId+"&grade="+this.countSearchGrade+"&studentType="+this.countSearchStudentType+"&collegeCode="+this.countSearchCollegeCode+"&range="+this.range:"/api/statistics/formEngine/business/"+this.curBusinessId+"/statistics/playerComparison?playerId="+this.playerId+"&grade="+this.countSearchGrade+"&studentType="+this.countSearchStudentType+"&collegeCode="+this.countSearchCollegeCode},exportCountUrt:function(){var t="/downloads/statistics/formEngine/business/"+this.curBusinessId+"/statistics/excel?playerId="+this.playerId+"&grade="+this.countSearchGrade+"&studentType="+this.countSearchStudentType+"&collegeCode="+this.countSearchCollegeCode;return 1===this.curCheckType?t="/downloads/statistics/formEngine/business/"+this.curBusinessId+"/statistics/excel?playerId="+this.playerId+"&grade="+this.countSearchGrade+"&studentType="+this.countSearchStudentType+"&collegeCode="+this.countSearchCollegeCode:2===this.curCheckType?t="/downloads/statistics/formEngine/business/"+this.curBusinessId+"/statistics/collegeComparison/excel?playerId="+this.playerId+"&grade="+this.countSearchGrade+"&studentType="+this.countSearchStudentType:3===this.curCheckType?t="/downloads/statistics/formEngine/business/"+this.curBusinessId+"/statistics/playerComparison/excel?playerId="+this.playerId+"&grade="+this.countSearchGrade+"&studentType="+this.countSearchStudentType+"&collegeCode="+this.countSearchCollegeCode:4===this.curCheckType?t="/downloads/statistics/formEngine/business/"+this.curBusinessId+"/statistics/classComparison/excel?playerId="+this.playerId+"&grade="+this.countSearchGrade+"&studentType="+this.countSearchStudentType+"&collegeCode="+this.countSearchCollegeCode:this.curCheckType>=5&&(t="/downloads/statistics/formEngine/business/"+this.curBusinessId+"/statistics/rangeComparison/excel?playerId="+this.playerId+"&grade="+this.countSearchGrade+"&studentType="+this.countSearchStudentType+"&collegeCode="+this.countSearchCollegeCode+"&range="+this.range),t},exportCurCountUrl:function(){return 2===this.curCheckType?"/downloads/statistics/formEngine/business/"+this.curBusinessId+"/statistics/details/excel?playerId="+this.playerId+"&grade="+this.countSearchGrade+"&studentType="+this.countSearchStudentType:"/downloads/statistics/formEngine/business/"+this.curBusinessId+"/statistics/details/excel?playerId="+this.playerId+"&grade="+this.countSearchGrade+"&studentType="+this.countSearchStudentType+"&collegeCode="+this.countSearchCollegeCode},barLength:function(){return this.countTabActive?558:800},newBarLength:function(){return this.countTabActive?500:742}},created:function(){var t=this;this.$route.query.id&&(this.data={data:{id:this.$route.query.id}});var e=localStorage.getItem("lang");Object(l.g)(e)&&(this.lang=e),this.importParams.needAdvance=!0,this.importParams.templateName=this.translate.baseModelParticipator,this.importParams.parentPageTitle=this.translate.tableNameParticipator,this.importParams.importBtnType=[{url:"/formEngine/batchOperations",method:"post",name:this.translate.incrementImport,isShowBtn:!0,success:function(e){e.state&&(t.importPartners=!1,t.tableShowControl=!0)}}],this.data&&this.data.appData?(this.data.appData.app?(this.curApp=JSON.parse(o()(this.data.appData.app)),this.curUserType=this.curApp.appType.userType):(this.curApp=JSON.parse(o()(this.data.appData)),this.curUserType=this.curApp.appType.userType),this._initBusinessList()):(this.$waiting.show(),setTimeout(function(){t.$waiting.close()},5e3),Object(l.e)({url:"/api/app/"+this.data.data.id,type:"get",success:function(e){e.state?(t.curApp=e.data,t._initBusinessList()):t.$toast(e.message)}}).always(function(){t.$waiting.close()})),Object(l.d)("/api/app/"+this.data.data.id+"/browse",null,"post"),this.getBatchBusData()},watch:{curBusinessId:function(){this.playerId&&(this.url="/table-data/formEngine/business/"+this.curBusinessId+"/formInstances?playerId="+this.playerId+"&timeStamp="+Object(l.a)())},appData:function(){this.appData?(this.appData.app?this.curApp=JSON.parse(o()(this.appData.app)):this.curApp=JSON.parse(o()(this.appData)),this._initBusinessList()):this.curApp=null},windowObj:{deep:!0,handler:function(t){var e=125;if(this.collegeComparison&&(e+=48),this.instructorComparison&&(e+=48),2===this.previousIndexArr[0]||3===this.previousIndexArr[0]?1===this.curCheckType&&(e+=53):(2===this.curCheckType||3===this.curCheckType||4===this.curCheckType||this.curCheckType>=5)&&(e-=53),r()(document).height()<877&&r()(document).height()>600){var a=r()(document).height()-200;r()(".count-modal .modal-content").css("height",a+"px"),this.setHeight=a-88,this.countItemHeight=a-88-e,this.countContentHeight=a-80,this.combContentHeight=a-205}else r()(".count-modal .modal-content").css("height","720px"),this.setHeight=628,this.countContentHeight=635,this.combContentHeight=510,this.countItemHeight=628-e}}},mounted:function(){var t=this;r()(".app-detail-page-form").off("click"),r()(".app-detail-page-form").on("click",".guide-content img",function(e){var a=r()(t).attr("src");a.indexOf(t.imageUrlPrefix)>=0&&t.$preview({type:"png",url:a})}),r()(".app-detail-page-form").on("click",".guide-content a",function(e){var a=r()(t).attr("href");if(a.indexOf(t.fileUrlPrefix)>=0){if(e.preventDefault(),/(iP)/g.test(navigator.userAgent))return t.$toast("您的ios设备不支持附件下载，请用其它设备打开！造成不便尽请谅解~"),!1;var s=document.createElement("iframe");s.src=a,s.style.display="none",document.body.appendChild(s)}})},methods:{selectAllExportBatchBus:function(){this.allCheckBatchBus?this.outListBatchBus.map(function(t){return t.exportable=!1,t}):this.outListBatchBus.map(function(t){return t.exportable=!0,t})},muchExport:function(){this.selectBusIds="",this.outListBatchBus=this.outListBatchBus.map(function(t){return t.exportable=!0,t}),this.showMuchBusModel=!0},_batchBusExport:function(){var t=this;if(this.selectBusIds){var e=[];this.outListBatchBus.forEach(function(t){t.exportable&&e.push(t.title)});var a=e.toString(),s={businessId:this.selectBusIds.split(","),exportFields:a.split(","),fileName:this.data.title+"多业务期导出"};this.exportFile("/api/app/formEngine/"+this.data.data.id+"/multiple/business/exportData",s,"post").then(function(e){e.state?(t.showMuchBusModel=!1,window.location.href="/downloads/zip"+e.data.fileName):(t.baobiaoExportBOOL=!0,t.$toast("获取导出文件失败"))})}else this.$toast("请选择要导出的业务期！")},getBatchBusData:function(){var t=this;Object(l.e)({url:"/api/app/formEngine/"+this.data.data.id+"/multiple/exportFieldsAndBusinesses",type:"get",success:function(e){e.state?(t.businessBatchBusList=e.data.businesses,0!=t.businessBatchBusList.length&&(t.showBatch=!0),t.outListBatchBus=e.data.exportField.map(function(t){var e={};return e.title=t,e.exportable=!0,e})):t.$toast(e.message)}})},selectAllExport:function(){var t=this;this.allCheck?(this.outputList=[],this.nationalList=[],this.exportFiledArr=[]):(this.outputList=[],this.nationalList=[],this.exportFiledArr=[],this.formFields.forEach(function(e){t.isNationalList.indexOf(e.title)>=0&&t.nationalList.push(e.title),t.outputList.push(e.name),"signature"!==e.componentType&&"image"!==e.componentType&&"attachment"!==e.componentType||t.exportFiledArr.push({name:e.name,title:e.title})}))},_srotClick:function(t,e){e&&(this.sortParams="&sort="+t+"-"+e)},_baobiaoExport:function(){var t=this,e="";1==this.opt&&(e="school"),2==this.opt&&(e="college"),3==this.opt&&(e="instructor"),4==this.opt&&(e="class");var a="";this.jisuanArray.forEach(function(e,s){s==t.clickIndex&&(a=e.reportName)});var s=this.advancedSearchParams;s=s||"",window.location.href="/downloads/report/"+this.curBusinessId+"/Excel/formInstances?range="+e+"&playerId="+this.playerId+"&tableName="+a+"&excelName="+this.curApp.name+"报表"+s},_checkBiao:function(t){this.clickIndex=t},_setValue:function(t){var e=this;this.baobiaoExportBOOL=!1,this.allSelectButton=!0,this.opt=t;var a="";1==t?a="school":2==t?a="college":3==t?a="instructor":4==t&&(a="class");var s=this;t>=5&&this.baobiaoRangeArr.forEach(function(e){t==e.opt&&(a=e.range,s.rangeB=e.range)});s=this;var i=this.$refs[this.curTab+"_table"].tableSearchFields,n=i.userNo?i.userNo:"",o=i.account?i.account:"",c=i.name?i.name:"",r=i.educationLevel?i.educationLevel:"",u=i.collegeCode?i.collegeCode:"",d=i.grade?i.grade:"",h=this.advancedSearchParams;h=h||"",Object(l.e)({url:"/api/report/"+this.curBusinessId+"/report/formInstances?range="+a+"&playerId="+this.playerId+"&userNo="+n+"&account="+o+"&name="+c+"&educationLevel="+r+"&collegeCode="+u+"&grade="+d+h,dataType:"json",type:"get",success:function(t){t.state&&t.data.length>0?e.jisuanArray=t.data:(e.baobiaoExportBOOL=!0,e.$toast("未获取到筛选的报表信息"))}})},_showBaobiao:function(){var t=this,e=this.$refs[this.curTab+"_table"].tableSearchFields,a=e.userNo?e.userNo:"",s=e.account?e.account:"",i=e.name?e.name:"",n=e.collegeCode?e.collegeCode:"",o=e.grade?e.grade:"",c=e.educationLevel?e.educationLevel:"",r=this.advancedSearchParams;r=r||"",this.tableName="",this.opt=1;Object(l.e)({url:"/api/report/"+this.curBusinessId+"/report/formInstances?range=school&playerId="+this.playerId+"&userNo="+a+"&account="+s+"&name="+i+"&collegeCode="+n+"&educationLevel="+c+"&grade="+o+r,dataType:"json",type:"get",success:function(e){if(e.state&&e.data.length>0){t.showBaobiaomodel=!0,t.jisuanArray=e.data;for(var a=0;a<e.data.length;a++)t.length=e.data.length,a==e.data.length-1?t.tableName+=e.data[a].reportName:t.tableName+=e.data[a].reportName+","}else t.baobiaoExportBOOL=!0,t.$toast("未获取到报表信息")}})},_mergeTable:function(){this.isMergeTable=!this.isMergeTable},_addForm:function(){var t=this;this.log="",this.collapsed=!0,this.instanceId="",this.$waiting.show(),this._getFormLayoutCheck(this.curBusinessId,function(e){t.playerId="owner",t.formData_check=e,t.formData_components_check=e.components,t.formData_name_check=e.name,t.formData_property_script_check=e.property.script,t.formData_components_check.forEach(function(e){t.$set(e,"x",e.location.left),t.$set(e,"y",e.location.top),t.$set(e,"w",e.size.width),t.$set(e,"h",e.size.height)}),t.showPlayerForm=!0,t.$waiting.close(),t.recordData=null,t.log=null})},_initHistoryColumn:function(t){var e=this._getStorage();t?this.myFormsColumn.forEach(function(t){e.forEach(function(e){t.id&&t.id===e.id&&(t.hidden=e.hidden)})}):this.columns.forEach(function(t){e.forEach(function(e){t.id&&t.id===e.id&&(t.hidden=e.hidden)})})},_getStorage:function(){if(!this.curTab)return[];var t=this.curTab+"+"+(this.$account&&this.$account.id+this.$account.schoolId||"default_form"),e=localStorage.getItem(t);return e?JSON.parse(e):[]},_setStorage:function(t){var e=this.curTab+"+"+(this.$account&&this.$account.id+this.$account.schoolId||"default_form"),a=o()(t||this.columns);localStorage.setItem(e,a)},_setStorageOfTab:function(t){var e="nodeKey_"+(this.$account&&this.$account.id+this.$account.schoolId||"default_form")+this.curBusinessId,a={name:this.curTab};t&&(a.data=t);var s=o()(a);localStorage.setItem(e,s)},_getStorageOfTab:function(){var t="nodeKey_"+(this.$account&&this.$account.id+this.$account.schoolId||"default_form")+this.curBusinessId,e=localStorage.getItem(t);return e?JSON.parse(e):{}},_columnExchanged:function(){this._setStorage()},_columnExchanged2:function(){this._setStorage(this.myFormsColumn)},_afterSelectBusiness:function(t){this._getBusinessTime(),"preview"===this.curTab&&(this.curBusiness.canApplyOnAuthority?this.myForm():this.guide())},_getBusinessTime:function(){var t=this;this.curBusinessId&&Object(l.e)({url:"/api/app/business/"+this.curBusinessId+"/players/time",type:"get",success:function(e){e.state?t.playersTime=e.data:t.$toast(e.message)}})},_initBusinessList:function(){var t=this;Object(l.e)({url:"/api/app/"+this.curApp.id+"/business/now",type:"get",async:!1,success:function(e){if(e.state)if(e.data&&e.data.length>0){t.businessList=e.data,t.businessList.forEach(function(t){t.id=t.business.id,t.name=t.business.name}),t.curBusinessId=t.businessList[0].id,t.multiForm=t.businessList[0].multiForm,t._initTableColumns(),t._initMyFormTableColumns(),t._getBusinessTime();var a=t._getStorageOfTab();t.curTab=a&&a.name||"guide",setTimeout(function(){"guide"===t.curTab?t.guide():"preview"===t.curTab||t.showPlayerTable(a.data)},100)}else t.errorMessage="暂无业务期";else t.$toast(e.message)}}),Object(l.e)({url:"/api/report/"+this.data.data.id+"/"+this.curBusinessId+"/formBusinessContrast?type=form",type:"get",async:!1,success:function(e){e.state?e.data.forEach(function(e,a){"school"!=e.range&&"college"!=e.range&&"class"!=e.range&&"instructor"!=e.range&&(e.opt=a+5,t.baobiaoRangeArr.push(e))}):t.$toast(e.message)}}).always(function(){}),Object(l.e)({url:"/api/statistics/formEngine/"+this.data.data.id+"/"+this.curBusinessId+"/formBusinessContrast",type:"get",async:!1,success:function(e){e.state&&e.data.forEach(function(e){t.tongjiRangeArr.push(e)})}}).always(function(){t.$waiting.close()})},_getCountData:function(){var t=this;this.playerId&&(this.countItemHeight=125,this.countItemSelectArr=[],this.previousIndexArr=[],this.combinationCountItemData=[],this.saveCountData.combCountItemData=[],Object(l.e)({url:"/api/statistics/formEngine/business/"+this.curBusinessId+"/statistics/settings?playerId="+this.playerId,type:"get",async:!1,success:function(e){e.state?(t.curCountItems=e.data.items,t.curCountItems.forEach(function(e){t.countItemSelectArr.push(e.name)}),t.collegeComparison=e.data.collegeComparison,t.instructorComparison=e.data.instructorComparison,e.data.collegeComparison&&(t.countItemHeight=t.countItemHeight+48),e.data.instructorComparison&&(t.countItemHeight=t.countItemHeight+48),t.countRadios=[{label:"总览",value:1,isChecked:!0,isShow:!0},{label:"各学院对比",value:2,isChecked:!1,isShow:e.data.collegeComparison},{label:"各辅导员对比",value:3,isChecked:!1,isShow:e.data.instructorComparison},{label:"各班级对比",value:4,isChecked:!1,isShow:e.data.classComparison}],t.tongjiRangeArr.forEach(function(e,a){var s={label:e.name,value:a+5,isChecked:!1,isShow:!0,range:e.range};t.countRadios.push(s)}),t.getAllCountData("getData")):t.$toast(e.message)}}))},getAllCountData:function(t){var e=this;this.isRecordCurOptionsArr=!1,this.$waiting.show(),Object(l.e)({url:"/api/statistics/formEngine/business/"+this.curBusinessId+"/statistics?playerId="+this.playerId+"&grade="+this.countSearchGrade+"&studentType="+this.countSearchStudentType+"&collegeCode="+this.countSearchCollegeCode,type:"post",data:{statisticsItems:this.curCountItems},success:function(a){if(a.state){if(e.countData=a.data,"getData"===t&&(e.combinationCountItemData=[],e.saveCountData.combCountItemData=[],e.countItemData=JSON.parse(o()(a.data)),a.data.forEach(function(t){t.combination||(e.combinationCountItemData.push(JSON.parse(o()(t))),e.saveCountData.combCountItemData.push(JSON.parse(o()(t))))})),e.historyCountOptions.length>0?e.countOptionArr.selectArr=e.historyCountOptions:(e.countOptionArr.selectArr=[],e.countItemData.forEach(function(t,a){var s=[];JSON.parse(o()(t.details)).forEach(function(t){s.push(t.name)}),e.countOptionArr.selectArr.push({id:a,value:s})})),"record"===t){for(var s in e.countData){var i=e.countData[s].name,n=e.countData[s].details,c=0;for(var r in e.historyCountData){var l=e.historyCountData[r].name,u=e.historyCountData[r].details;if(i===l)for(var d in c++,n){for(var h in u)n[d].name===u[h].name&&(0,delete u[h].percent,u[h].count=n[d].count)}}if(0===c){var p=e.countData.length-e.historyCountData.length;e.countData.splice(s,p)}}e.countData=[],e.countData.push(JSON.parse(o()(e.historyCountData))[0])}}else e.$toast(a.message)}}).always(function(){e.$waiting.close()})},backParentPage:function(){this.importPartners=!1,this.tableShowControl=!0},exportOperation:function(){var t=this;Object(l.e)({url:"/api/apps/"+this.curApp.id+"/template",type:"get",success:function(e){e.data?t.haveModel=!1:t.haveModel=!0}}),this.batchModalShow=!0},_outputExcel:function(){this._output(),this.batchModalShow=!1,this.searchControl=!1,this.allCheck=!0},_downloadPdf:function(){var t=this;this.pdfSetting.downloading&&this.getPdf(this.pdfSetting.title,function(e){t.preview=!1,t.pdfSetting.index++,t.pdfSetting.zip.file(t.pdfSetting.title+".pdf",e,{binary:!0}),t._nextTask(t.pdfSetting.list[t.pdfSetting.index]),t.$toast("打包中...("+t.pdfSetting.index+"/"+t.pdfSetting.list.length+")")})},_nextTask:function(t){var e=this;this.pdfSetting.timer=setTimeout(function(){t?e.preview||e._initPreview({id:t,businessId:e.curBusinessId}):(clearTimeout(e.pdfSetting.timer),e.pdfSetting.downloading=!1,e.pdfSetting.log=!1,e.pdfSetting.list=[],e.pdfSetting.index=0,e.batchModalShow=!1,e.pdfSetting.zip.generateAsync({type:"blob"}).then(function(t){var a=new Date;f.a.saveAs(t,e.curApp.name+a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+".zip"),e.$toast("打包成功，开始下载...")}))},100)},_getAuthorityData:function(t,e){var a,s=this,n="";n="preview"===this.curTab?"owner":this.playerId;Object(l.e)((a={url:"/api/formEngine/formInstance/"+t,type:"get",data:{playerId:n}},i()(a,"type","get"),i()(a,"success",function(t){t.state?e(t.data):s.$toast(t.message)}),a))},_initPreview:function(t){var e=this;this.$waiting.show(),this._getAuthorityData(t.id,function(t){e.authorities=t||[]}),this._getFormLayout(t.businessId,function(a){e.formData=a,e.formData.components.forEach(function(t){e.$set(t,"x",t.location.left),e.$set(t,"y",t.location.top),e.$set(t,"w",t.size.width),e.$set(t,"h",t.size.height)}),e._getLog(t.id,e.playerId,e.curBusinessId,function(t){e.log=t||null}),e._getInitDataCheck(t.id,function(t){e.$waiting.close(),e.recordData=t,e.preview=!0,e.pdfSetting.downloading&&(e.pdfSetting.title=(e.recordData.owner.userNo||e.recordData.owner.account)+"-"+e.recordData.owner.name+"-"+e.recordData.createTime)})})},_outputPdf:function(t){var e=this;this.pdfSetting.downloading=!0;var a="/api/formEngine/business/"+this.curBusinessId+"/formInstances/ids?playerId="+this.playerId;Object(l.e)({url:a,type:"get",success:function(t){t.state?(e.pdfSetting.list=t.data,e._nextTask(e.pdfSetting.list[e.pdfSetting.index]),e.batchModalShow=!1):e.$toast(t.message)}})},exportModelPi:function(t){var e=this.advancedSearchParams;e=e||"",window.location.href="/downloads/manageWord/"+this.curBusinessId+"/formInstances/words?fileName="+this.curApp.name+".zip&playerId="+this.playerId+e+"&reportType="+t,this.batchModalShow=!1},bulkOperation:function(){this.curPlayer.batch&&(this.importPartners=!0,this.tableShowControl=!1,this.searchControl=!1)},unfoldAndfold:function(){this.collapsed=!this.collapsed},showPlayerTable:function(t){var e=this;this.curPlayerType=t.distributary,this.curPlayer=t,this.showPlayerForm=!1,this.myFormPreview=!1,this.curTab=this.curPlayer.name,this.playerId=this.curPlayer.id,this.partnerContent=!0,this.collapsed=!0,this.url="",this._initTableColumns(function(){e.url="/table-data/formEngine/business/"+e.curBusinessId+"/formInstances?playerId="+e.playerId+"&timeStamp="+Object(l.a)()}),this.playersTime.forEach(function(a){if(a.playerId===t.id){var s=a.startDate?a.startDate:"未设置",i=a.endDate?a.endDate:"未设置";e.curBusinessTime="开始时间: "+s+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;结束时间: "+i}}),this.importParams.downloadTemplateUrl="/formEngine/business/"+this.curBusinessId+"/batchOperationsTemplate/excel?playerId="+this.playerId,this.importParams.checkTemplateUrl="/formEngine/business/"+this.curBusinessId+"/player/"+this.playerId+"/batchOperations/check",this.importParams.downloadErrorTemplateUrl="/formEngine/errExcel",this._setStorageOfTab(t),this._focus()},_focus:function(){var t=this;"preview"!==this.curTab&&setTimeout(function(){t.$refs[t.curTab+"_table"].getFocus("userNo")},100)},guide:function(){"preview"!==this.curTab&&"guide"!==this.curTab&&this._setStorage(),this.showPlayerForm=!1,this.curTab="guide",this.partnerContent=!1,this.myFormPreview=!1,this._setStorageOfTab()},myForm:function(){var t=this;this.$nextTick(function(){t.multiForm?t._setStorage(t.myFormsColumn):"preview"!==t.curTab&&"guide"!==t.curTab&&t._setStorage(t.myFormsColumn),t.multiForm?(t.myFormTableUrl="",t._initMyFormTableColumns(function(){t.myFormTableUrl="/table-data/formEngine/business/"+t.curBusinessId+"/multi/myFormInstances?timeStamp="+Object(l.a)()}),t.backControl=!1,t.showPlayerForm=!1,t.partnerContent=!1,t.myFormPreview=!0,t.curTab="preview",t._setStorageOfTab()):(t.log="",t.collapsed=!0,t.$waiting.show(),t.curBusiness.canApplyOnAuthority&&(t._getFormLayout(t.curBusinessId,function(e){t.playerId="owner",t.formData=e,t.formData_components=e.components,t.formData_name=e.name,t.formData_property_script=e.property.script,t.formData_components.forEach(function(e){t.$set(e,"x",e.location.left),t.$set(e,"y",e.location.top),t.$set(e,"w",e.size.width),t.$set(e,"h",e.size.height)}),t.destoryForm=!0,t._getInitData(t.curBusinessId,function(e){t.recordData=e,t.myFormPreview=!0,t.$waiting.close(),t.destoryForm=!1,t.recordData&&(t.instanceId=t.recordData.id,t._getLog(t.recordData.id,t.playerId,t.curBusinessId,function(e){t.log=e||null}))})}),t.backControl=!1,t.showPlayerForm=!1,t.partnerContent=!1,t.curTab="preview",t._setStorageOfTab()))})},_getLog:function(t,e,a,s){var i=this;Object(l.e)({url:"/api/formEngine/formInstances/"+t+"/changeLogs?playerId="+e+"&businessId="+a,type:"get",success:function(t){t.state?s(t.data):i.$toast(t.message)}})},_sureToOutput:function(){var t=this,e=this.$refs[this.curTab+"_table"].tableSearchFields,a="",s=[],i=[],n=[];for(var o in e)e[o]?a+="&"+o+"="+e[o]:a+="&"+o+"=";this.outputList.forEach(function(t){-1===t.indexOf("image")&&-1===t.indexOf("signature")&&-1===t.indexOf("attachment")&&s.push(t)}),this.exportFiledArr.forEach(function(t){(t.name.indexOf("image")>=0||t.name.indexOf("signature")>=0||t.name.indexOf("attachment")>=0)&&(i.push(t.name),n.push(t.title))});for(var c=this.advancedSearchParams,r=[],l=0;l<this.nationalList.length;l++){var u=this.nationalList[l];if(this.isNationalList.indexOf(u)>=0){var d=this.isNationalList.indexOf(u);r.push(this.nationalCode[d])}}c=c||"";var h=!1;i.length>0&&(h=!0),this.exportFile("api/formEngine/business/"+this.curBusinessId+"/formInstances/export/createFile?playerId="+this.playerId+"&excelFileName="+this.curApp.name+"&hasFile="+h+"&fileName="+n+"&exportFields="+(s+a+c)+"&mergeTables="+this.isMergeTable+"&gbCodes="+r.join(",")+"&componentName="+i).then(function(e){e.state?window.location.href="/downloads/zip"+e.data.fileName:t.$toast(e.message)}),this.outputModalShow=!1,this.batchModalShow=!1},_downloadsZip:function(t,e){var a=this,s=this.advancedSearchParams;s||(s=""),Object(l.e)({url:"/api/formEngine/formInstances/allZip?zipName="+this.curApp.name+"&allZipPath="+t+"&filePath="+e+s,type:"get",success:function(t){t.state?t.data&&(window.location.href="/downloads/zip"+t.data.key):a.$toast(t.message)}})},_changeOutputList:function(t,e){var a,s=this;(a="nationalList"==e?this[e].indexOf(t.title):this[e].indexOf(t.name))>=0?(this[e].splice(a,1),"signature"!==t.componentType&&"image"!==t.componentType&&"attachment"!==t.componentType||this.exportFiledArr.forEach(function(e,a){e.name===t.name&&s.exportFiledArr.splice(a,1)})):("nationalList"==e?this[e].push(t.title):this[e].push(t.name),"signature"!==t.componentType&&"image"!==t.componentType&&"attachment"!==t.componentType||this.exportFiledArr.push({name:t.name,title:t.title}))},_changeOutputListBatchBus:function(t,e){this.outListBatchBus[e].exportable=!this.outListBatchBus[e].exportable},_output:function(){var t=this,e=this.advancedSearchParams;e=e||"",Object(l.e)({url:"/api/formEngine/business/"+this.curBusinessId+"/exportFields?playerId="+this.playerId+e,type:"get",success:function(e){e.state?e.data.length>0?(t.exportFiledArr.splice(0,t.exportFiledArr.length),t.formFields=e.data,t.outputList=[],t.nationalList=[],t.nationalArray=[],t.outList=[],t.formFields.forEach(function(e,a){t.isNationalList.indexOf(e.title)>=0&&t.nationalArray.push(e),t.gbCodeLength=t.nationalArray.length,t.outList.push(e),t.outputList.push(e.name),"signature"!==e.componentType&&"image"!==e.componentType&&"attachment"!==e.componentType||t.exportFiledArr.push({name:e.name,title:e.title})}),t.outputModalShow=!0):t.$toast("此表单不允许导出"):t.$toast(e.message)}})},_getInitData:function(t,e){var a=this;Object(l.e)({url:"/api/formEngine/business/"+t+"/myFormInstance",type:"get",success:function(t){t.state?(t.data&&t.data.editable?a.saveBtnContrl=!0:a.saveBtnContrl=!1,e(t.data)):(a.$waiting.close(),a.$toast(t.message))}})},_getInitDataCheck:function(t,e){var a=this,s="";s="preview"===this.curTab?"owner":this.playerId,Object(l.e)({url:"/api/formEngine/formInstance/"+t,type:"get",data:{playerId:s},success:function(t){t.data.editable?a.saveBtnContrl=!0:a.saveBtnContrl=!1,t.state?e(t.data):a.$toast(t.message)}})},_initMyFormTableColumns:function(t){var e=this;this.myFormsColumn=[{id:"createTime",title:"发起时间",search:{type:"datetime",data:{dateFormat:"yyyy-MM-dd hh:ii:ss"}},className:"text-left",hidden:!1},{id:"opt",title:"操作",className:"text-center",width:70,hidden:!1,formatter:function(){return[{tag:"a",text:"查看",className:"opt-btn",callback:function(t,a){e.$waiting.show(),e.instanceId=t.id,e._getFormLayoutCheck(e.curBusinessId,function(a){e.formData_check=a,e.formData_components_check=a.components,e.formData_name_check=a.name,e.formData_property_script_check=a.property.script,e.formData_components_check.forEach(function(t){e.$set(t,"x",t.location.left),e.$set(t,"y",t.location.top),e.$set(t,"w",t.size.width),e.$set(t,"h",t.size.height)}),e._getInitDataCheck(t.id,function(a){e.recordData=a,e.showPlayerForm=!0,e.$waiting.close(),e._getLog(t.id,"owner",e.curBusinessId,function(t){e.log=t||null})})})}}]}}],Object(l.e)({url:"/api/formEngine/business/"+this.curBusinessId+"/table/fields?playerId=owner",type:"get",success:function(a){a.state?(a.data.forEach(function(a){if("image"!=a.componentType&&"signature"!=a.componentType&&"attachment"!=a.componentType&&"label"!=a.componentType&&"splitLine"!=a.componentType&&"table"!=a.componentType&&e.outListBatchBus.push(a),e.notAllowShow.indexOf(a.componentType)<0){var s={id:"f_"+a.name,title:(e.baseFields.indexOf(a.title)>=0?"":"表单")+a.title,className:"text-left",width:150,formatter:function(t,e){return"signature"===a.componentType?t.formData[a.name]?"已签名":"未签名":t.formData[a.name]}};if(e.$set(s,"hidden",!a.visibleInTableColumn),a.name.indexOf("number")>-1&&(e.$set(s,"sort",!0),e.$set(s,"ComName",a.name)),e.columnSearchType[a.componentType]){var i=[];a.options.forEach(function(t){i.push({id:t,name:t})}),s.search={type:e.columnSearchType[a.componentType],data:{options:i,dateFormat:a.dateFormat}}}e.myFormsColumn.splice(e.myFormsColumn.length-1,0,s),t&&t()}}),e._initHistoryColumn(e.myFormsColumn)):e.$toast(a.message)}})},_initTableColumns:function(t){var e=this;if(this.playerId){var a=[{id:"userNo",title:"2"===this.curUserType?this.translate.infoFields.teacherId:"4"===this.curUserType?"学工号":this.translate.infoFields.studentId,className:"text-left",width:115,hidden:!1,search:{type:"input",data:{autoFocus:!0}},sorting:!0,sortType:"",formatter:function(t){return t.owner.userNo}},{id:"account",title:this.translate.infoFields.freshmanId,className:"text-left",width:115,hidden:!1,search:{type:"input"},sorting:!0,sortType:"",formatter:function(t){return t.owner.account}},{id:"name",title:"姓名",className:"text-left",width:100,hidden:!1,search:{type:"input"},sorting:!0,sortType:"",formatter:function(t){return t.owner.name}},{id:"collegeCode",title:this.translate.infoFields.collegeName,className:"text-left",width:150,hidden:!1,sorting:!0,sortType:"",search:{type:"select",data:{url:"/api/formEngine/business/"+this.curBusinessId+"/managedColleges?playerId="+this.playerId,optionsLabel:"name",optionsValue:"code",placeholder:this.translate.infoFields.collegeName}},formatter:function(t){return t.owner.collegeName}}];"4"===this.curUserType||"2"===this.curUserType?a.push({id:"updateTime",title:"发起时间",width:200,sorting:!0,sortType:"",search:{type:"datetime",data:{dateFormat:"yyyy-MM-dd hh:ii:ss"}},className:"text-left",hidden:!1}):a.push({id:"educationLevel",title:"培养层次",className:"text-left",width:100,hidden:!1,sorting:!0,sortType:"",search:{type:"select",data:{url:"/api/system/dictTypes/1000/dicts",optionsLabel:"label",optionsValue:"value"}},formatter:function(t){return t.owner.educationLevel}}),a.push({title:"操作",className:"text-center",width:70,hidden:!1,formatter:function(){return[{tag:"a",text:"查看",className:"opt-btn",callback:function(t,a){e.instanceId=t.id,e.$waiting.show(),e._getFormLayoutCheck(e.curBusinessId,function(a){e.formData_check=a,e.formData_components_check=a.components,e.formData_name_check=a.name,e.formData_property_script_check=a.property.script,e.formData_components_check.forEach(function(t){e.$set(t,"x",t.location.left),e.$set(t,"y",t.location.top),e.$set(t,"w",t.size.width),e.$set(t,"h",t.size.height)}),e._getInitDataCheck(t.id,function(a){e.recordData=a,e.showPlayerForm=!0,e.$waiting.close(),e._getLog(t.id,e.playerId,e.curBusinessId,function(t){e.log=t||null})})})}}]}}),this.columns=a,"3"!==this.curUserType&&this.columns.splice(1,1),Object(l.e)({url:"/api/formEngine/business/"+this.curBusinessId+"/table/fields?playerId="+this.playerId,type:"get",success:function(a){a.state?a.data.forEach(function(a){if(e.notAllowShow.indexOf(a.componentType)<0){var s={id:"f_"+a.name,title:(e.baseFields.indexOf(a.title)>=0?"表单":"")+a.title,className:"text-left",width:150,formatter:function(t,e){return"signature"===a.componentType?t.formData[a.name]?"已签名":"未签名":t.formData[a.name]}};if(e.$set(s,"hidden",!a.visibleInTableColumn),e.$set(s,"sortType",null),e.$set(s,"sorting",!0),e.$set(s,"ComName",a.name),e.columnSearchType[a.componentType]){var i=[];a.options.forEach(function(t){i.push({id:t,name:t})}),s.search={type:e.columnSearchType[a.componentType],data:{options:i,dateFormat:a.dateFormat}}}if("map"===a.componentType){var n={id:a.name,title:"是否在定位范围内",className:"text-left",hidden:!a.visibleInTableColumn,width:150,search:{type:"selectInRange",data:{options:[{label:"在定位范围内",value:"0"},{label:"未在定位范围内",value:"1"},{label:"未获取定位信息",value:"2"},{label:"暂无信息",value:"3"}],optionsLabel:"label",optionsValue:"value"}},formatter:function(t,e){return"true"===t.formData[a.name+"-inRange"]?"在定位范围内":"false"===t.formData[a.name+"-inRange"]?"未在定位范围内":"undefined"===t.formData[a.name+"-inRange"]?"未获取定位信息":"暂无信息"}};a.positionRangeRequired&&e.columns.splice(e.columns.length-1,0,n)}e.columns.splice(e.columns.length-1,0,s),t&&t()}}):e.$toast(a.message)}})}},_getFormLayout:function(t,e){var a=this;Object(l.e)({url:"/api/formEngine/business/"+t+"/formRenderData",type:"get",data:{playerId:"owner"},success:function(t){t.state?e(t.data):a.$toast(t.message)}})},_getFormLayoutCheck:function(t,e){var a=this,s="";s="preview"===this.curTab?"owner":this.playerId,Object(l.e)({url:"/api/formEngine/business/"+t+"/formRenderData",type:"get",data:{playerId:s,withData:this.multiForm},success:function(t){t.state?e(t.data):a.$toast(t.message)}})},_submit:function(t){var e=this;if(this.saveBtnContrl)if("childerPage"===t.previewformType){var a=void 0,s={},i="";"submit"===t.type&&("preview"===this.curTab?(a="/api/formEngine/formInstances",s={formData:t.formData,id:this.instanceId,variable:{appId:this.data.appData.id,businessId:this.curBusinessId}},i="post"):(a="/api/formEngine/formInstance/"+this.recordData.id,s={formData:t.formData,playerId:this.playerId},i="post")),Object(l.e)({url:a,type:i,data:s,success:function(a){a.state?(e.instanceId=a.data.id,confirm("保存成功！是否返回列表页")&&(e.preview=!1,e.url="/table-data/formEngine/business/"+e.curBusinessId+"/formInstances?playerId="+e.playerId+"&timeStamp="+Object(l.a)(),"submit"===t.type&&(e.showPlayerForm=!1,"preview"===e.curTab&&(e.myFormTableUrl="/table-data/formEngine/business/"+e.curBusinessId+"/multi/myFormInstances?timeStamp="+Object(l.a)())))):e.$toast(a.message)}})}else if(confirm("确认保存?")){var n=void 0;"submit"===t.type&&(n="/api/formEngine/formInstance/"+this.recordData.id);var o=t.formData.map(function(t){return t.name.indexOf("map")>-1&&delete t.value.locationValue.target,t});Object(l.e)({url:n,type:"post",data:{formData:o,playerId:this.playerId},success:function(a){a.state?(e.preview=!1,"submit"===t.type&&e.$toast("保存成功")):e.$toast(a.message)}}).always(function(){e.$waiting.close()})}},exportModel:function(t){var e=this.advancedSearchParams;e=e||"",""!=this.playerId&&null!=this.playerId||(this.playerId="owner"),window.location.href="/downloads/manageWord/"+this.curApp.id+"/formFiles?instanceId="+this.instanceId+"&playerId="+this.playerId+e+"&reportType="+t},_back:function(){this.$emit("back")},formatDateTime:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var s=t.getDate();return e+"-"+a+"-"+(s=s<10?"0"+s:s)},_showStatistics:function(){var t=this.$refs[this.curTab+"_table"].tableSearchFields||{};if("{}"!==o()(t))for(var e in t)this.searchParams+="&"+e+"="+t[e];this.searchParams+=this.advancedSearchParams,this.isShowStatistics=!0},_showCountModal:function(){var t=this;this.countModal=!0,this.collegeSelectOptions.splice(0,this.collegeSelectOptions.length),this._getCountData(),Object(l.e)({url:"/api/formEngine/business/"+this.curBusinessId+"/managedColleges?playerId="+this.playerId,type:"get",success:function(e){if(e.state)for(var a in t.collegeSelectOptions.push({code:"0",name:"所有"}),e.data)t.collegeSelectOptions.push(e.data[a]);else t.$toast(e.message)}}),this.dictTypes.splice(0,this.dictTypes.length),Object(l.e)({url:"/api/system/dicts",type:"get",data:{dictType:"学生类别"},success:function(e){if(e.state)for(var a in t.dictTypes.push({label:"所有",value:"0"}),e.data)t.dictTypes.push(e.data[a]);else t.$toast(e.message)}}),this.gradeOptions.splice(0,this.gradeOptions.length);var e=(new Date).getFullYear();this.gradeOptions.push({id:"0",label:"所有"});for(var a=e;a>e-8;a--)this.gradeOptions.push({id:a+"",label:a+"级"})},_changeRadio:function(t,e){var a=this;if("总览"==e.label?this.appAll=!0:this.appAll=!1,this.saveCountData.countType.id=t,this.saveCountData.countType.value=e,this.countRadios.forEach(function(t){t.isChecked=!1}),this.countOptionSelectArr=[],this.countRadios[t].isChecked=!0,this.curCheckType=e.value,e.range&&(this.range=e.range),2===this.previousIndexArr.length&&this.previousIndexArr.splice(0,1),this.previousIndexArr.push(e.value),this.saveHistoryData(this.previousIndexArr[0]),this.countOptionArr.selectArr=[],2===this.previousIndexArr[0]||3===this.previousIndexArr[0]?1===this.curCheckType&&(this.countItemHeight=this.countItemHeight-53):(2===this.curCheckType||3===this.curCheckType||4===this.curCheckType||this.curCheckType>=5)&&(this.countItemHeight=this.countItemHeight+53),1===this.curCheckType)if(this.isCollegeOrPlayer=!1,this.overviewHistoryData.countData.length>0)this.countData=JSON.parse(o()(this.overviewHistoryData.countData)),this.countItemData=JSON.parse(o()(this.overviewHistoryData.countItemData)),this.countItemSelectArr=JSON.parse(o()(this.overviewHistoryData.countItemSelectArr)),this.countOptionArr.selectArr=JSON.parse(o()(this.overviewHistoryData.countOptionSelectArr));else{if(this.newAddcountItem.length>0)JSON.parse(o()(this.newAddcountItem)).reverse().forEach(function(t){var e=[];t.details.forEach(function(t){e.push(t.name)}),a.curCountItems.unshift({title:t.title,name:t.name,combination:t.combination,options:e})});this.getAllCountData("getData")}else{this.isCollegeOrPlayer=!0;var s=[];this.countItemData.forEach(function(t,e){t.combination||s.push(JSON.parse(o()(t)))}),this.countItemData=[],this.countItemData=s,this.curStatisticsItems=[],this.multipleSelectComparison=[],this.countItemData.forEach(function(t,e){a.$set(t,"isChecked",!0),a.curSelectCountData=t,a.saveCountData.countItemData.value=t;var s=[];t.details.forEach(function(t){s.push(t.name)}),a.curStatisticsItems.push({title:t.title,name:t.name,combination:!1,options:s}),a.multipleSelectComparison.push(t.name)}),this.getCollegeOrPlayerData()}},saveHistoryData:function(t){1===t?(this.overviewHistoryData.countData=JSON.parse(o()(this.countData)),this.overviewHistoryData.countItemData=JSON.parse(o()(this.countItemData)),this.overviewHistoryData.countItemSelectArr=JSON.parse(o()(this.countItemSelectArr)),this.overviewHistoryData.countOptionSelectArr=JSON.parse(o()(this.countOptionArr.selectArr))):2===t?(this.collegeHistoryData.countData=JSON.parse(o()(this.countData)),this.collegeHistoryData.countItemData=JSON.parse(o()(this.countItemData)),this.collegeHistoryData.countOptionSelectArr=JSON.parse(o()(this.countOptionArr.selectArr))):(this.instructorHistoryData.countData=JSON.parse(o()(this.countData)),this.instructorHistoryData.countItemData=JSON.parse(o()(this.countItemData)),this.instructorHistoryData.countOptionSelectArr=JSON.parse(o()(this.countOptionArr.selectArr)))},_changeCountRadio:function(t,e){var a=this,s=this.multipleSelectComparison.indexOf(e.name);if(s>=0)this.multipleSelectComparison.splice(s,1),this.curStatisticsItems.forEach(function(t,s){e.name===t.name&&a.curStatisticsItems.splice(s,1)}),this.countItemData.forEach(function(t){e.name===t.name&&(t.isChecked=!1)}),this.newCollegeOrPlayerData.forEach(function(t,a){t.details.forEach(function(t,a){e.name===t.name&&(t.isShow=!1)})});else{this.multipleSelectComparison.push(e.name);var i=[];e.details.forEach(function(t){i.push(t.name)}),this.curStatisticsItems.push({title:e.title,name:e.name,combination:!1,options:i}),this.countItemData.forEach(function(t){e.name===t.name&&(t.isChecked=!0)}),this.newCollegeOrPlayerData.forEach(function(t,a){t.details.forEach(function(t,a){e.name===t.name&&(t.isShow=!0)})})}this.saveCountData.countItemData.id=t,this.saveCountData.countItemData.value=e,this.curSelectCountData=e},getCollegeOrPlayerData:function(){var t=this;this.$waiting.show(),this.newCollegeOrPlayerData=[],Object(l.e)({url:this.curCountUrl,type:"post",data:{statisticsItems:this.curStatisticsItems},success:function(e){e.state?(2===t.curCheckType?e.data.forEach(function(e){e.statisticsResultList.forEach(function(e,a){t.$set(e,"isShow",!0)}),t.newCollegeOrPlayerData.push({title:e.college.name,name:e.college.code,isShow:!0,details:e.statisticsResultList})}):3===t.curCheckType?e.data.forEach(function(e){e.statisticsResultList.forEach(function(e,a){t.$set(e,"isShow",!0)}),t.newCollegeOrPlayerData.push({title:e.user.name,name:e.user.userId,isShow:!0,details:e.statisticsResultList})}):4===t.curCheckType?e.data.forEach(function(e){e.statisticsResultList.forEach(function(e,a){t.$set(e,"isShow",!0)}),t.newCollegeOrPlayerData.push({title:e.clazz.classFullName,name:e.clazz.classId,isShow:!0,details:e.statisticsResultList})}):t.curCheckType>=5&&e.data.forEach(function(e){e.statisticsResultList.forEach(function(e,a){t.$set(e,"isShow",!0)}),t.newCollegeOrPlayerData.push({title:e.rangeVO.name,name:e.rangeVO.name,isShow:!0,details:e.statisticsResultList})}),t.saveCollegeOrPlyaerCountData=JSON.parse(o()(t.newCollegeOrPlayerData))):t.$toast(e.message)}}).always(function(){t.$waiting.close()})},_afterSelectDisTypes:function(t){var e=this;"0"!==t.val&&t.val?(this.countSearchStudentType=t.val,this.countStudentTypeName=t.target.selected):this.countSearchStudentType="","0"===t.val?(this.saveCountData.select.studentType="0",this.defaultOptions.studentType="0"):(this.defaultOptions.studentType=this.countSearchStudentType,this.saveCountData.select.studentType=this.defaultOptions.studentType),this.isCollegeOrPlayer?this.getCollegeOrPlayerData():(this.curCountItems=[],this.countData.forEach(function(t){var a=[];t.details.forEach(function(t){a.push(t.name)}),e.curCountItems.push({title:t.title,name:t.name,combination:t.combination,options:a})}),this.getAllCountData("search"))},_afterSelectCollege:function(t){var e=this;"0"!==t.val&&t.val?(this.countSearchCollegeCode=t.val,this.countCollegeName=t.target.selected):this.countSearchCollegeCode="","0"===t.val?(this.defaultOptions.college="0",this.saveCountData.select.college="0"):(this.defaultOptions.college=this.countSearchCollegeCode,this.saveCountData.select.college=this.defaultOptions.college),this.isCollegeOrPlayer?this.getCollegeOrPlayerData():(this.curCountItems=[],this.countData.forEach(function(t){var a=[];t.details.forEach(function(t){a.push(t.name)}),e.curCountItems.push({title:t.title,name:t.name,combination:t.combination,options:a})}),this.getAllCountData("search"))},_afterSelectGrade:function(t){var e=this;"0"!==t.val&&t.val?(this.countSearchGrade=t.val,this.countGradeName=t.target.selected):this.countSearchGrade="","0"===t.val?(this.defaultOptions.grade="0",this.saveCountData.select.grade="0"):(this.defaultOptions.grade=this.countSearchGrade,this.saveCountData.select.grade=this.defaultOptions.grade),this.isCollegeOrPlayer?this.getCollegeOrPlayerData():(this.curCountItems=[],this.countData.forEach(function(t){var a=[];t.details.forEach(function(t){a.push(t.name)}),e.curCountItems.push({title:t.title,name:t.name,combination:t.combination,options:a})}),this.getAllCountData("search"))},_checkAllCountItem:function(){var t=this;this.allSelectButton?(this.countData=[],this.countItemSelectArr=[],this.curStatisticsItems=[],this.multipleSelectComparison=[],this.newCollegeOrPlayerData=this.newCollegeOrPlayerData.map(function(t){return t.details=t.details.map(function(t){return t.isShow=!1,t}),t})):(this.countData=[],this.countItemSelectArr=[],this.countItemData.forEach(function(e){t.countItemSelectArr.push(e.name),t.countData.push(e)}),this.curStatisticsItems=[],this.multipleSelectComparison=[],this.countItemData.forEach(function(e){t.multipleSelectComparison.push(e.name),t.curStatisticsItems.push(e)}),this.newCollegeOrPlayerData=this.newCollegeOrPlayerData.map(function(t){return t.details=t.details.map(function(t){return t.isShow=!0,t}),t})),this.allSelectButton=!this.allSelectButton},_checkCountItem:function(t,e){var a=this,s=this.countItemSelectArr.indexOf(t.name);if(this.isCombination=!1,s>=0){if(this.isCollegeOrPlayer||(this.isRecordCurOptionsArr=!0),this.countItemSelectArr.splice(s,1),!this.isCollegeOrPlayer){this.newAddcountItem.length;this.countOptionArr.selectArr.forEach(function(t,s){t.id===e&&a.countOptionArr.selectArr.splice(s,1)})}this.countData.forEach(function(e,s){e.name===t.name&&a.countData.splice(s,1)})}else{if(this.countItemSelectArr.push(t.name),this.countData=[],this.newAddcountItem.length>0)JSON.parse(o()(this.newAddcountItem)).reverse().forEach(function(t,e){a.countData.unshift(t)});if(this.countItemData.forEach(function(t,e){a.countItemSelectArr.indexOf(t.name)>=0&&a.countData.push(JSON.parse(o()(t)))}),!this.isCollegeOrPlayer){var i=[];t.details.forEach(function(t){i.push(t.name)});var n={id:e,value:i};this.countOptionArr.selectArr.splice(e,0,n),this.countOptionArr.selectArr.forEach(function(t,e){0===t.value.length&&a.countOptionArr.selectArr.splice(e,1)}),this.countOptionArr.selectArr=this.countOptionArr.selectArr.sort(this.compare("id")),this.countData.forEach(function(t,e){if(a.countOptionArr.selectArr[e].id===e){var s=JSON.parse(o()(t.details));delete t.details,a.$set(t,"details",[]),s.forEach(function(s,i){a.countOptionArr.selectArr[e].value.indexOf(s.name)>=0&&t.details.push(s)})}})}}},compare:function(t){return function(e,a){return e[t]-a[t]}},_clickCountItem:function(t,e,a){var s=this;r()(t.target).siblings(".count-list-more").addClass("display-block"),r()(t.target).siblings(".count-list-more").removeClass("display-none"),this.countOptionIndex=a,this.curCountOptions=e,this.countOptionMark=e.name,this.isCombination=e.combination,this.countOptionData=JSON.parse(o()(e)),this.countOptionArr.selectArr.forEach(function(t){t.id===a&&(s.countOptionSelectArr=t.value)})},_checkCountOption:function(t){var e=this,a=this.countOptionSelectArr.indexOf(t.name);if(this.isCollegeOrPlayer)a>=0?(this.countOptionSelectArr.splice(a,1),0===this.countOptionSelectArr.length?(this._changeCountRadio(this.countOptionIndex,this.curCountOptions),r()(".count-list-more").addClass("display-none"),r()(".count-list-more").removeClass("display-block")):this.newCollegeOrPlayerData.forEach(function(a,s){a.details.forEach(function(a){a.name===e.countOptionMark&&a.statisticsResult.forEach(function(e,s){e.name===t.name&&a.statisticsResult.splice(s,1)})})})):(this.countOptionSelectArr.push(t.name),this.newCollegeOrPlayerData.forEach(function(t,a){t.details.forEach(function(t){t.name===e.countOptionMark&&(t.statisticsResult=e.countOptionData.details.filter(function(t,a){return e.countOptionSelectArr.indexOf(t.name)>=0}))})}));else if(a>=0)this.countOptionSelectArr.splice(a,1),0===this.countOptionSelectArr.length?(this.isCombination?(this.countData[this.countOptionIndex].details.forEach(function(a,s){a.name===t.name&&e.countData[e.countOptionIndex].details.splice(s,1)}),this.countItemData.splice(this.countOptionIndex,1),this.newAddcountItem.splice(this.countOptionIndex,1),this.countOptionArr.selectArr.splice(this.countOptionIndex,1),this.countData.splice(this.countOptionIndex,1)):this._checkCountItem(this.curCountOptions,this.countOptionIndex),r()(".count-list-more").addClass("display-none"),r()(".count-list-more").removeClass("display-block")):this.isCombination?this.countData[this.countOptionIndex].details.forEach(function(a,s){a.name===t.name&&e.countData[e.countOptionIndex].details.splice(s,1)}):this.countData.forEach(function(a,s){a.name===e.countOptionMark&&a.details.forEach(function(e,s){e.name===t.name&&a.details.splice(s,1)})});else{if(this.countOptionSelectArr.push(t.name),1===this.countOptionSelectArr.length)if(this.isCombination)this.countItemData.forEach(function(t,a){e.countOptionMark===t.name&&e.countData.push(JSON.parse(o()(t)))});else{if(this.countData=[],this.countItemSelectArr.push(this.countOptionMark),this.countItemData.forEach(function(t,a){e.countItemSelectArr.indexOf(t.name)>=0&&e.countData.push(JSON.parse(o()(t)))}),this.newAddcountItem.length>0)JSON.parse(o()(this.newAddcountItem)).reverse().forEach(function(t){e.countData.unshift(t)});this.countData.forEach(function(t,a){t.details.forEach(function(s,i){if(e.countOptionArr.selectArr[a].value.indexOf(s.name)<0){var n=t.details.length-e.countOptionArr.selectArr[a].value.length;t.details.splice(i,n)}})})}this.countData[this.countOptionIndex].details=[],this.countOptionData.details.forEach(function(t,a){if(e.countOptionSelectArr.indexOf(t.name)>=0){var s=JSON.parse(o()(t));e.countData[e.countOptionIndex].details.push(s)}})}},_checkCombCountItem:function(t,e){var a=this,s=this.combCountItemSelectData.nameArr.indexOf(t.name);if(s>=0)this.combCountItemSelectData.nameArr.splice(s,1),this.combCountItemSelectData.titleArr.splice(s,1),this.selectCombOptions.forEach(function(t,s){t.id===e&&a.selectCombOptions.splice(s,1)});else{if(this.combCountItemSelectData.nameArr.length>=4)return this.$toast("最多只能选择4个统计项"),!1;this.combCountItemSelectData.nameArr.push(t.name),this.combCountItemSelectData.titleArr.push(t.title);var i=[];t.details.forEach(function(t){i.push(t.name)}),this.selectCombOptions.push({id:e,selectArr:i})}},_clickCombCountItem:function(t,e,a){var s=this;r()(t.target).siblings(".count-list-more").addClass("display-block"),r()(t.target).siblings(".count-list-more").removeClass("display-none"),this.selectCombOptions.forEach(function(t,e){t.id===a&&(s.curSelectCombOptions=t.selectArr)}),this.combCountOptionIndex=a,this.combCountOptionData=JSON.parse(o()(e))},_checkCombCountOption:function(t){var e=this.curSelectCombOptions.indexOf(t.name);e>=0?this.curSelectCombOptions.splice(e,1):this.curSelectCombOptions.push(t.name)},_closeCountItemModal:function(t){r()(t.target).parent().parent(".count-list-more").addClass("display-none"),r()(t.target).parent().parent(".count-list-more").removeClass("display-block")},_deleteCombCount:function(t,e){var a=this;this.newAddcountItem.splice(e,1),this.countItemData.forEach(function(e,s){t.name===e.name&&a.countItemData.splice(s,1)}),this.countData.forEach(function(e,s){t.name===e.name&&a.countData.splice(s,1)}),this.countOptionArr.selectArr.splice(e,1);var s=this.newAddcountItem.length;this.countOptionArr.selectArr.forEach(function(t,e){t.id=e<=s-1?e:t.id-1})},_sureCombination:function(t){var e=this;if(t)return!1;if(this.combCountItemSelectData.nameArr.length<=1)this.$toast("至少选择2个统计项");else{this.isDisabled=!0;var a=[];this.selectCombOptions.forEach(function(t){a.push(t.selectArr)}),this.combstatisticsItems.options=this.multiCartesian(a);var s=0,i=0,n=this.combCountItemSelectData.nameArr.length;this.combCountItemSelectData.nameArr.forEach(function(t){var a="";a=n===++s?"":"x",e.combstatisticsItems.name+=t+a}),this.combCountItemSelectData.titleArr.forEach(function(t){var a="";a=n===++i?"":"x",e.combstatisticsItems.title+=t+a});var c=[];c.push(this.combstatisticsItems),Object(l.e)({url:"/api/statistics/formEngine/business/"+this.curBusinessId+"/statistics?playerId="+this.playerId,type:"post",data:{statisticsItems:c},success:function(t){e.isDisabled=!1,t.state?(t.data.forEach(function(t){var a=[];e.countData.unshift(JSON.parse(o()(t))),e.countItemData.unshift(JSON.parse(o()(t))),t.details.forEach(function(t){a.push(t.name)}),e.countOptionArr.selectArr.forEach(function(t,e){var a=t.id+1;t.id=a});var s={id:0,value:a};e.countOptionArr.selectArr.unshift(JSON.parse(o()(s))),e.newAddcountItem.unshift(t)}),e.isAddCombinationCount=!1):e.$toast(t.message)}})}},cartesian:function(t,e){for(var a=[],s=0;s<t.length;s++)for(var i=0;i<e.length;i++)a.push(this.getCombinationStr(t[s],e[i]));return a},getCombinationStr:function(t,e){return t+"&"+e},multiCartesian:function(t){var e=t.length;if(0==e)return[];if(1==e)return t[0];for(var a=t[0],s=1;s<e;s++)a=this.cartesian(a,t[s]);return a},_showCombinationCount:function(){this.isAddCombinationCount=!0,this.combstatisticsItems={combination:!0,title:"",name:"",options:[]},this.combCountItemSelectData.nameArr=[],this.combCountItemSelectData.titleArr=[],this.selectCombOptions=[]},_exportCurCount:function(t,e){var a=this;this.$waiting.show();var s=new Date,i=s.getMonth()+1,n=s.getDate(),c=s.getFullYear()+"-"+(i<10?"0"+i:i)+"-"+(n<10?"0"+n:n),r=t.title+"统计"+c+".xlsx",u={},d=[];this.isCollegeOrPlayer?(t.statisticsResult.forEach(function(t){d.push(t.name)}),this.$set(u,"combination",!1)):(t.details.forEach(function(t){d.push(t.name)}),this.$set(u,"combination",t.combination)),this.$set(u,"title",t.title),this.$set(u,"name",t.name),this.$set(u,"options",d);var h=o()(u);Object(l.e)({url:"/api/statistics/formEngine/excel/token",type:"post",data:{file_export_params:h},success:function(t){if(t.state){var s="";1===a.curCheckType?s=a.exportCurCountUrl+"&fileName="+r+"&token="+t.data:2===a.curCheckType?s=a.exportCurCountUrl+"&collegeCode="+e.name+"&fileName="+r+"&token="+t.data:3===a.curCheckType?s=a.exportCurCountUrl+"&instructorUserId="+e.name+"&fileName="+r+"&token="+t.data:4===a.curCheckType?s=a.exportCurCountUrl+"&instructorUserId="+e.name+"&fileName="+r+"&token="+t.data:a.curCheckType>=5&&(s=a.exportCurCountUrl+"&fileName="+r+"&token="+t.data),window.location.href=s}else a.$toast(t.message)}}).always(function(){a.$waiting.close()})},changeCountTab:function(t){var e=this;if("export"===t){this.$waiting.show();var a=this.countCollegeName+this.countGradeName+this.countStudentTypeName,s=new Date,i=s.getMonth()+1,n=s.getDate(),c=s.getFullYear()+"-"+(i<10?"0"+i:i)+"-"+(n<10?"0"+n:n),r=a+this.curApp.name+"统计"+c+".xlsx",u=[],d=JSON.parse(o()(this.countData)),h="",p="";1===this.curCheckType?(d.forEach(function(t){var a=t.details;delete t.details,e.$set(t,"options",[]),a.forEach(function(e){t.options.push(e.name)}),u.push(t)}),p=o()(u)):p=o()(this.curStatisticsItems),Object(l.e)({url:"/api/statistics/formEngine/excel/token",type:"post",data:{file_export_params:p},success:function(t){t.state?(h=1===e.curCheckType?e.exportCountUrt+"&fileName="+r+"&token="+t.data:(e.curCheckType,e.exportCountUrt+"&fileName="+r+"&token="+t.data),window.location.href=h):e.$toast(t.message)}}).always(function(){e.$waiting.close()})}else this.countTabActive="filter"===t?"filter":"setting"},_closeCountModal:function(){this.countModal=!1,this.saveCountData.countTabActive=this.countTabActive,this.saveCountData.countData=this.countData,this.saveCountData.countItemSelectArr=this.countItemSelectArr,this.saveCountData.oldCountItemData=this.countItemData,this.saveCountData.combCountItemData=this.combinationCountItemData,this.saveCountData.newAddcountItem=this.newAddcountItem,this.saveCountData.countOptionArray=this.countOptionArr.selectArr}}}),B={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.curApp?s("div",{staticClass:"app-detail-page-form",class:t.data?"":"sub"},[t.isShowStatistics?s("form-statistics",{staticClass:"form-statistics",attrs:{curBusiness:t.curBusiness,playerId:t.playerId,searchParams:t.searchParams},on:{back:function(e){t.isShowStatistics=!1}}}):t._e(),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShowStatistics,expression:"!isShowStatistics"}]},[s("div",{staticClass:"header"},[t.data?t._e():s("i",{staticClass:"maticon pull-left back-link",domProps:{innerHTML:t._s(t.icons("arrow_back"))},on:{click:t._back}},[t._v("arrow_back")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.collapsed,expression:"collapsed"}],staticClass:"appNameControl"},[t._v(t._s(t.curApp.name))]),t._v(" "),s("a",{staticClass:"pull-right apartment-link",attrs:{href:"javascript:;"},on:{click:function(e){return t.unfoldAndfold()}}},[t.collapsed?s("span",[t._v("展开")]):s("span",[t._v("收起")])]),t._v(" "),t.headerShow?s("div",{staticClass:"title-div",class:t.collapsed?"collapsed":""},[s("div",{staticClass:"app-icon-div"},[s("div",{style:{"background-image":t.curApp.background}},[t.curApp.imgType&&"1"!==t.curApp.imgType?"2"===t.curApp.imgType?s("i",{staticClass:"app-icon"},[s("span",{staticClass:"saasicon-44px",class:["saasicon-44px-"+t.curApp.imgPath]})]):t._e():s("i",{staticClass:"maticon app-icon",domProps:{innerHTML:t._s(t.icons(t.curApp.imgPath))}},[t._v(t._s(t.curApp.imgPath))])])]),t._v(" "),s("div",{staticClass:"form-group app-name"},[s("label",[t._v(t._s(t.curApp.name))])]),t._v(" "),t.businessList.length>0?s("div",{staticClass:"input-group app-business"},[s("span",{staticClass:"input-group-addon"},[t._v("业务期")]),t._v(" "),s("v-select",{staticClass:"btn-block",attrs:{options:t.businessList,"options-value":"id","options-label":"name","close-on-select":"",justify:""},on:{afterSelected:t._afterSelectBusiness},model:{value:t.curBusinessId,callback:function(e){t.curBusinessId=e},expression:"curBusinessId"}}),t._v(" "),t.showBatch?s("span",{staticClass:"input-group-addon",staticStyle:{color:"#298df7 !important",cursor:"pointer"},on:{click:function(e){return t.muchExport()}}},[t._v("多业务期导出")]):t._e()],1):t._e(),t._v(" "),s("div",{staticClass:"input-group text-center app-business"},[s("span",[t._v(t._s(t.errorMessage))])])]):t._e(),t._v(" "),s("div",{staticClass:"tab-div"},[t.curBusiness?s("GeminiScrollbar",{staticClass:"tab-container",attrs:{scrollY:!1}},[t.curBusiness?s("div",{staticClass:"tab",class:"guide"===t.curTab?"active":"",attrs:{title:"指南"},on:{click:function(e){return t.guide()}}},[t._v("指南")]):t._e(),t._v(" "),t.curBusiness&&t.curBusiness.canApplyOnAuthority?s("div",{staticClass:"tab",class:"preview"===t.curTab?"active":"",attrs:{title:"我的表单"},on:{click:function(e){return t.myForm()}}},[t._v("我的表单")]):t._e(),t._v(" "),t._l(t.curBusiness.players,function(e,a){return t.curBusiness?s("div",{key:a,staticClass:"tab",class:t.curTab===e.name?"active":"",attrs:{title:e.name},on:{click:function(a){return t.showPlayerTable(e)}}},[t._v(t._s(e.name))]):t._e()})],2):t._e()],1)]),t._v(" "),t.curBusiness?s("div",{staticClass:"middle",class:t.collapsed?"middle-top":""},["guide"===t.curTab?s("GeminiScrollbar",{staticClass:"tab-content"},[s("div",{staticClass:"guide-content",domProps:{innerHTML:t._s(t.curBusiness.business.guide)}})]):t._e(),t._v(" "),t.myFormPreview?s("div",{staticClass:"preview-container"},[t.multiForm?s("div",{staticClass:"tab-content"},[s("v-table",{directives:[{name:"show",rawName:"v-show",value:t.tableShowControl&&!t.countPartShow&&!t.showPlayerForm,expression:"tableShowControl&&(!countPartShow)&&(!showPlayerForm)"}],attrs:{pagesize:"10",idField:"id",url:t.myFormTableUrl,columnsControl:!0,method:t.method,order:!0,search:!1,columns:t.myFormsColumn},on:{columnExchanged:t._columnExchanged2}},[s("div",{staticClass:"btn-group pull-right",attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[s("button",{staticClass:"btn add clearBtnBorder add-form-btn",attrs:{type:"button"},on:{click:t._addForm}},[t._v("新增")])])])],1):s("div",[t.destoryForm?t._e():s("preview",{attrs:{appid:t.curApp.id,playerId:t.playerId,data:t.formData_components,title:t.formData_name,backArrowControl:t.backControl,script:t.formData_property_script,saveBtnContrl:t.saveBtnContrl,log:t.log,defaultData:t.recordData,businessId:t.curBusinessId,previewformType:"curPage",previewType:"form",fileServer:t.uploadFile},on:{exportModel:t.exportModel,submit:t._submit,back:function(e){t.showPlayerForm=!1}}})],1)]):t._e(),t._v(" "),t.showPlayerForm?s("div",{staticClass:"preview-container"},[s("preview",{attrs:{appid:t.curApp.id,playerId:t.playerId,data:t.formData_components_check,title:t.formData_name_check,businessId:t.curBusinessId,saveBtnContrl:t.saveBtnContrl,script:t.formData_property_script_check,log:t.log,defaultData:t.recordData,previewformType:"childerPage",previewType:"form",fileServer:t.uploadFile},on:{submit:t._submit,back:function(e){t.showPlayerForm=!1,t._focus()},onload:t._downloadPdf,exportModel:t.exportModel}})],1):t._e(),t._v(" "),t.partnerContent?s("div",{staticClass:"partner-table app-detail-table",style:{height:t.collapsed?"100%":"auto"}},[t.importPartners?s("v-import",t._b({on:{backParentPage:function(e){return t.backParentPage()}}},"v-import",t.importParams,!1)):t._e(),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.tableShowControl&&!t.countPartShow&&!t.showPlayerForm,expression:"tableShowControl&&(!countPartShow)&&(!showPlayerForm)"}],staticClass:"business-node-time",domProps:{innerHTML:t._s(t.curBusinessTime)}}),t._v(" "),s("v-table",{directives:[{name:"show",rawName:"v-show",value:t.tableShowControl&&!t.countPartShow&&!t.showPlayerForm,expression:"tableShowControl&&(!countPartShow)&&(!showPlayerForm)"}],ref:t.curTab+"_table",attrs:{columnsControl:!0,url:t.url+t.advancedSearchParams+t.sortParams,method:t.method,pagesize:"10",order:!0,idField:"id",columns:t.columns,search:!1},on:{columnExchanged:t._columnExchanged,srotClick:t._srotClick}},[s("span",{attrs:{slot:"btn-group"},slot:"btn-group"},[s("span",{staticClass:"pull-right operation-group",on:{click:function(e){return t._showBaobiao()}}},[t._v("报表")]),t._v(" "),s("span",{staticClass:"pull-right operation-group export",on:{click:function(e){return t.exportOperation()}}},[t._v("导出")]),t._v(" "),t.curPlayer.batch?s("span",{class:t.curPlayer.batch?"operation-group":"operation-group-disabled",on:{click:function(e){return t.bulkOperation()}}},[t._v("通过Excel批量操作")]):t._e(),t._v(" "),s("span",{staticClass:"pull-right operation-group",on:{click:t._showStatistics}},[t._v("统计")]),t._v(" "),s("span",{staticClass:"pull-right operation-group export",on:{click:function(e){return t._showSearch()}}},[t._v("高级搜索")])])])],1):t._e(),t._v(" "),s("v-modal",{staticClass:"modelBaobiao",attrs:{show:t.showSearchModel,effect:"fade",width:"720"}},[s("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v("高级搜索")])]),t._v(" "),s("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[t._l(t.advancedSearch.searchItems,function(e,a){return s("div",{key:"search-item-"+a,staticClass:"form-group advancedSearch-group"},[s("div",{staticClass:"box_flex align_center advanced"},[s("v-select",{attrs:{options:t.advancedSearch.tableOptions,"options-value":"name","options-label":"title",search:!0},on:{afterSelected:function(a){return t.advanceSelected("table",e)}},model:{value:e.table,callback:function(a){t.$set(e,"table",a)},expression:"searchItem.table"}}),t._v(" "),e.tableChild?t._e():s("v-select",{attrs:{options:e.condition,search:!0},on:{afterSelected:t.advanceSelected},model:{value:e.conditionVal,callback:function(a){t.$set(e,"conditionVal",a)},expression:"searchItem.conditionVal"}}),t._v(" "),"empty"!==e.conditionVal&&"filled"!==e.conditionVal?s("div",{staticClass:"box_flex align_center"},[e.table&&-1!==e.table.indexOf("table")?s("v-select",{attrs:{options:t.getTableChildList(e.table),search:!0,"options-value":"name","options-label":"title","data-index":a},on:{afterSelected:function(a){return t.advanceSelected("tableChild",e)}},model:{value:e.tableChild,callback:function(a){t.$set(e,"tableChild",a)},expression:"searchItem.tableChild"}}):t._e(),t._v(" "),e.table&&-1!==e.table.indexOf("nameCard")?s("v-select",{attrs:{options:t.getTableChildList(e.table),search:!0,"options-value":"name","options-label":"title","data-index":a},on:{afterSelected:function(a){return t.advanceSelected("tableChild",e)}},model:{value:e.tableChild,callback:function(a){t.$set(e,"tableChild",a)},expression:"searchItem.tableChild"}}):t._e(),t._v(" "),e.tableChild?s("v-select",{attrs:{options:e.childCondition,search:!0},on:{afterSelected:t.advanceSelected},model:{value:e.childConditionVal,callback:function(a){t.$set(e,"childConditionVal",a)},expression:"searchItem.childConditionVal"}}):t._e(),t._v(" "),"empty"!==e.childConditionVal&&"filled"!==e.childConditionVal?s("div",{staticClass:"box_flex align_center"},[e.table&&-1!==e.table.indexOf("address")?s("v-select",{attrs:{options:t.getAddressOptions("province"),search:!0,"options-value":"name","options-label":"name","data-index":a},on:{afterSelected:t.advanceSelected},model:{value:e.province,callback:function(a){t.$set(e,"province",a)},expression:"searchItem.province"}}):t._e(),t._v(" "),e.province&&e.table&&-1!==e.table.indexOf("address")?s("v-select",{attrs:{options:t.getAddressOptions("city",e.province),search:!0,"options-value":"name","options-label":"name"},on:{afterSelected:t.advanceSelected},model:{value:e.city,callback:function(a){t.$set(e,"city",a)},expression:"searchItem.city"}}):t._e(),t._v(" "),e.city&&-1!==e.table.indexOf("address")?s("v-select",{attrs:{options:t.getAddressOptions("area",e.city,e.province),search:!0,"options-value":"name","options-label":"name"},on:{afterSelected:t.advanceSelected},model:{value:e.area,callback:function(a){t.$set(e,"area",a)},expression:"searchItem.area"}}):t._e(),t._v(" "),!(e.table&&-1!==e.table.indexOf("select")||e.table&&-1!==e.table.indexOf("radio"))||"eq"!==e.conditionVal&&"ne"!==e.conditionVal?!e.table||-1===e.table.indexOf("checkbox")||"in"!==e.conditionVal&&"nin"!==e.conditionVal&&"include"!==e.conditionVal&&"exclude"!==e.conditionVal&&"eq"!==e.conditionVal&&"ne"!==e.conditionVal?-1===e.tableChild.indexOf("checkbox")||"eq"!==e.childConditionVal&&"ne"!==e.childConditionVal?"in"!==e.childConditionVal&&"nin"!==e.childConditionVal&&(-1===e.tableChild.indexOf("select")&&-1===e.tableChild.indexOf("radio")||"eq"!==e.childConditionVal&&"ne"!==e.childConditionVal)?e.table&&-1===e.table.indexOf("address")?s("input",{directives:[{name:"model",rawName:"v-model",value:e.values,expression:"searchItem.values"}],staticClass:"value-input",attrs:{type:"text"},domProps:{value:e.values},on:{input:function(a){a.target.composing||t.$set(e,"values",a.target.value)}}}):t._e():s("v-select",{attrs:{options:t.getInOptions(e.table,e.tableChild),search:!0,multiple:"true"},on:{afterSelected:t.advanceSelected},model:{value:e.values,callback:function(a){t.$set(e,"values",a)},expression:"searchItem.values"}}):s("v-select",{attrs:{options:t.getInOptions(e.table,e.tableChild),search:!0},on:{afterSelected:t.advanceSelected},model:{value:e.values,callback:function(a){t.$set(e,"values",a)},expression:"searchItem.values"}}):s("v-select",{attrs:{options:t.getInOptions(e.table),search:!0,multiple:"true"},on:{afterSelected:t.advanceSelected},model:{value:e.values,callback:function(a){t.$set(e,"values",a)},expression:"searchItem.values"}}):s("v-select",{attrs:{options:t.getInOptions(e.table),search:!0},on:{afterSelected:t.advanceSelected},model:{value:e.values,callback:function(a){t.$set(e,"values",a)},expression:"searchItem.values"}})],1):t._e()],1):t._e(),t._v(" "),s("button",{staticClass:"btn deleteBtn clearBtnBorder",staticStyle:{"margin-left":"12px"},attrs:{type:"button","data-index":a},on:{click:function(e){return t.deleteSearchItem(a)}}},[t._v("删除")])],1)])}),t._v(" "),s("button",{staticClass:"btn addBtn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){return t.addSearchItem()}}},[t._v("新增")])],2),t._v(" "),s("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showSearchModel=!1}}},[t._v("取消")]),t._v(" "),s("button",{staticClass:"btn submit-btn clearBtnBorder",class:{disabled:t.isDisabled},attrs:{type:"button"},on:{click:function(e){return t.execAdvancedSearch()}}},[t._v("搜索")])])]),t._v(" "),t.preview?s("div",{staticClass:"preview-container",style:"opacity:"+(t.pdfSetting.downloading?0:1)},[s("preview",{attrs:{data:t.formData.components,appid:t.curApp.id,title:t.formData.name,script:t.formData.property.script,authorities:t.authorities,businessId:t.curBusinessId,defaultData:t.recordData,fileServer:t.uploadFile,isPdf:t.pdfSetting.log,previewType:"flow"},on:{onload:t._downloadPdf,submit:t._submit,back:t._closePreview,exportModel:t.exportModel}})],1):t._e(),t._v(" "),s("v-modal",{attrs:{show:t.batchModalShow,effect:"fade",width:"480"}},[s("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v("批量导出")])]),t._v(" "),s("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[s("button",{staticClass:"export-wrap",on:{click:t._outputPdf}},[s("img",{attrs:{src:a("OmAG"),alt:""}}),t._v(" "),s("button",{staticClass:"btn blockBtn",attrs:{type:"button"}},[t._v("导出表单(PDF格式)")])]),t._v(" "),s("button",{staticClass:"export-wrap",on:{click:t._outputExcel}},[s("img",{attrs:{src:a("/QMe"),alt:""}}),t._v(" "),s("button",{staticClass:"btn blockBtn",attrs:{type:"button"}},[t._v("导出汇总表(EXCEL格式)")])]),t._v(" "),s("button",{staticClass:"export-wrap",attrs:{type:"button",disabled:t.haveModel},on:{click:function(e){return t.exportModelPi("WORD")}}},[s("img",{attrs:{src:a("HwOI"),alt:""}}),t._v(" "),s("button",{staticClass:"btn blockBtn",attrs:{type:"button",disabled:t.haveModel}},[t._v("根据模板导出表单(WORD格式)")])]),t._v(" "),s("button",{staticClass:"export-wrap",attrs:{type:"button",disabled:t.haveModel},on:{click:function(e){return t.exportModelPi("PDF")}}},[s("img",{attrs:{src:a("OmAG"),alt:""}}),t._v(" "),s("button",{staticClass:"btn blockBtn",attrs:{type:"button",disabled:t.haveModel}},[t._v("根据模板导出表单(PDF格式)")])])]),t._v(" "),s("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.batchModalShow=!1}}},[t._v("取消")])])]),t._v(" "),s("v-modal",{staticClass:"outputModal",attrs:{show:t.outputModalShow,effect:"fade",width:"520"}},[s("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v("导出——字段选择")])]),t._v(" "),s("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[s("ul",{staticClass:"list-group"},[s("li",{staticClass:"list-group-item field-item output-active",on:{click:t.selectAllExport}},[t.allCheck?s("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons("check_box"))}},[t._v("check_box")]):s("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons("check_box_outline_blank"))}},[t._v("check_box_outline_blank")]),t._v(" "),s("span",[t._v("全选")])]),t._v(" "),s("li",{staticClass:"list-group-item field-item",staticStyle:{cursor:"auto","font-weight":"bold"}},[t._v("表单字段")]),t._v(" "),t._l(t.outList,function(e,a){return t.notAllowOutput.indexOf(e.componentType)<0?s("li",{key:a,staticClass:"list-group-item field-item",class:t.outputList.indexOf(e.name)<0?"":"output-active",on:{click:function(a){return t._changeOutputList(e,"outputList")}}},[t.outputList.indexOf(e.name)<0?s("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons("check_box_outline_blank"))}},[t._v("check_box_outline_blank")]):s("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons("check_box"))}},[t._v("check_box")]),t._v(" "),s("span",[t._v(t._s(e.title))])]):t._e()}),t._v(" "),s("li",{staticClass:"list-group-item field-item",staticStyle:{cursor:"auto","font-weight":"bold"}},[t._v("国标代码")]),t._v(" "),t._l(t.nationalArray,function(e,a){return t.notAllowOutput.indexOf(e.componentType)<0?s("li",{key:a,staticClass:"list-group-item field-item",class:t.nationalList.indexOf(e.title)<0?"":"output-active",on:{click:function(a){return t._changeOutputList(e,"nationalList")}}},[t.nationalList.indexOf(e.title)<0?s("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons("check_box_outline_blank"))}},[t._v("check_box_outline_blank")]):s("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons("check_box"))}},[t._v("check_box")]),t._v(" "),s("span",[t._v(t._s(e.title))])]):t._e()})],2)]),t._v(" "),s("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("div",{staticClass:"input-group merge-table pull-left"},[s("span",{on:{click:t._mergeTable}},[t.isMergeTable?s("i",{staticClass:"maticon role-icon",domProps:{innerHTML:t._s(t.icons("check_box"))}},[t._v("check_box")]):s("i",{staticClass:"maticon role-icon",domProps:{innerHTML:t._s(t.icons("check_box_outline_blank"))}},[t._v("check_box_outline_blank")])]),t._v(" "),s("span",{staticClass:"role-name"},[t._v("是否将勾选的字段合并在同个表格")])]),t._v(" "),s("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.outputModalShow=!1}}},[t._v("取消")]),t._v(" "),s("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t._sureToOutput}},[t._v("确定")])])]),t._v(" "),s("v-modal",{staticClass:"modelBaobiao",attrs:{show:t.showBaobiaomodel,effect:"fade",width:"650"}},[s("div",{staticClass:"modal-body",staticStyle:{height:"500px !important",overflow:"hidden"},attrs:{slot:"modal-body"},slot:"modal-body"},[s("div",{staticClass:"tab-div"},t._l(t.jisuanArray,function(e,a){return s("div",{staticClass:"tab",class:{active:t.clickIndex==a},on:{click:function(e){return t._checkBiao(a)}}},[t._v(t._s(e.reportName))])}),0),t._v(" "),s("div",{staticClass:"middle",staticStyle:{overflow:"hidden"}},[s("div",{staticClass:"left_menu",staticStyle:{"overflow-x":"hidden","overflow-y":"auto"}},t._l(t.jisuanArray[t.clickIndex].appReportFlowRangeVO,function(e){return s("div",{staticClass:"menu_item"},[s("p",{staticClass:"titlemenu"},[t._v(t._s("全校"==e.range?"":e.range+":"))]),t._v(" "),t._l(e.appReportCountVO,function(e){return s("p",{staticClass:"caculate"},[s("span",{staticClass:"fx"},[t._v(t._s(e.countName))]),t._v(" "),s("span",{staticClass:"zhi"},[t._v(t._s(e.countResult))])])})],2)}),0),t._v(" "),s("div",{staticClass:"right_select"},[s("h5",{staticClass:"titleselect"},[t._v("选择表单统计范围 :")]),t._v(" "),"bySchool"==t.curPlayerType?s("div",{staticClass:"info-options"},[s("span",{on:{click:function(e){return t._setValue(1)}}},[s("i",{staticClass:"maticon",class:1==t.opt?"active":"",domProps:{innerHTML:t._s(t.icons(1==t.opt?"radio_button_checked":"radio_button_unchecked"))}}),t._v("全校\n                ")])]):t._e(),t._v(" "),"byCollege"==t.curPlayerType||"bySchool"==t.curPlayerType?s("div",{staticClass:"info-options"},[s("span",{on:{click:function(e){return t._setValue(2)}}},[s("i",{staticClass:"maticon",class:2==t.opt?"active":"",domProps:{innerHTML:t._s(t.icons(2==t.opt?"radio_button_checked":"radio_button_unchecked"))}}),t._v("各学院对比\n                ")])]):t._e(),t._v(" "),"byTeacher"==t.curPlayerType||"byCollege"==t.curPlayerType||"bySchool"==t.curPlayerType?s("div",{staticClass:"info-options"},[s("span",{on:{click:function(e){return t._setValue(3)}}},[s("i",{staticClass:"maticon",class:3==t.opt?"active":"",domProps:{innerHTML:t._s(t.icons(3==t.opt?"radio_button_checked":"radio_button_unchecked"))}}),t._v("各辅导员对比\n                ")])]):t._e(),t._v(" "),"byClass"==t.curPlayerType||"bySchool"==t.curPlayerType||"byCollege"==t.curPlayerType||"byTeacher"==t.curPlayerType?s("div",{staticClass:"info-options"},[s("span",{on:{click:function(e){return t._setValue(4)}}},[s("i",{staticClass:"maticon",class:4==t.opt?"active":"",domProps:{innerHTML:t._s(t.icons(4==t.opt?"radio_button_checked":"radio_button_unchecked"))}}),t._v("各班级对比\n                ")])]):t._e(),t._v(" "),t._l(t.baobiaoRangeArr,function(e,a){return s("div",{staticClass:"info-options"},[s("span",{on:{click:function(a){return t._setValue(e.opt)}}},[s("i",{staticClass:"maticon",class:t.opt==e.opt?"active":"",domProps:{innerHTML:t._s(t.icons(t.opt==e.opt?"radio_button_checked":"radio_button_unchecked"))}}),t._v(t._s(e.name)+"\n                ")])])})],2)])]),t._v(" "),s("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showBaobiaomodel=!1}}},[t._v("取消")]),t._v(" "),s("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button",disabled:t.baobiaoExportBOOL},on:{click:t._baobiaoExport}},[t._v("导出")])])]),t._v(" "),s("v-modal",{attrs:{show:t.showMuchBusModel,effect:"fade"}},[s("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v("多业务期导出")])]),t._v(" "),s("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[s("div",{staticStyle:{padding:"20px 15px"}},[s("label",[t._v("选择导出的业务期:")]),t._v(" "),s("v-select",{staticClass:"btn-block",staticStyle:{width:"350px",display:"inline-block","padding-left":"15px"},attrs:{options:t.businessBatchBusList,search:!0,multiple:!0,closeOnSelect:!1,"options-value":"id","options-label":"name","close-on-select":"",justify:""},model:{value:t.selectBusIds,callback:function(e){t.selectBusIds=e},expression:"selectBusIds"}})],1),t._v(" "),s("ul",{staticClass:"list-group"},[s("li",{staticClass:"list-group-item field-item output-active",on:{click:t.selectAllExportBatchBus}},[t.allCheckBatchBus?s("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons("check_box"))}},[t._v("check_box")]):s("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons("check_box_outline_blank"))}},[t._v("check_box_outline_blank")]),t._v(" "),s("span",[t._v("全选")])]),t._v(" "),s("li",{staticClass:"list-group-item field-item",staticStyle:{cursor:"auto","font-weight":"bold"}},[t._v("表单字段")]),t._v(" "),t._l(t.outListBatchBus,function(e,a){return s("li",{key:a,staticClass:"list-group-item field-item output-active",on:{click:function(s){return t._changeOutputListBatchBus(e,a)}}},[e.exportable?s("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons("check_box"))}},[t._v("check_box")]):s("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons("check_box_outline_blank"))}},[t._v("check_box_outline_blank")]),t._v(" "),s("span",[t._v(t._s(e.title))])])})],2)]),t._v(" "),s("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("div",{staticClass:"input-group merge-table pull-left"},[s("span",{staticStyle:{"font-size":"12px",color:"#555","padding-left":"15px"}},[t._v("暂不支持表格附件导出")])]),t._v(" "),s("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showMuchBusModel=!1}}},[t._v("取消")]),t._v(" "),s("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t._batchBusExport}},[t._v("导出")])])]),t._v(" "),s("v-modal",{attrs:{show:t.showDetail,effect:"fade"}},[s("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[s("h5",{staticClass:"modal-title"},[t._v(t._s(t.student.name))])]),t._v(" "),s("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},t._l(t.student.categories,function(e,a){return s("div",{key:a,staticClass:"category"},[s("p",{staticClass:"text-muted category-title"},[t._v(t._s(e.title))]),t._v(" "),s("ul",{staticClass:"category-list"},t._l(e.fields,function(e,a){return s("li",{key:a},[s("span",{staticClass:"field-name"},[t._v(t._s(e.name))]),t._v(" "),s("span",{staticClass:"field-value"},[t._v(t._s(e.value||t.fieldDefaultText))])])}),0)])}),0),t._v(" "),s("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[s("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showDetail=!1}}},[t._v("返回")])])])],1):t._e(),t._v(" "),s("v-modal",{staticClass:"count-modal",staticStyle:{top:"-10px"},attrs:{show:t.countModal,effect:"fade",width:"1080"}},[s("div",{staticClass:"modal-header count-header box_flex box_between",attrs:{slot:"modal-header"},slot:"modal-header"},[s("div",{staticClass:"box_flex align_center"},[s("i",{staticClass:"maticon close-modal",domProps:{innerHTML:t._s(t.icons("close"))},on:{click:t._closeCountModal}},[t._v("close")]),t._v(" "),s("span",{staticClass:"count-title"},[t._v("统计")])]),t._v(" "),s("div",{staticClass:"pull-right modal-header-right"},[s("i",{staticClass:"maticon upload-all-count",class:{active:"upload"===t.countTabActive},attrs:{title:"导出"},domProps:{innerHTML:t._s(t.icons("file_download"))},on:{click:function(e){return t.changeCountTab("export")}}},[t._v("file_download")]),t._v(" "),s("i",{staticClass:"maticon filter-icon",class:{active:"filter"===t.countTabActive},attrs:{title:"筛选"},domProps:{innerHTML:t._s(t.icons("filter_list"))},on:{click:function(e){return t.changeCountTab("filter")}}},[t._v("filter_list")]),t._v(" "),s("i",{staticClass:"maticon setting-icon",class:{active:"setting"===t.countTabActive},attrs:{title:"设置"},domProps:{innerHTML:t._s(t.icons("settings"))},on:{click:function(e){return t.changeCountTab("setting")}}},[t._v("settings")])])]),t._v(" "),s("div",{attrs:{slot:"modal-body"},slot:"modal-body"},[s("div",{staticClass:"row count-row"},[t.isCollegeOrPlayer?s("div",[t.newCurCountData.length>0?s("div",{staticClass:"count-modal-left",class:t.countTabActive?"col-sm-9":"col-sm-12",style:"height:"+t.countContentHeight+"px;"},t._l(t.newCurCountData,function(e,a){return s("div",{key:a,staticClass:"row bar-row"},[s("div",{staticClass:"col-sm-2 count-bar-title",attrs:{title:e.title}},[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"col-sm-10 new-count-left-chart"},t._l(e.details,function(a,i){return a.isShow?s("div",{key:i,staticClass:"new-count-container"},[s("div",{staticClass:"new-title",attrs:{title:a.title}},[t._v(t._s(a.title))]),t._v(" "),s("div",{staticClass:"count-bar-container",style:"500px;",attrs:{title:t.countTabActive}},t._l(a.statisticsResult,function(e,i){return s("div",{key:i,staticClass:"bar-container",style:"width:"+((t.newBarLength-a.statisticsResult.length*t.barCircleWidth)*parseFloat(e.percent)/100+8)+"px;"},[s("p",{staticClass:"count-bar",style:"opacity:"+(1-(a.statisticsResult.length>0?.75*i/a.statisticsResult.length:0))+";",attrs:{title:e.name+" "+e.percent}}),t._v(" "),(t.newBarLength-a.statisticsResult.length*t.barCircleWidth)*parseFloat(e.percent)/100+8>=40?s("p",{staticClass:"count-bar-text",style:"width:"+((t.newBarLength-a.statisticsResult.length*t.barCircleWidth)*parseFloat(e.percent)/100+8)+"px;",attrs:{title:e.name+" "+e.count+"人"}},[t._v(t._s(e.name)+" "+t._s(e.count)+"人")]):s("p",{staticClass:"count-bar-text"},[t._v(" ")])])}),0),t._v(" "),s("i",{staticClass:"maticon more-vert-icon dropdown-toggle",attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},domProps:{innerHTML:t._s(t.icons("more_vert"))}},[t._v("more_vert")]),t._v(" "),s("ul",{staticClass:"dropdown-menu count-bar-more"},[s("li",{on:{click:function(s){return t._exportCurCount(a,e)}}},[t._v("导出此统计项数据")])])]):t._e()}),0)])}),0):s("div",{staticClass:"count-modal-left",class:t.countTabActive?"col-sm-9":"col-sm-12",style:"height:"+t.countContentHeight+"px;"},[s("h3",{staticClass:"text-center"},[t._v("暂无统计")])])]):s("div",[t.curCountData.length>0?s("div",{staticClass:"count-modal-left",class:t.countTabActive?"col-sm-9":"col-sm-12",style:"height:"+t.countContentHeight+"px;"},t._l(t.curCountData,function(e,a){return s("div",{key:a,staticClass:"row bar-row"},[s("div",{staticClass:"col-sm-2 count-bar-title",attrs:{title:e.title}},[t._v(t._s(e.title))]),t._v(" "),s("div",{staticClass:"col-sm-10 count-left-chart"},[s("div",{staticClass:"count-bar-container",style:558},t._l(e.details,function(a,i){return s("div",{key:i,staticClass:"bar-container",style:"width:"+((t.barLength-e.details.length*t.barCircleWidth)*parseFloat(a.percent)/100+8)+"px;"},[s("p",{staticClass:"count-bar",style:"opacity:"+(1-(e.details.length>0?.75*i/e.details.length:0))+";",attrs:{title:a.name+" "+a.percent}}),t._v(" "),(t.barLength-e.details.length*t.barCircleWidth)*parseFloat(a.percent)/100+8>=40?s("p",{staticClass:"count-bar-text",style:"width:"+((t.barLength-e.details.length*t.barCircleWidth)*parseFloat(a.percent)/100+8)+"px;",attrs:{title:a.name+" "+a.count+"人"}},[t._v(t._s(a.name)+" "+t._s(a.count)+"人")]):s("p",{staticClass:"count-bar-text"},[t._v(" ")])])}),0),t._v(" "),s("i",{staticClass:"maticon more-vert-icon dropdown-toggle",attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},domProps:{innerHTML:t._s(t.icons("more_vert"))}},[t._v("more_vert")]),t._v(" "),s("ul",{staticClass:"dropdown-menu count-bar-more"},[s("li",{on:{click:function(a){return t._exportCurCount(e)}}},[t._v("导出此统计项数据")])])])])}),0):s("div",{staticClass:"count-modal-left",class:t.countTabActive?"col-sm-9":"col-sm-12",style:"height:"+t.countContentHeight+"px;"},[s("h3",{staticClass:"text-center"},[t._v("暂无统计")])])]),t._v(" "),t.countTabActive?s("div",{staticClass:"col-sm-3 count-modal-right"},["filter"===t.countTabActive?s("div",{staticClass:"filter-container",style:"height:"+t.setHeight+"px;"},[2!=t.curCheckType?s("v-select",{staticClass:"btn-block filter-select",attrs:{options:t.collegeSelectOptions,"options-value":"code","options-label":"name",value:t.defaultOptions.college,autoSelect:!1},on:{afterSelected:t._afterSelectCollege}}):t._e(),t._v(" "),s("v-select",{staticClass:"btn-block filter-select",attrs:{options:t.gradeOptions,"options-value":"id","options-label":"label",autoSelect:!1,value:t.defaultOptions.grade},on:{afterSelected:t._afterSelectGrade}}),t._v(" "),s("v-select",{staticClass:"btn-block filter-select",attrs:{options:t.dictTypes,"options-value":"value","options-label":"label",autoSelect:!1,value:t.defaultOptions.studentType},on:{afterSelected:t._afterSelectDisTypes}})],1):"setting"===t.countTabActive?s("div",{staticClass:"setting-container"},[t.isAddCombinationCount?s("div",{staticClass:"add-combination-count",style:"height:"+t.setHeight+"px;"},[s("div",{staticClass:"header-title"},[t._v("组合统计项")]),t._v(" "),s("div",{staticClass:"combination-count-list",style:"height:"+t.combContentHeight+"px;"},t._l(t.combinationCountItemData,function(e,a){return s("div",{key:a,staticClass:"input-group"},[s("span",{on:{click:function(s){return t._checkCombCountItem(e,a)}}},[t.combCountItemSelectData.nameArr.indexOf(e.name)>=0?s("i",{staticClass:"maticon checkbox-icon checked-color active",domProps:{innerHTML:t._s(t.icons("check_box"))}},[t._v("check_box")]):s("i",{staticClass:"maticon checkbox-icon unchecked-color",domProps:{innerHTML:t._s(t.icons("check_box_outline_blank"))}},[t._v("check_box_outline_blank")])]),t._v(" "),s("span",{staticClass:"checkbox-name",class:t.combCountItemSelectData.nameArr.indexOf(e.name)>=0?"checked-color":"unchecked-color",attrs:{title:e.title}},[t._v(t._s(e.title))]),t._v(" "),t.combCountItemSelectData.nameArr.indexOf(e.name)>=0?s("i",{staticClass:"maticon pull-right more-icon dropdown-toggle",attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},domProps:{innerHTML:t._s(t.icons("more_vert"))},on:{click:function(s){return t._clickCombCountItem(s,e,a)}}},[t._v("more_vert")]):t._e(),t._v(" "),s("ul",{staticClass:"dropdown-menu count-list-more"},[s("div",{staticClass:"creat-modal-header"},[s("i",{staticClass:"maticon pull-right close-btn",domProps:{innerHTML:t._s(t.icons("close"))},on:{click:t._closeCountItemModal}},[t._v("close")])]),t._v(" "),s("div",{staticClass:"creat-modal-content"},t._l(e.details,function(e,a){return s("div",{key:a,staticClass:"input-group"},[s("span",{on:{click:function(a){return t._checkCombCountOption(e)}}},[t.curSelectCombOptions.indexOf(e.name)>=0?s("i",{staticClass:"maticon checkbox-icon checked-color active",domProps:{innerHTML:t._s(t.icons("check_box"))}},[t._v("check_box")]):s("i",{staticClass:"maticon checkbox-icon unchecked-color",domProps:{innerHTML:t._s(t.icons("check_box_outline_blank"))}},[t._v("check_box_outline_blank")])]),t._v(" "),s("span",{staticClass:"checkbox-name",class:t.curSelectCombOptions.indexOf(e.name)>=0?"checked-color":"unchecked-color",attrs:{title:e.name}},[t._v(t._s(e.name))]),t._v(" "),s("i",{staticClass:"maticon pull-right more-icon",domProps:{innerHTML:t._s(t.icons("more_vert"))}},[t._v("more_vert")])])}),0)])])}),0),t._v(" "),s("div",{staticClass:"combination-count-footer"},[s("button",{staticClass:"btn pull-right count-sureBtn clearBtnBorder",class:{disabled:t.isDisabled},attrs:{type:"button"},on:{click:function(e){return t._sureCombination(t.isDisabled)}}},[t._v("确定")]),t._v(" "),s("button",{staticClass:"btn pull-right count-cancelBtn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.isAddCombinationCount=!1}}},[t._v("取消")])])]):s("div",{staticClass:"setting-container-list box_flex column",style:"height:"+t.setHeight+"px;"},[s("div",{staticClass:"radio-list flex_shrink"},t._l(t.countRadios,function(e,a){return e.isShow?s("div",{key:a,staticClass:"input-group"},[s("span",[e.isChecked?s("i",{staticClass:"maticon radio-icon checked-color",domProps:{innerHTML:t._s(t.icons("radio_button_checked"))},on:{click:function(s){return t._changeRadio(a,e)}}},[t._v("radio_button_checked")]):s("i",{staticClass:"maticon radio-icon unchecked-color",domProps:{innerHTML:t._s(t.icons("radio_button_unchecked"))},on:{click:function(s){return t._changeRadio(a,e)}}},[t._v("radio_button_unchecked")])]),t._v(" "),s("span",{staticClass:"radio-name",class:e.isChecked?"checked-color":"unchecked-color"},[t._v(t._s(e.label))])]):t._e()}),0),t._v(" "),t.isCollegeOrPlayer?t._e():s("div",{staticClass:"add-btn"},[s("button",{staticClass:"btn add-combination-btn clearBtnBorder",attrs:{type:"button"},on:{click:t._showCombinationCount}},[t._v("新增组合统计项")])]),t._v(" "),s("div",{staticClass:"combination-count-list grow_1"},[s("div",{staticClass:"input-group"},[s("span",[s("span",{on:{click:t._checkAllCountItem}},[t.allSelectButton?s("i",{staticClass:"maticon checkbox-icon checked-color active",domProps:{innerHTML:t._s(t.icons("check_box"))}},[t._v("check_box")]):s("i",{staticClass:"maticon checkbox-icon unchecked-color",domProps:{innerHTML:t._s(t.icons("check_box_outline_blank"))}},[t._v("check_box_outline_blank")])])]),t._v(" "),s("span",{staticClass:"checkbox-name unchecked-color",attrs:{title:t.全选}},[t._v("全选")])]),t._v(" "),t._l(t.countItemData,function(e,a){return s("div",{key:a,staticClass:"input-group"},[e.combination?s("span",[s("i",{staticClass:"maticon checkbox-icon checked-color",domProps:{innerHTML:t._s(t.icons("delete"))},on:{click:function(s){return t._deleteCombCount(e,a)}}},[t._v("delete")])]):s("span",[t.isCollegeOrPlayer?s("span",{on:{click:function(s){return t._changeCountRadio(a,e)}}},[t.multipleSelectComparison.indexOf(e.name)>=0?s("i",{staticClass:"maticon checkbox-icon checked-color active",domProps:{innerHTML:t._s(t.icons("check_box"))}},[t._v("check_box")]):s("i",{staticClass:"maticon checkbox-icon unchecked-color",domProps:{innerHTML:t._s(t.icons("check_box_outline_blank"))}},[t._v("check_box_outline_blank")])]):s("span",{on:{click:function(s){return t._checkCountItem(e,a)}}},[t.countItemSelectArr.indexOf(e.name)>=0?s("i",{staticClass:"maticon checkbox-icon checked-color active",domProps:{innerHTML:t._s(t.icons("check_box"))}},[t._v("check_box")]):s("i",{staticClass:"maticon checkbox-icon unchecked-color",domProps:{innerHTML:t._s(t.icons("check_box_outline_blank"))}},[t._v("check_box_outline_blank")])])]),t._v(" "),s("span",{staticClass:"checkbox-name",class:t.countItemSelectArr.indexOf(e.name)>=0?"checked-color":"unchecked-color",attrs:{title:e.title}},[t._v(t._s(e.title))]),t._v(" "),t.isCollegeOrPlayer?s("i",{directives:[{name:"show",rawName:"v-show",value:e.isChecked,expression:"col.isChecked"}],staticClass:"maticon pull-right more-icon unchecked-color dropdown-toggle",attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},domProps:{innerHTML:t._s(t.icons("more_vert"))},on:{click:function(s){return t._clickCountItem(s,e,a)}}},[t._v("more_vert")]):s("i",{directives:[{name:"show",rawName:"v-show",value:t.countItemSelectArr.indexOf(e.name)>=0||e.combination,expression:"countItemSelectArr.indexOf(col.name)>=0 || col.combination"}],staticClass:"maticon pull-right more-icon unchecked-color dropdown-toggle",attrs:{"data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"true"},domProps:{innerHTML:t._s(t.icons("more_vert"))},on:{click:function(s){return t._clickCountItem(s,e,a)}}},[t._v("more_vert")]),t._v(" "),s("ul",{staticClass:"dropdown-menu count-list-more"},[s("div",{staticClass:"creat-modal-header"},[s("i",{staticClass:"maticon pull-right close-btn",domProps:{innerHTML:t._s(t.icons("close"))},on:{click:t._closeCountItemModal}},[t._v("close")])]),t._v(" "),s("div",{staticClass:"creat-modal-content"},t._l(e.details,function(e,a){return s("div",{key:a,staticClass:"input-group"},[s("span",{on:{click:function(a){return t._checkCountOption(e)}}},[t.countOptionSelectArr.indexOf(e.name)>=0?s("i",{staticClass:"maticon checkbox-icon checked-color active",domProps:{innerHTML:t._s(t.icons("check_box"))}},[t._v("check_box")]):s("i",{staticClass:"maticon checkbox-icon unchecked-color",domProps:{innerHTML:t._s(t.icons("check_box_outline_blank"))}},[t._v("check_box_outline_blank")])]),t._v(" "),s("span",{staticClass:"checkbox-name",class:t.countOptionSelectArr.indexOf(e.name)>=0?"checked-color":"unchecked-color",attrs:{title:e.name}},[t._v(t._s(e.name))])])}),0)])])})],2)])]):t._e()]):t._e()])])])],1)],1):t._e()},staticRenderFns:[]};var P=a("C7Lr")(T,B,!1,function(t){a("9Aop")},null,null);e.default=P.exports},h0CT:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAAXNSR0IArs4c6QAAADxQTFRFTXn2WoP3X4f3jKj6oLj6obj6orn6o7r6pLr6pLv6pbv6prz6p7z6p736qL36qb76qr/6q7/67PH/////qON9fgAAAF1JREFUGBnVwQkSgkAMRcE3CYKCLObf/65aFkWxTA5ANwo3KsxDRCFRAiflGCnjjgYd9By8tfPiZNTmycWkVUfFrL+Wqlk/LYlFepD6NNyYkTKclBOFRAkUblSYh779sgXZkU31NAAAAABJRU5ErkJggg=="}});