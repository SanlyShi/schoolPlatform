webpackJsonp([189],{Onlr:function(e,t){},Oo15:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("C331"),o={data:function(){return{url:"/table-data/data/column/columnTypeTableList",columns:[],showFiledModal:!1,showExtendModal:!1,filedModel:{columnName:"",columnOptions:"",dataType:"",title:"",typeId:"",columnOptionsBytext:"",columnOptionsBySelect:""},filedRules:{typeId:[{required:!0,message:"请选择所属拓展表：",trigger:"change"}],title:[{required:!0,message:"请输入字段名称",trigger:"blur"}],columnName:[{required:!0,message:"请输入英文名称",trigger:"blur"}],dataType:[{required:!0,message:"请选择字段类型：",trigger:"change"}],columnOptionsBytext:[{required:!0,message:"请选择字典名称",trigger:"change"}],columnOptionsBySelect:[{required:!0,message:"请选择字段限制",trigger:"change"}]},extendModel:{multiple:"",name:"",title:"",type:""},extendRules:{multiple:[{required:!0,message:"请选择是否有多条数据：",trigger:"change"}],name:[{required:!0,message:"请输入英文简称",trigger:"blur"}],title:[{required:!0,message:"请输入表名称",trigger:"blur"}],type:[{required:!0,message:"请选择所属：",trigger:"change"}]},extendList:[],filedTypeList:[],dataTypeList:[],dictTypeList:[],columnObject:[]}},methods:{addFiled:function(){this.showFiledModal=!0},addExtend:function(){this.showExtendModal=!0},cancel:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"filedForm",l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"showFiledModal";this.$nextTick(function(){"filedForm"==t?e.filedModel={columnName:"",columnOptions:"",dataType:"",title:"",typeId:"",columnOptionsBytext:"",columnOptionsBySelect:""}:e.extendModel={multiple:"",name:"",title:"",type:""},e[l]=!1})},submit:function(e,t){var l=this;this.$refs[e].validate(function(t){if(t){var o=void 0;if("filedForm"==e){var i=l.filedModel;o="/api/data/column/field","Dict"==i.dataType&&(i.columnOptions=i.columnOptionsBytext),"Date"==i.dataType&&(i.columnOptions=i.columnOptionsBySelect),Object(a.e)({url:o,type:"post",data:i,success:function(e){e.state?(l.$toast("添加成功"),l.cancel(),l.url="/table-data/data/column/columnTypeTableList?timesamp="+(new Date).getTime()):l.$toast(e.message)}})}else{var d=l.extendModel;Object(a.e)({url:"/api/data/column/columnType",type:"post",data:d,success:function(e){e.state?(l.$toast("添加成功"),l.cancel("extendForm","showExtendModal"),l.url="/table-data/data/column/columnTypeTableList?timesamp="+(new Date).getTime()):l.$toast(e.message)}})}}})},getColumnOptions:function(){var e=this;Object(a.e)({url:"/api/data/column/columnTypeOptions",type:"get",success:function(t){t.state&&(e.extendList=t.data.columnTable,e.filedTypeList=t.data.columnDataType,e.dataTypeList=t.data.dateType,e.dictTypeList=t.data.dictType,e.columnObject=t.data.columnObject)}})}},created:function(){var e=this;this.getColumnOptions(),this.columns=[{id:"title",title:"字段名称",width:200,className:"text-left",hidden:!1},{id:"columnName",title:"英文名称",width:100,className:"text-left",hidden:!1},{id:"type",title:"字段类型",width:100,className:"text-left",hidden:!1,formatter:function(t){for(var l=0;l<e.filedTypeList.length;l++)if(e.filedTypeList[l].value==t.dataType)return e.filedTypeList[l].name}},{id:"typeTitle",title:"所属扩展表",width:150,className:"text-left",hidden:!1},{id:"Source",title:"所属对象",width:150,className:"text-left",hidden:!1,formatter:function(t){for(var l=0;l<e.columnObject.length;l++)if(e.columnObject[l].value==t.typeSource)return e.columnObject[l].name}}]}},i={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{attrs:{id:"addFiled"}},[l("div",{staticClass:"list"},[l("v-table",{attrs:{title:"自定义字段",url:e.url,pagesize:"10",order:!0,idField:"id",columns:e.columns}},[l("div",{staticClass:"btn-group pull-right",attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[l("el-button",{staticClass:"btn blue",attrs:{type:"primary"},on:{click:e.addFiled}},[e._v("新增字段")]),e._v(" "),l("el-button",{staticClass:"btn blue",attrs:{type:"primary"},on:{click:e.addExtend}},[e._v("新增拓展表")])],1)])],1),e._v(" "),l("v-modal",{attrs:{show:e.showFiledModal,effect:"fade",width:"446"}},[l("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[l("h5",{staticClass:"modal-title"},[e._v("新增字段")])]),e._v(" "),l("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[e.showFiledModal?l("el-form",{ref:"filedForm",attrs:{model:e.filedModel,rules:e.filedRules,"label-width":"120px"}},[l("el-form-item",{attrs:{label:"所属拓展表：",prop:"typeId"}},[l("el-select",{attrs:{filterable:""},model:{value:e.filedModel.typeId,callback:function(t){e.$set(e.filedModel,"typeId",t)},expression:"filedModel.typeId"}},e._l(e.extendList,function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"字段名称：",prop:"title"}},[l("el-input",{model:{value:e.filedModel.title,callback:function(t){e.$set(e.filedModel,"title",t)},expression:"filedModel.title"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"英文名称：",prop:"columnName"}},[l("el-input",{model:{value:e.filedModel.columnName,callback:function(t){e.$set(e.filedModel,"columnName",t)},expression:"filedModel.columnName"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"字段类型：",prop:"dataType"}},[l("el-select",{attrs:{filterable:""},model:{value:e.filedModel.dataType,callback:function(t){e.$set(e.filedModel,"dataType",t)},expression:"filedModel.dataType"}},e._l(e.filedTypeList,function(e){return l("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),"Dict"==e.filedModel.dataType?l("el-form-item",{attrs:{label:"字典名称",prop:"columnOptionsBytext"}},[l("el-select",{attrs:{filterable:""},model:{value:e.filedModel.columnOptionsBytext,callback:function(t){e.$set(e.filedModel,"columnOptionsBytext",t)},expression:"filedModel.columnOptionsBytext"}},e._l(e.dictTypeList,function(e){return l("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1):e._e(),e._v(" "),"Date"==e.filedModel.dataType?l("el-form-item",{attrs:{label:"字段限制",prop:"columnOptionsBySelect"}},[l("el-select",{attrs:{filterable:""},model:{value:e.filedModel.columnOptionsBySelect,callback:function(t){e.$set(e.filedModel,"columnOptionsBySelect",t)},expression:"filedModel.columnOptionsBySelect"}},e._l(e.dataTypeList,function(e){return l("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1):e._e()],1):e._e()],1),e._v(" "),l("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[l("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(t){return e.cancel("filedForm","showFiledModal")}}},[e._v("取消")]),e._v(" "),l("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(t){return e.submit("filedForm","showFiledModal")}}},[e._v("保存")])])]),e._v(" "),l("v-modal",{attrs:{show:e.showExtendModal,effect:"fade",width:"446"}},[l("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[l("h5",{staticClass:"modal-title"},[e._v("新增拓展表")])]),e._v(" "),l("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[e.showExtendModal?l("el-form",{ref:"extendForm",attrs:{model:e.extendModel,rules:e.extendRules,"label-width":"140px"}},[l("el-form-item",{attrs:{prop:"type",label:"所属对象："}},[l("el-select",{attrs:{filterable:""},model:{value:e.extendModel.type,callback:function(t){e.$set(e.extendModel,"type",t)},expression:"extendModel.type"}},e._l(e.columnObject,function(e){return l("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{prop:"title",label:"表名称："}},[l("el-input",{model:{value:e.extendModel.title,callback:function(t){e.$set(e.extendModel,"title",t)},expression:"extendModel.title"}})],1),e._v(" "),l("el-form-item",{attrs:{prop:"name",label:"英文简称："}},[l("el-input",{model:{value:e.extendModel.name,callback:function(t){e.$set(e.extendModel,"name",t)},expression:"extendModel.name"}})],1),e._v(" "),l("el-form-item",{attrs:{prop:"multiple",label:"是否有多条数据："}},[l("el-radio-group",{model:{value:e.extendModel.multiple,callback:function(t){e.$set(e.extendModel,"multiple",t)},expression:"extendModel.multiple"}},[l("el-radio",{attrs:{label:"true"}},[e._v("是")]),e._v(" "),l("el-radio",{attrs:{label:"false"}},[e._v("否")])],1)],1)],1):e._e()],1),e._v(" "),l("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[l("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(t){return e.cancel("extendForm","showExtendModal")}}},[e._v("取消")]),e._v(" "),l("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(t){return e.submit("extendForm","showExtendModal")}}},[e._v("保存")])])])],1)},staticRenderFns:[]};var d=l("C7Lr")(o,i,!1,function(e){l("Onlr")},null,null);t.default=d.exports}});