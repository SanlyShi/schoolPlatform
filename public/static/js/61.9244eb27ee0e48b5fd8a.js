webpackJsonp([61],{I6U8:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("kV13");var i=a("C331"),s=a("LzZJ"),n=a("u88R"),o=(s.a,n.a,{created:function(){var t=localStorage.getItem("lang");this.userType=this.$parent.account.type;var e=this;Object(i.g)(t)&&(this.lang=t),this.columns=[{id:"organizationIds",title:"组织名称",className:"text-left",width:160,hidden:!1,search:{type:"multiSelect",data:{url:"/api/sc/organizations/options/organizations",optionsLabel:"text",optionsValue:"id"}},formatter:function(t){return t.name}},{id:"type",title:"类型",width:80,className:"text-left",hidden:!1,search:{type:"select",data:{optionsLabel:"label",optionsValue:"value",options:[{label:"校级",value:"SCHOOL"},{label:"院级",value:"COLLEGE"}]}},formatter:function(t){return"SCHOOL"===t.type?"校级":"院级"}},{id:"department",title:"所属部门",className:"text-left",hidden:!1,formatter:function(t){return t.department?t.department.name:""}},{id:"instructorName",title:"指导老师",className:"text-left",hidden:!1},{id:"opt",title:this.translate.opt,className:"text-center",width:"130px",hidden:!1,formatter:function(t){return"STUDENT"!==this.userType&&t.isInstructor?[{tag:"a",text:"组织成员",className:"opt-btn",callback:function(t,a){e.showMember=!0,e.pageSign="member",e.selectItem={organizationId:t.id,parentPageTitle:t.name,isInstructor:t.isInstructor}}},{tag:"a",text:"组织部门",className:"opt-btn",callback:function(t,a){e.$parent.addBread({title:"组织部门管理",data:{organizationId:t.id},reflash:!0,route:"/activityManage/orgDepartmentManage"})}},{tag:"a",text:"职务",className:"opt-btn",callback:function(t,a){e.showPosition=!0,e.selectItem={organizationId:t.id,parentPageTitle:t.name}}}]:[{tag:"a",text:"组织成员",className:"opt-btn",callback:function(t,a){e.showMember=!0,e.pageSign="member",e.selectItem={organizationId:t.id,parentPageTitle:t.name}}}]}}]},data:function(){return{columns:[],url:"/table-data/sc/organizations/page/myOrganizations",showAddModal:!1,department:{},newDepartment:{name:""},userType:"STUDENT",modalType:"",isChange:!1,showMember:!1,showPosition:!1,isDisabled:!1,lang:"zh-cn"}},components:{member:s.a,position:n.a},computed:{translate:function(){return Object(i.g)(this.lang).departmentManage}},methods:{_verifyLength:function(){var t=0,e=0,a=0;if(!this.newDepartment.name)return!1;this.isChange=!0;for(var i=0;i<this.newDepartment.name.length;i++)this.newDepartment.name.charCodeAt(i)>127||94===this.newDepartment.name.charCodeAt(i)?t++:e+=.5,25===parseInt(t+e)&&(a=i);parseInt(t+e)>25&&(this.newDepartment.name=this.newDepartment.name.slice(0,a+1))},editDepartment:function(){var t=this;t.isDisabled=!0,Object(i.e)({url:"/api/department/"+this.newDepartment.id,dataType:"json",data:{name:this.newDepartment.name},type:"post",success:function(e){t.isDisabled=!1,e.state?(t.department.id=t.newDepartment.id,t.department.name=t.newDepartment.name,t.showAddModal=!1,t.$toast(t.translate.editSuccessTip)):t.$toast(t.translate.editFailedTip+":"+e.message)}})},addModal:function(){this.newDepartment={},this.modalType=this.translate.addNew,this.showAddModal=!0},addDepartment:function(){var t=this;this.newDepartment.name?(t.isDisabled=!0,Object(i.e)({url:"/api/department",dataType:"json",data:{name:this.newDepartment.name},type:"post",success:function(e){t.isDisabled=!1,e.state?(t.url="/table-data/department?timestamp="+(new Date).getTime(),t.showAddModal=!1,t.$toast(t.translate.addSuccessTip)):t.$toast(t.translate.addFailedTip+":"+e.message)}})):t.$toast("请输入部门名称")},changeRole:function(t){if(t)return!1;this.modalType===this.translate.addNew?this.addDepartment():this.modalType===this.translate.edit&&this.editDepartment()},cancleModal:function(){this.isChange?confirm(this.translate.cancelConfirmTip)&&(this.showAddModal=!1):this.showAddModal=!1}}}),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid",attrs:{id:"org-department-page"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showMember&&!t.showPosition,expression:"!showMember&&!showPosition"}],staticClass:"row text-center"},[a("v-table",{attrs:{title:"第二课堂",url:t.url,pagesize:"10",idField:"id",columns:t.columns,multiple:!1,order:!0,search:!0}})],1),t._v(" "),a("v-modal",{staticClass:"editDepartmentModal",attrs:{show:t.showAddModal,effect:"fade",width:"274"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.modalType)+"组织部门")])]),t._v(" "),a("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.newDepartment.name,expression:"newDepartment.name"}],ref:"count",staticClass:"form-control search-input",attrs:{id:"departmentName",type:"text"},domProps:{value:t.newDepartment.name},on:{keyup:t._verifyLength,input:function(e){e.target.composing||t.$set(t.newDepartment,"name",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.cancleModal}},[t._v(t._s(t.translate.cancel))]),t._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",class:{disabled:t.isDisabled},attrs:{type:"button"},on:{click:function(e){return t.changeRole(t.isDisabled)}}},[t._v(t._s(t.translate.confirm))])])]),t._v(" "),t.showMember?a("member",{attrs:{selectItem:t.selectItem}}):t._e(),t._v(" "),t.showPosition?a("position",{attrs:{selectItem:t.selectItem}}):t._e()],1)},staticRenderFns:[]};var l=a("C7Lr")(o,r,!1,function(t){a("mc8j")},null,null);e.default=l.exports},LzZJ:function(t,e,a){"use strict";var i=a("C331"),s=a("y0ro"),n=(s.a,{mixins:[s.a],data:function(){return{memberUrl:"/table-data/sc/organizations/"+this.selectItem.organizationId+"/members",memberColumns:[],timestamp:"?timestamp=",memberUserNo:"",memberUserName:"",memberAddColumns:[],orgDepartmentList:[],memberAddList:[],positionList:[],orgDepartmentId:"",selectOrgDepartment:{},selectPosition:{},positionId:"",isEdit:!1,showAddMemberModal:!1,lang:"zh-cn",beginTime:"",checkRows:[],endTime:""}},props:{selectItem:{default:{}},orgM:{default:!1}},created:function(){var t=this,e=localStorage.getItem("lang"),a=this;this.getCollegeList(),this.memberAddColumns=[{id:"name",title:"部门+职务",className:"text-left",formatter:function(t){return t.selectOrgDepartment.text+t.selectPosition.text}},{id:"beginTime",title:"任职开始时间",className:"text-left"},{id:"endTime",title:"任职结束时间",className:"text-left"},{id:"opt",title:this.translate.opt,className:"text-center",width:"230px",hidden:!1,formatter:function(t){return[{tag:"a",text:"移除",className:"opt-btn",callback:function(t,e){a.memberAddList.splice(e,1)}}]}}],Object(i.g)(e)&&(this.lang=e),this.importParams={parentPageTitle:"",downloadTemplateUrl:"/sc/organizations/"+this.selectItem.organizationId+"/members/batch/import/template",downloadErrorTemplateUrl:"/sc/organizations/"+this.selectItem.organizationId+"/members/batch/import/error",checkTemplateUrl:"/sc/organizations/"+this.selectItem.organizationId+"/members/batch/import/check",templateName:"批量导入模板",importBtnType:[{url:"/sc/organizations/"+this.selectItem.organizationId+"/members/batch/import",method:"post",isShowBtn:!0,name:"增量导入",success:function(e){t.timestamp="?timestamp="+(new Date).getTime(),t.curRoute="allStaff"}}]}},methods:{_exportList:function(){window.location.href="/downloads/sc/organizations/"+this.selectItem.organizationId+"/membersExcel"},afterChecked:function(t){this.checkRows=t},editMember:function(t){var e=this,a="api/sc/organizations/"+t.organizationMemberId+"/update/information";Object(i.d)(a).then(function(a){a.state?(e.showAddMemberModal=!0,e.isEdit=!0,e.userId=t.userId,e.memberUserNo=t.userNo,e.memberUserName=t.name,e.organizationMemberId=t.organizationMemberId,e.orgDepartmentId="",e.positionId="",e.memberAddList=[],a.data.forEach(function(t){e.memberAddList.push({selectPosition:{text:t.titleName,id:t.titleId},selectOrgDepartment:e.getSelect(t.departmentId,"orgDepartmentList"),memberUserNo:e.memberUserNo,beginTime:t.fromDate,endTime:t.toDate})})):e.$toast(a.message)})},deleteMember:function(t){var e=this,a="api/sc/organizations/"+t.organizationId+"/members/"+t.userId;Object(i.d)(a,{},"post").then(function(t){t.state?e.timestamp="?timestamp="+(new Date).getTime():e.$toast(t.message)})},addMember:function(){var t=this;if(this.userId){if(!this.orgDepartmentId)return this.beginTime="",this.endTime="",void this.$toast("请选择部门!");if(!this.orgDepartmentId||this.positionId){if(this.positionId){if(!this.beginTime)return void this.$toast("请选择开始时间!");if(!this.endTime)return void this.$toast("请选择结束时间!");if(this.beginTime>this.endTime)return void this.$toast("结束时间必须大于开始时间!")}var e=!1;this.memberAddList.forEach(function(a){a.selectPosition.id===t.positionId&&(e=!0,a.beginTime=t.beginTime,a.endTime=t.endTime)}),e||this.memberAddList.push({selectPosition:this.getSelect(this.positionId,"positionList"),selectOrgDepartment:this.getSelect(this.orgDepartmentId,"orgDepartmentList"),memberUserNo:this.memberUserNo,beginTime:this.beginTime,endTime:this.endTime})}else this.$toast("请选择职务!")}else this.$toast("请输入学号或者姓名!")},getSelect:function(t,e){for(var a in this[e])if(this[e][a].id==t)return this[e][a];return{text:"",id:""}},_changeDepartmentId:function(){this.getPositionList()},initTable:function(){var t=this;this.memberColumns=[{id:"name",title:this.translate.studentName,className:"text-left",hidden:!1,search:{type:"input",data:{placeholder:""}}},{id:"userNo",title:this.translate.userNo,className:"text-left",hidden:!1,search:{type:"input",data:{placeholder:""}}},{id:"collegeCode",title:this.translate.college,className:"text-left",hidden:!1,search:{type:"select",data:{optionsLabel:"name",optionsValue:"code",options:t.collegeList}},formatter:function(t){return t.collegeName}},{id:"departmentId",title:"部门",className:"text-left",hidden:!1,search:{type:"select",data:{optionsLabel:"text",optionsValue:"id",options:t.orgDepartmentList,change:function(e){t.getPositionList(e.value)}}},formatter:function(t){return t.departmentName}},{id:"titleId",title:"职务",className:"text-left",hidden:!1,search:{type:"select",data:{optionsLabel:"text",optionsValue:"id",options:t.positionList}},formatter:function(t){return t.titleName}},{id:"opt",title:this.translate.opt,className:"text-center",width:"230px",hidden:!1,formatter:function(e){if(t.selectItem.isInstructor)return[{tag:"a",text:t.translate.edit,className:"opt-btn",callback:function(e,a){t.editMember(e)}},{tag:"a",text:t.translate.delete,className:"opt-btn",callback:function(e,a){confirm(t.translate.memberRemoveConfirmTip)&&t.deleteMember(e)}}]}}]},getOrgDepartmentList:function(){var t=this,e="api/sc/orgDepartment/options/allOrgDepartment/"+this.selectItem.organizationId;Object(i.d)(e).then(function(e){e.state&&(t.orgDepartmentList=e.data,t.initTable())})},getPositionList:function(t){var e=this,a="";a=t?"api/sc/organizationTitle/selectOptions/"+this.selectItem.organizationId+"/"+t:"api/sc/organizationTitle/selectOptions/"+this.selectItem.organizationId+"/"+this.orgDepartmentId,Object(i.d)(a).then(function(a){a.state&&(e.positionList=a.data,t&&e.initTable())})},getCollegeList:function(){var t=this;Object(i.d)("/api/colleges").then(function(e){e.state&&(t.collegeList=e.data,t.getOrgDepartmentList())})},_backParentPage:function(){this.$parent.showMember=!1,this.$parent.pageSign="organizationList"},userSelected:function(t){this.userId=t.userId},_checkMemberUserNo:function(){var t=this;if(this.isEdit){var e="/api/sc/organizations/"+this.organizationMemberId+"/update/members",a={};return a.organizationMemberUpdateVO=this.memberAddList.map(function(t){return{fromDate:t.beginTime,toDate:t.endTime,titleId:t.selectPosition.id?t.selectPosition.id:""}}),void Object(i.d)(e,a.organizationMemberUpdateVO,"post").then(function(e){e.state&&(t.$toast("编辑成功"),t.showAddMemberModal=!1,t.timestamp="?timestamp="+(new Date).getTime())})}if(!this.userId)return this.$toast(this.translate.userNoExistedTip),!1;var s="/api/sc/organizations/"+this.selectItem.organizationId+"/members",n={userId:this.userId};n.organizationDuties=this.memberAddList.map(function(t){return{fromDate:t.beginTime,toDate:t.endTime,titleId:t.selectPosition.id?t.selectPosition.id:""}}),Object(i.d)(s,n).then(function(e){e.state?(t.$toast("新增成功"),t.showAddMemberModal=!1,t.timestamp="?timestamp="+(new Date).getTime()):t.$toast(e.message)})},_showAddMemberModal:function(){this.showAddMemberModal=!0,this.isEdit=!1,this.memberAddList=[],this.memberUserNo=""},_batchDeletePosition:function(){var t=this;if(confirm("确认移除选中成员的职务?")){var e="?organizationMemberId=",a=(this.checkRows.map(function(a,i){return i==t.checkRows.length-1?e+=a.organizationMemberId:e+=a.organizationMemberId+",",a.organizationMemberId}),"api/sc/organizations/"+this.selectItem.organizationId+"/members/duty"+e);Object(i.d)(a,{},"post").then(function(e){e.state?t.timestamp="?timestamp="+(new Date).getTime():t.$toast(e.message)})}},_batchDeleteMember:function(){var t=this;if(confirm("确认移除选中成员?")){var e="?userId=",a=(this.checkRows.map(function(a,i){return i==t.checkRows.length-1?e+=a.userId:e+=a.userId+",",a.userId}),"api/sc/organizations/"+this.selectItem.organizationId+"/members/all"+e);Object(i.d)(a,{},"post").then(function(e){e.state?t.timestamp="?timestamp="+(new Date).getTime():t.$toast(e.message)})}}},computed:{translate:function(){return Object(i.g)(this.lang).organizationManage}}}),o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row member"},[a("div",{staticClass:"back-parent-page"},[a("button",{staticClass:"btn back-btn clearBtnBorder box_flex align_center",attrs:{type:"button"},on:{click:t._backParentPage}},[a("i",{staticClass:"maticon back-icon-btn",domProps:{innerHTML:t._s(t.icons("arrow_back"))}},[t._v("arrow_back")]),t._v(" "),a("span",{staticClass:"nav-title"},[t._v(t._s(t.selectItem.parentPageTitle))])])]),t._v(" "),a("v-table",{ref:"memberTable",attrs:{title:t.memberTitle,url:t.memberUrl+t.timestamp,pagesize:"10",idField:"id",columns:t.memberColumns,multiple:t.selectItem.isInstructor,order:!0,search:!1},on:{afterChecked:t.afterChecked}},[a("div",{staticClass:"btn-group pull-right",attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[t.checkRows.length?a("button",{staticClass:"btn batch-add-btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:t._batchDeletePosition}},[t._v(t._s(t.translate.batch)+t._s(t.translate.delete)+"职务")]):t._e(),t._v(" "),t.checkRows.length?a("button",{staticClass:"btn batch-add-btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:t._batchDeleteMember}},[t._v(t._s(t.translate.batch)+t._s(t.translate.delete)+t._s(t.translate.member))]):t._e(),t._v(" "),t.selectItem.isInstructor||t.orgM?a("button",{staticClass:"btn batch-add-btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:t.quickAddRecord}},[t._v(t._s(t.translate.batch)+t._s(t.translate.add)+t._s(t.translate.member))]):t._e(),t._v(" "),t.selectItem.isInstructor||t.orgM?a("button",{staticClass:"btn add-organization btn-bgColor-style clearBtnBorder box_flex align_center",attrs:{type:"button"},on:{click:t._showAddMemberModal}},[a("i",{staticClass:"maticon pull-left",staticStyle:{"font-size":"20px"},domProps:{innerHTML:t._s(t.icons("add"))}},[t._v("add")]),t._v("\n        "+t._s(t.translate.add)+t._s(t.translate.member)+"\n      ")]):t._e(),t._v(" "),a("button",{staticClass:"btn add-organization btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:t._exportList}},[t._v("\n            导出\n          ")])])]),t._v(" "),a("v-modal",{staticClass:"organization-modal",attrs:{show:t.showAddMemberModal,effect:"fade",width:"746"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[t.isEdit?t._e():a("h5",{staticClass:"modal-title"},[t._v(t._s(t.translate.add)+t._s(t.translate.member))]),t._v(" "),t.isEdit?a("h5",{staticClass:"modal-title"},[t._v(t._s(t.translate.edit)+t._s(t.translate.member))]):t._e()]),t._v(" "),a("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[a("div",{staticClass:"form-wrap box_flex align_center"},[a("div",{staticClass:"form-group box_flex align_center"},[a("div",{staticClass:"label"},[t._v("成员:")]),t._v(" "),t.isEdit?a("input",{staticClass:"value-input",attrs:{type:"text",disabled:""},domProps:{value:t.memberUserName+"("+t.memberUserNo+")"}}):a("detect",{attrs:{placeholder:"检测学生学号/姓名",url:"/api/users/check/searchResults"},on:{afterSelected:t.userSelected}})],1),t._v(" "),a("div",{staticClass:"form-group box_flex align_center"},[a("div",{staticClass:"label"},[t._v("组织部门:")]),t._v(" "),a("v-select",{attrs:{options:t.orgDepartmentList,"options-value":"id","options-label":"text","close-on-select":"",justify:""},on:{afterSelected:t._changeDepartmentId},model:{value:t.orgDepartmentId,callback:function(e){t.orgDepartmentId=e},expression:"orgDepartmentId"}})],1),t._v(" "),a("div",{staticClass:"form-group box_flex align_center"},[a("div",{staticClass:"label"},[t._v("部门职务:")]),t._v(" "),a("v-select",{attrs:{options:t.positionList,"options-value":"id","options-label":"text","close-on-select":"",justify:""},model:{value:t.positionId,callback:function(e){t.positionId=e},expression:"positionId"}})],1),t._v(" "),t.positionId?a("div",{staticClass:"form-group box_flex align_center"},[a("div",{staticClass:"label"},[t._v("任职开始时间:")]),t._v(" "),a("v-datepicker",{model:{value:t.beginTime,callback:function(e){t.beginTime=e},expression:"beginTime"}})],1):t._e(),t._v(" "),t.positionId?a("div",{staticClass:"form-group box_flex align_center"},[a("div",{staticClass:"label"},[t._v("任职结束时间:")]),t._v(" "),a("v-datepicker",{model:{value:t.endTime,callback:function(e){t.endTime=e},expression:"endTime"}})],1):t._e(),t._v(" "),a("div",{staticClass:"form-group box_flex align_center"},[a("button",{staticClass:"btn submit-btn",on:{click:t.addMember}},[t._v("新增")])])]),t._v(" "),a("v-table",{attrs:{rows:t.memberAddList,order:"true",columns:t.memberAddColumns}})],1),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showAddMemberModal=!1}}},[t._v(t._s(t.translate.cancel))]),t._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t._checkMemberUserNo}},[t._v(t._s(t.translate.confirm))])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"importPage"===t.curRoute,expression:"curRoute === 'importPage'"}],staticClass:"importPageClass"},[a("v-import",t._b({on:{backParentPage:function(e){t.curRoute="allStaff"}}},"v-import",t.importParams,!1))],1)],1)},staticRenderFns:[]};var r=a("C7Lr")(n,o,!1,function(t){a("ZrlW")},"data-v-61b64004",null);e.a=r.exports},ZrlW:function(t,e){},mc8j:function(t,e){},u88R:function(t,e,a){"use strict";var i=a("C331"),s=a("y0ro"),n=(s.a,{mixins:[s.a],data:function(){return{positionBaseUrl:"/table-data/sc/organizationTitle/page/"+this.selectItem.organizationId,positionUrl:"/table-data/sc/organizationTitle/page/"+this.selectItem.organizationId,positionColumns:[],lang:"zh-cn",organizationId:this.selectItem.organizationId,positionModalType:"",orgDepartmentList:[],orgDepartmentId:"",positionName:"",showAddPositionModal:!1,timestamp:"?timestamp=''"}},mounted:function(){var t=this;this.getOrgDepartmentList(),this.importParams={parentPageTitle:"",downloadTemplateUrl:"/sc/organizationTitle/BatchImportTitleTemplate",downloadErrorTemplateUrl:"/sc/organizationTitle/excels/errorExcels",checkTemplateUrl:"/sc/organizationTitle/excel/"+this.organizationId,templateName:"批量导入职务模板",importBtnType:[{url:"/sc/organizationTitle/import",method:"post",isShowBtn:!0,name:"增量导入",success:function(e){t.positionUrl=t.positionUrl+"?timestamp="+(new Date).getTime(),t.curRoute="allStaff"}}]}},computed:{translate:function(){return Object(i.g)(this.lang).organizationManage}},methods:{ablePosition:function(t){var e=this,a="api/sc/organizationTitle/forbidden/"+t.titleId;t.isForbidden&&(a="api/sc/organizationTitle/unForbidden/"+t.titleId),Object(i.d)(a,{},"post").then(function(t){t.state&&(e.timestamp="?timestamp="+(new Date).getTime())})},_changePosition:function(){var t=this;if(!this.positionName)return this.$toast("职务不能为空"),!1;if(!this.orgDepartmentId)return this.$toast("组织部门不能为空"),!1;var e="/api/sc/organizationTitle",a={titleName:this.positionName,organizationId:this.organizationId,orgDepartmentId:this.orgDepartmentId};this.positionId?(e="/api/sc/organizationTitle/"+this.positionId,Object(i.d)(e,a,"post").then(function(e){e.state&&(t.showAddPositionModal=!1,t.positionUrl=t.positionUrl+"?timestamp="+(new Date).getTime())})):Object(i.d)(e,a).then(function(e){e.state&&(t.showAddPositionModal=!1,t.positionUrl=t.positionUrl+"?timestamp="+(new Date).getTime())})},getOrgDepartmentList:function(){var t=this,e="api/sc/orgDepartment/options/allOrgDepartment/"+this.organizationId,a=this;Object(i.d)(e).then(function(e){e.state&&(t.orgDepartmentList=e.data,t.positionColumns=[{id:"titleName",title:t.translate.position,className:"text-left",hidden:!1,search:{type:"input",data:{placeholder:""}}},{id:"orgDepartmentIds",title:"组织部门",className:"text-left",hidden:!1,search:{type:"multiSelect",data:{options:a.orgDepartmentList,optionsLabel:"text",optionsValue:"id"}},formatter:function(t){return t.orgDepartmentName}},{id:"opt",title:t.translate.opt,className:"text-center",width:"230px",hidden:!1,formatter:function(t){return[{tag:"a",text:a.translate.edit,className:"opt-btn",callback:function(t,e){a.showAddPositionModal=!0,a.positionModalType=a.translate.edit,a.orgDepartmentId=t.orgDepartmentId,a.positionName=t.titleName,a.positionId=t.titleId}},{tag:"a",text:t.isForbidden?"启用":"禁用",className:"opt-btn",callback:function(t,e){a.ablePosition(t)}}]}}])})},_backParentPage:function(){this.$parent.pageSign="organizationList",this.$parent.showPosition=!1},_showAddPositionModal:function(){this.showAddPositionModal=!0,this.positionModalType=this.translate.add,this.positionId="",this.orgDepartmentId="",this.positionName=""}},props:{selectItem:{default:{}}}}),o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"back-parent-page"},[a("button",{staticClass:"btn back-btn clearBtnBorder box_flex align_center",attrs:{type:"button"},on:{click:t._backParentPage}},[a("i",{staticClass:"maticon back-icon-btn",domProps:{innerHTML:t._s(t.icons("arrow_back"))}},[t._v("arrow_back")]),t._v(" "),a("span",{staticClass:"nav-title"},[t._v(t._s(t.selectItem.parentPageTitle))])])]),t._v(" "),a("v-table",{ref:"positionTable",attrs:{title:t.selectItem.positionTitle,url:t.positionUrl+t.timestamp,pagesize:"10",idField:"id",columns:t.positionColumns,multiple:!1,order:!0,search:!1}},[a("div",{staticClass:"btn-group pull-right",attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[a("button",{staticClass:"btn batch-add-btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:function(e){return t.quickAddRecord()}}},[t._v(t._s(t.translate.batch)+t._s(t.translate.add)+t._s(t.translate.position))]),t._v(" "),a("button",{staticClass:"btn add-organization btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:t._showAddPositionModal}},[a("i",{staticClass:"maticon pull-left",staticStyle:{"font-size":"20px"},domProps:{innerHTML:t._s(t.icons("add"))}},[t._v("add")]),t._v("\n        "+t._s(t.translate.add)+t._s(t.translate.position)+"\n      ")])])]),t._v(" "),a("v-modal",{staticClass:"organization-modal",attrs:{show:t.showAddPositionModal,effect:"fade",width:"446"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v(t._s(t.positionModalType)+t._s(t.translate.position)+t._s(t.translate.info))])]),t._v(" "),a("div",{staticClass:"modal-body position-info-body",attrs:{slot:"modal-body"},slot:"modal-body"},[a("div",{staticClass:"form-group"},[a("v-select",{attrs:{options:t.orgDepartmentList,"options-value":"id","options-label":"text","close-on-select":"",justify:""},model:{value:t.orgDepartmentId,callback:function(e){t.orgDepartmentId=e},expression:"orgDepartmentId"}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.positionName,expression:"positionName"}],staticClass:"form-control search-input organization-input",attrs:{type:"text",placeholder:t.translate.enter+t.translate.position},domProps:{value:t.positionName},on:{input:function(e){e.target.composing||(t.positionName=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showAddPositionModal=!1}}},[t._v(t._s(t.translate.cancel))]),t._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t._changePosition}},[t._v(t._s(t.translate.confirm))])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"importPage"===t.curRoute,expression:"curRoute === 'importPage'"}],staticClass:"importPageClass"},[a("v-import",t._b({on:{backParentPage:function(e){t.curRoute="allStaff"}}},"v-import",t.importParams,!1))],1)],1)},staticRenderFns:[]},r=a("C7Lr")(n,o,!1,null,null,null);e.a=r.exports}});