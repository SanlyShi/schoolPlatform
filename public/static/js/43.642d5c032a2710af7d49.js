webpackJsonp([43],{MrtH:function(t,e){},"NcP/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("3cXf"),i=a.n(s),o=a("kV13"),l=a("C331"),r=a("Zb6B"),n=a("wto8");o.default.component("jobDeclare1",n.a),o.default.component("jobDeclare",r.a);o.default.component("jobDeclare1",n.a),o.default.component("jobDeclare",r.a);var c={created:function(){var t=this,e=localStorage.getItem("lang");Object(l.g)(e)&&(this.lang=e),this.isTodifficultStudentData=[{id:"true",text:"是"},{id:"false",text:"否"}],Object(l.e)({url:"/login/check",type:"get",success:function(e){t.account=e.data}}),Object(l.e)({url:"/api/pwps/units/my",dataType:"json",type:"get",success:function(e){e.state?e.data.length>0&&(t.unitData=e.data,t.jobDeclareData.unitId=e.data[0].id,t.unitName=e.data[0].name):t.$toast(e.message)}}),Object(l.e)({url:"/api/pwps/positions/all/schoolYears",dataType:"json",type:"get",success:function(e){e.state?t.schoolYearData=e.data:t.$toast(e.message)}}),Object(l.e)({url:"/api/system/dicts",dataType:"json",type:"get",data:{dictType:"岗位类型"},success:function(e){e.state?t.positionTypeData=e.data:t.$toast(e.message)}}),this.columns=[{id:"schoolYear",title:"学年",className:"text-left",hidden:!1,width:100,formatter:function(t){if(t.schoolYear)return t.schoolYear.name},search:{type:"select",data:{url:"/api/pwps/positions/all/schoolYears",optionsLabel:"name",optionsValue:"id"}}},{id:"unitId",title:"单位名称",className:"text-left",hidden:!1,width:90,formatter:function(t){if(t.unit)return t.unit.name},search:{type:"select",data:{url:"/api/pwps/units/all",optionsLabel:"name",optionsValue:"id"}}},{id:"positionName",title:"岗位名称",className:"text-left",width:120,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"positionType",title:"岗位类型",className:"text-left",width:90,hidden:!1,formatter:function(e){var a="";return t.positionTypeData.forEach(function(t,s){t.value===e.positionType&&(a=t.label)}),a},search:{type:"select",data:{url:"/api/system/dicts?dictType=岗位类型",optionsLabel:"label",optionsValue:"value"}}},{id:"personCount",title:"岗位人数",className:"text-left",width:60,hidden:!1},{id:"userIncumbencyCount",title:"在岗人数",width:60,className:"text-left",hidden:!1},{id:"rewardStandard",title:"薪酬标准",className:"text-left",width:60,hidden:!1},{id:"salaryCapMonth",title:"月工资上限",className:"text-left",width:110,hidden:!1},{id:"auditingStatus",title:"审核状态",className:"text-left",width:90,hidden:!1,formatter:function(e){if(e.auditingStatus)return t.auditingStatus[e.auditingStatus]}},{id:"isToDifficultyStudent",title:"针对困难生",className:"text-left",width:110,hidden:!0,formatter:function(t){return t.isToDifficultyStudent?"是":"否"},search:{type:"select",data:{options:this.isTodifficultStudentData,optionsLabel:"text",optionsValue:"id"}}},{id:"canApply",title:"允许学生申请",className:"text-left",width:130,hidden:!0,formatter:function(t){return t.canApply?"是":"否"},search:{type:"select",data:{options:this.isTodifficultStudentData,optionsLabel:"text",optionsValue:"id"}}},{id:"address",title:"工作地点",className:"text-left",width:90,hidden:!0,search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"workingTime",title:"工作时段",className:"text-left",width:120,hidden:!0,search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"jobStartTime",title:"工作开始时间",className:"text-left",width:150,hidden:!0,formatter:function(t){return t.jobStartTime.split(" 00:00:00")[0]}},{id:"jobEndTime",title:"工作结束时间",className:"text-left",width:150,hidden:!0,formatter:function(t){return t.jobEndTime.split(" 00:00:00")[0]}},{id:"applyStartTime",title:"申请开始时间",className:"text-left",width:150,hidden:!0,formatter:function(t){return t.applyStartTime.split(" 00:00:00")[0]}},{id:"applyEndTime",title:"申请结束时间",className:"text-left",width:150,hidden:!0,formatter:function(t){return t.applyEndTime.split(" 00:00:00")[0]}},{id:"publishStatus",title:"发布状态",className:"text-left",width:150,hidden:!1,search:{type:"select",data:{options:[{label:"已发布",value:"已发布"},{label:"未发布",value:"未发布"},{label:"已过期",value:"已过期"}],optionsLabel:"label",optionsValue:"value"}}},{id:"opt",className:"text-left",title:"操作",width:100,hidden:!1,formatter:function(e){var a=[{tag:"a",text:"查看",className:"opt-btn",callback:function(e,a){t.positionId=e.id,t.optParameter={isCheck:!1,optsType:"view",canCancel:e.canCancel,canResubmit:e.canResubmit,canRevoke:e.canRevoke,isShowLog:!0},t.jobParameter={positionId:e.id,isView:!e.canResubmit,unitName:t.unitName},t.jobDeclareData={unitId:e.unit.id,managerId:e.manager&&e.manager.userId||"",userNo:e.manager&&e.manager.userNo||"",userName:e.manager&&e.manager.name||"",positionType:e.positionType,positionName:e.positionName,address:e.address,rewardStandard:e.rewardStandard,jobStartTime:e.jobStartTime,jobEndTime:e.jobEndTime,applyStartTime:e.applyStartTime,applyEndTime:e.applyEndTime,schoolYearId:e.schoolYear.id,contact:e.contact,personCount:e.personCount,workingTime:e.workingTime,salaryCapMonth:e.salaryCapMonth,totalWork:e.totalWork,isToDifficultyStudent:e.isToDifficultyStudent,canApply:e.canApply,description:e.description,positionRequire:e.positionRequire,remark:e.remark,campus:e.campus},t.curRouter="jobDeclarePage"}}];return e.publishAuthority&&"PASS"==e.auditingStatus&&"未发布"==e.publishStatus&&a.push({tag:"a",text:"发布",className:"opt-btn",callback:function(e,a){t.showAddJobModal=!0,t.declareJson={type:"unitPublish",data:{id:e.id,applyEndTime:e.applyEndTime,applyStartTime:e.applyStartTime}}}}),a}}],Object(l.e)({url:"/api/colleges",type:"GET",success:function(e){e.state?t.colleges=e.data:t.$toast(e.message)}}),this.userColumns=[{id:"userName",title:"姓名",width:60,className:"text-left",hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"userNo",title:"学号",width:120,className:"text-left",hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"collegeCode",title:"学院",className:"text-left",hidden:!1,width:100,search:{type:"select",data:{url:"/api/colleges",optionsLabel:"name",optionsValue:"code"}},formatter:function(t){return t.college}},{id:"userGrade",title:"年级",width:50,className:"text-left",hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"educationLevel",title:"培养层次",width:80,className:"text-left",hidden:!1,search:{type:"select",data:{url:"/api/system/dicts?dictType=培养层次",optionsLabel:"label",optionsValue:"value"}},formatter:function(t){return t.educationLevelName}},{id:"idCardNo",title:"身份证号",className:"text-left",hidden:!1,width:130,search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"contact",title:"联系方式",className:"text-left",hidden:!1,width:90,search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"positionName",title:"岗位名称",className:"text-left",width:90,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!0}}},{id:"schoolYear",title:"学年",className:"text-left",hidden:!1,width:100,search:{type:"select",data:{url:"/api/pwps/positions/all/schoolYears",optionsLabel:"name",optionsValue:"id"}}},{id:"onTheJobStatus",title:"在岗状态",className:"text-left",width:80,hidden:!1,search:{type:"select",data:{options:[{id:"RETREAT_FROM_A_PORT",name:"退岗"},{id:"ON_JOB",name:"在岗"}],optionsLabel:"name",optionsValue:"id"}},formatter:function(t){return"ON_JOB"===t.onTheJobStatus?"在岗":"退岗"}},{id:"opt",className:"text-left",title:"操作",width:150,hidden:!1,formatter:function(){return[{tag:"a",text:"编辑",className:"opt-btn",callback:function(e,a){t.showEditPeopleModal=!0,t.editPeople={id:e.id,jobStartTime:e.jobStartTime,planOnJobEndTime:e.planOnJobEndTime,onTheJobStatus:e.onTheJobStatus,remark:e.remark}}},{tag:"a",text:"查看申请单",className:"opt-btn",callback:function(e,a){t.curRouter="jobApplyForm",t.applicationFormDetail={createTime:e.position&&e.position.createTime,contact:e.contact,form:e.applicationFormVO,formId:e.id,isShowLog:!0,opts:{canCancel:!1,canResubmit:!1,canRevoke:!1}}}}]}}]},data:function(){return{showAddJobModal:!1,showAddModal:!1,unitData:[],columns:[],userColumns:[],manageUrl:"/table-data/pwps/positions/page/positions/",jobUserManage:!1,isTodifficultStudentData:[],jobDeclareData:{unitId:"",managerId:"",userNo:"",userName:"",positionType:"",positionName:"",address:"",rewardStandard:"",jobStartTime:"",jobEndTime:"",applyStartTime:"",applyEndTime:"",schoolYearId:"",contact:"",personCount:"",workingTime:"",salaryCapMonth:"",isToDifficultyStudent:"",canApply:"",description:"",positionRequire:"",remark:"",campus:""},unitName:"",modalType:"",isView:!1,positionTypeData:[],schoolYearData:[],colleges:[],showAddPeopleModal:!1,people:{userId:"",userNo:"",userName:"",errorMessage:"",jobStartTime:"",planOnJobEndTime:"",contact:""},importPage:!1,importParams:{parentPageTitle:"岗位人员列表",downloadErrorTemplateUrl:"/pwps/users/excels/errorExcels",templateName:"岗位人员导入",importBtnType:null},schoolYearDefault:"",unitDefault:"",jobDefault:"",jobData:[],importModalSchoolYearDefault:"",auditingStatus:{WAIT_AUDITING:"待审核",PASS:"通过",S_FAILED_TO_PASS:"不通过",X_CANCELED:"取消",TO_RESUBMIT:"等待重新提交"},auditingStatusString:"",account:[],positionId:"",lang:"zh-cn",showEditPeopleModal:!1,editPeople:{id:"",jobStartTime:"",planOnJobEndTime:"",onTheJobStatus:"",remark:""},jobStatusData:[{id:"ON_JOB",text:"在岗"},{id:"RETREAT_FROM_A_PORT",text:"退岗"}],applicationFormDetail:{},curRouter:"unitJobList",timeStamp:"",userTimeStamp:"",newJobDeclareData:{},jobFormInfo:{unitId:"",managerId:"",userNo:"",userName:""},optParameter:{isCheck:!1,optsType:"",canCancel:!1,canResubmit:!1,canRevoke:!1,isShowLog:!1},jobParameter:{positionId:"",isView:!1,unitName:""},declareJson:{}}},computed:{translate:function(){return Object(l.g)(this.lang).schoolRoleManage},downloadUrl:function(){return"/pwps/users/excels/templates?schoolYear="+this.importModalSchoolYearDefault+"&unitId="+this.jobDeclareData.unitId},checkTemplateUrl:function(){return"/pwps/users/excels/check?schoolYear="+this.importModalSchoolYearDefault+"&unitId="+this.jobDeclareData.unitId}},methods:{_closeDeclare:function(){this.showAddJobModal=!1,this.declareJson={type:"",data:null}},sureAddJob:function(t){var e=this;Object(l.e)({url:"/api/pwps/positions/publish/"+t.id,type:"post",data:t,success:function(t){t.state?(e.declareJson={type:"",data:null},e.timeStamp=Object(l.a)(),e.showAddJobModal=!1,e.$toast("岗位发布成功")):"30805"===t.code?e.$toast("该单位已被禁用，无法进行岗位申报"):e.$toast(t.message)}})},_backJobList:function(){this.curRouter="unitJobList"},_back:function(){this.curRouter="unitJobList"},isPhoneNo:function(){if(!/^1[3456789]\d{9}$/.test(this.people.contact))return this.$toast("联系方式格式不对"),void(this.people.contact="")},jobPeopleManage:function(){this.jobUserManage=!0},changeUnit:function(t){var e=this;this.unitData.forEach(function(a,s){a.id===t.value&&(e.unitName=a.name)}),this.jobDeclareData.unitId=t.value},_sumbitJobDeclare:function(t){var e=this;Object(l.e)({url:"/api/pwps/positions",type:"post",data:t,success:function(t){t.state?(e.curRouter="unitJobList",e._refreshTable(e)):"30805"===t.code?e.$toast("该单位已被禁用，无法进行新增岗位"):e.$toast(t.message)}})},_showJobDeclareModal:function(){this.curRouter="jobDeclarePage",this.jobFormInfo={unitId:this.jobDeclareData.unitId,managerId:this.account.id,userNo:this.account.userNo,userName:this.account.name},this.optParameter={isCheck:!1,optsType:"declare",canCancel:!1,canResubmit:!1,canRevoke:!1,isShowLog:!1},this.jobParameter={positionId:"",isView:!1,unitName:this.unitName}},addSchoolYearSelected:function(t){var e=this;this.schoolYearDefault=t.value,Object(l.e)({url:"/api/pwps/positions/options?schoolYear="+this.schoolYearDefault+"&unitId="+this.jobDeclareData.unitId,type:"GET",success:function(t){t.state?e.jobData=t.data:e.$toast(t.message)}})},importModalSchoolYearSelected:function(t){this.importModalSchoolYearDefault=t.value},newAddPeopel:function(){this.showAddModal=!1,this.showAddPeopleModal=!0,this.schoolYearDefault="",this.jobDefault="",this.people={userId:"",userNo:"",userName:"",errorMessage:""}},jobSelected:function(t){this.jobDefault=t.value},batchNewAddPeople:function(){var t=this;this.showAddModal=!1,this.curRouter="importPage",this.importParams.importBtnType=[{url:"/pwps/users/batch",method:"post",isShowBtn:!0,name:"增量导入",success:function(e){e.state&&(t.timeStamp=new Date)}}]},checkAddUser:function(){var t=this;Object(l.e)({url:"/api/users/"+this.people.userNo,type:"GET",success:function(e){e.state?(t.people.userId=e.data.userId,t.people.userName=e.data.name,t.people.errorMessage=""):(t.people.errorMessage="用户不存在",t.people.userId="",t.people.userName="")}})},sureAddPeople:function(){var t=this;this.schoolYearDefault?this.jobDefault?this.people.userId?this.people.jobStartTime?this.people.planOnJobEndTime?Object(l.e)({url:"/api/pwps/users",type:"post",data:{userId:this.people.userId,positionId:this.jobDefault,jobStartTime:this.people.jobStartTime,planOnJobEndTime:this.people.planOnJobEndTime,contact:this.people.contact},success:function(e){e.state?(t.timeStamp=new Date,t.showAddPeopleModal=!1,t.$toast("新增成功")):t.$toast(e.message)}}):this.$toast("工作结束时间不能为空"):this.$toast("工作开始时间不能为空"):this.$toast("请先检测用户"):this.$toast("请先选择岗位"):this.$toast("请先选择学年")},editWorkStartTimeSelected:function(t){var e=this,a=this.showAddPeopleModal?"people":"editPeople";if(this[a].planOnJobEndTime){if(new Date(t.value).getTime()-new Date(this[a].planOnJobEndTime).getTime()>0)return this.$nextTick(function(){e.$toast("工作开始时间要在工作结束时间之前"),e[a].jobStartTime=""}),!1;this[a].jobStartTime=t.value}else this[a].jobStartTime=t.value},editworkEndTimeSelected:function(t){var e=this,a=this.showAddPeopleModal?"people":"editPeople";if(this[a].jobStartTime){if(new Date(t.value).getTime()-new Date(this[a].jobStartTime).getTime()<0)return this.$nextTick(function(){e.$toast("工作结束时间要在工作开始时间之后"),e[a].planOnJobEndTime=""}),!1;this[a].planOnJobEndTime=t.value}else this[a].planOnJobEndTime=t.value},jobStatusSelected:function(t){this.editPeople.onTheJobStatus=t.value},sureEditPeople:function(){var t=this;this.editPeople.jobStartTime?this.editPeople.planOnJobEndTime?this.editPeople.onTheJobStatus?(10===this.editPeople.jobStartTime.length&&(this.editPeople.jobStartTime=this.editPeople.jobStartTime+" 00:00:00"),10===this.editPeople.planOnJobEndTime.length&&(this.editPeople.planOnJobEndTime=this.editPeople.planOnJobEndTime+" 00:00:00"),Object(l.e)({url:"/api/pwps/users/edit",type:"post",data:this.editPeople,success:function(e){e.state?(t.timeStamp=new Date,t.$toast("操作成功"),t.showEditPeopleModal=!1):t.$toast(e.message)}})):this.$toast("在岗状态不能为空"):this.$toast("工作结束时间不能为空"):this.$toast("工作开始时间不能为空")},_revoke:function(){var t=this;window.confirm("确定撤回吗？")&&Object(l.e)({url:"/api/pwps/workflow/runtime/position/"+this.positionId+"/revoke",type:"post",success:function(e){e.state?(t._refreshTable(t),t.$toast("撤回成功"),t.curRouter="unitJobList"):t.$toast(e.message)}})},_resubimt:function(){var t=this,e=JSON.parse(i()(this.jobDeclareData));window.confirm("确定重新提交吗？")&&Object(l.e)({url:"/api/pwps/workflow/runtime/position/"+this.positionId+"/resubmit",type:"post",data:e,success:function(e){e.state?(t._refreshTable(t),t.$toast("重新提交成功"),t.curRouter="unitJobList"):t.$toast(e.message)}})},_cancelApplication:function(){var t=this;window.confirm("确定取消申请吗？")&&Object(l.e)({url:"/api/pwps/workflow/runtime/position/"+this.positionId+"/canceled",type:"post",success:function(e){e.state?(t._refreshTable(t),t.$toast("取消成功"),t.curRouter="unitJobList"):t.$toast(e.message)}})},_refreshTable:function(t){t.timeStamp=Object(l.a)()},exportJobMembers:function(){var t="unitId="+this.jobDeclareData.unitId+"&",e=this.$refs.jobPeople.tableSearchFields;for(var a in e)t+=a+"="+e[a]+"&";t+="timeStamp="+Object(l.a)(),location.href="/downloads/pwps/users/excel?"+t}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return"unitJobList"===t.curRouter?a("div",{attrs:{id:"unitJobManage"}},[a("div",{staticClass:"tab-div"},[a("div",[a("div",{staticClass:"tab",class:t.jobUserManage?"":"active",attrs:{title:"单位岗位管理"},on:{click:function(e){t.jobUserManage=!1}}},[t._v("单位岗位管理")]),t._v(" "),a("div",{staticClass:"tab",class:t.jobUserManage?"active":"",attrs:{title:"岗位人员管理"},on:{click:t.jobPeopleManage}},[t._v("岗位人员管理")])]),t._v(" "),a("v-select",{attrs:{options:t.unitData,optionsLabel:"name",optionsValue:"id"},on:{afterSelected:t.changeUnit},model:{value:t.jobDeclareData.unitId,callback:function(e){t.$set(t.jobDeclareData,"unitId",e)},expression:"jobDeclareData.unitId"}})],1),t._v(" "),t.jobUserManage?a("div",{staticClass:"container-fluid row"},[a("v-table",{key:"member",ref:"jobPeople",attrs:{title:"岗位人员列表",url:"/table-data/pwps/users/page?unitId="+this.jobDeclareData.unitId+"&timeStamp="+t.timeStamp,pagesize:"10",idField:"id",order:!0,columns:t.userColumns,search:!1}},[a("div",{attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[a("div",{staticClass:"btn-group pull-right"},[a("button",{staticClass:"btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showAddModal=!0}}},[t._v("新增人员")]),t._v(" "),a("button",{staticClass:"btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:t.exportJobMembers}},[t._v("导出")])])])])],1):a("div",{staticClass:"container-fluid row text-center"},[a("v-table",{key:"position",attrs:{url:t.jobDeclareData.unitId?""+t.manageUrl+t.jobDeclareData.unitId+"?timeStamp="+t.timeStamp:"",pagesize:"10",idField:"id",order:!0,columns:t.columns,search:!1,columnsControl:!0}},[a("div",{attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[a("div",{staticClass:"btn-group pull-right"},[a("button",{staticClass:"btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:t._showJobDeclareModal}},[t._v("新增岗位")])])])])],1),t._v(" "),a("v-modal",{attrs:{show:t.showAddModal,effect:"fade",width:"420"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("\n        新增\n      ")])]),t._v(" "),a("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[a("button",{staticClass:"btn submit-btn clearBtnBorder",staticStyle:{width:"380px","text-align":"center"},attrs:{type:"button"},on:{click:t.newAddPeopel}},[t._v("单条增加")]),t._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",staticStyle:{width:"380px","text-align":"center","margin-top":"20px"},attrs:{type:"button"},on:{click:t.batchNewAddPeople}},[t._v("批量导入")])]),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showAddModal=!1}}},[t._v("取消")])])]),t._v(" "),a("v-modal",{attrs:{show:t.showAddPeopleModal,effect:"fade",width:"590"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("\n        新增人员\n      ")])]),t._v(" "),a("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"input-label"},[a("span",[t._v("*")]),t._v("学年")]),t._v(" "),a("v-select",{staticClass:"btn-block search-select",attrs:{value:t.schoolYearDefault,options:t.schoolYearData,optionsLabel:"name",optionsValue:"id",search:"","close-on-select":""},on:{afterSelected:t.addSchoolYearSelected}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"input-label"},[a("span",[t._v("*")]),t._v("岗位")]),t._v(" "),a("v-select",{staticClass:"btn-block search-select",attrs:{value:t.jobDefault,options:t.jobData,optionsLabel:"positionName",optionsValue:"id",search:"","close-on-select":""},on:{afterSelected:t.jobSelected}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"input-label"},[a("span",[t._v("*")]),t._v("学号")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.people.userNo,expression:"people.userNo"}],staticClass:"form-control search-input modal-form-style",attrs:{id:"user-no",type:"text"},domProps:{value:t.people.userNo},on:{change:t.checkAddUser,input:function(e){e.target.composing||t.$set(t.people,"userNo",e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn submit-btn ",staticStyle:{"margin-left":"8px"},attrs:{type:"button"},on:{click:t.checkAddUser}},[t._v("检测")]),t._v(" "),a("p",{staticClass:"error-message"},[t._v(t._s(t.people.errorMessage))])]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"input-label"},[t._v("姓名")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.people.userName,expression:"people.userName"}],staticClass:"form-control search-input modal-form-style",attrs:{type:"text",disabled:"disabled"},domProps:{value:t.people.userName},on:{input:function(e){e.target.composing||t.$set(t.people,"userName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"input-label"},[t._v("联系方式")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.people.contact,expression:"people.contact"}],staticClass:"form-control search-input modal-form-style",attrs:{type:"text",placeholder:"请输入联系方式"},domProps:{value:t.people.contact},on:{change:t.isPhoneNo,input:function(e){e.target.composing||t.$set(t.people,"contact",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group datepicker-group"},[a("label",{staticClass:"input-label"},[a("span",[t._v("*")]),t._v("工作开始时间")]),t._v(" "),a("v-datepicker",{staticClass:"btn-block time-picker",attrs:{clearButton:!1,showTime:!1},on:{daySelected:t.editWorkStartTimeSelected},model:{value:t.people.jobStartTime,callback:function(e){t.$set(t.people,"jobStartTime",e)},expression:"people.jobStartTime"}})],1),t._v(" "),a("div",{staticClass:"form-group datepicker-group"},[a("label",{staticClass:"input-label"},[a("span",[t._v("*")]),t._v("工作结束时间")]),t._v(" "),a("v-datepicker",{staticClass:"btn-block time-picker",attrs:{clearButton:!1,showTime:!1},on:{daySelected:t.editworkEndTimeSelected},model:{value:t.people.planOnJobEndTime,callback:function(e){t.$set(t.people,"planOnJobEndTime",e)},expression:"people.planOnJobEndTime"}})],1)]),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showAddPeopleModal=!1}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.sureAddPeople}},[t._v("确定")])])]),t._v(" "),a("v-modal",{attrs:{show:t.showAddJobModal,width:"900"}},[a("div",{staticClass:"modal-body",staticStyle:{height:"400px",padding:"0"},attrs:{slot:"modal-body"},slot:"modal-body"},[t.showAddJobModal?a("jobDeclare1",{attrs:{type:t.declareJson.type,data:t.declareJson.data},on:{back:t._closeDeclare,submit:t.sureAddJob}}):t._e()],1)]),t._v(" "),a("v-modal",{attrs:{show:t.showEditPeopleModal,effect:"fade",width:"500"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("\n        编辑人员\n      ")])]),t._v(" "),a("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[a("div",{staticClass:"form-group datepicker-group"},[a("label",{staticClass:"input-label"},[t._v("工作开始时间")]),t._v(" "),a("v-datepicker",{staticClass:"btn-block time-picker",attrs:{clearButton:!1,showTime:!1},on:{daySelected:t.editWorkStartTimeSelected},model:{value:t.editPeople.jobStartTime,callback:function(e){t.$set(t.editPeople,"jobStartTime",e)},expression:"editPeople.jobStartTime"}})],1),t._v(" "),a("div",{staticClass:"form-group datepicker-group"},[a("label",{staticClass:"input-label"},[t._v("工作结束时间")]),t._v(" "),a("v-datepicker",{staticClass:"btn-block time-picker",attrs:{clearButton:!1,showTime:!1},on:{daySelected:t.editworkEndTimeSelected},model:{value:t.editPeople.planOnJobEndTime,callback:function(e){t.$set(t.editPeople,"planOnJobEndTime",e)},expression:"editPeople.planOnJobEndTime"}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"input-label"},[t._v("在岗状态")]),t._v(" "),a("v-select",{staticClass:"btn-block search-select",attrs:{value:t.editPeople.onTheJobStatus,options:t.jobStatusData,"options-value":"id","options-label":"text",search:"","close-on-select":""},on:{afterSelected:t.jobStatusSelected}})],1),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"input-label textarea-label"},[t._v("备注")]),t._v(" "),a("v-textarea",{staticClass:"modal-textarea",attrs:{cols:20,rows:30,autoHeight:!0,maxLength:600},model:{value:t.editPeople.remark,callback:function(e){t.$set(t.editPeople,"remark",e)},expression:"editPeople.remark"}})],1)]),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showEditPeopleModal=!1}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.sureEditPeople}},[t._v("确定")])])])],1):"importPage"===t.curRouter?a("v-import",t._b({attrs:{downloadTemplateUrl:t.downloadUrl,checkTemplateUrl:t.checkTemplateUrl,isNeedModal:!0,modalname:"选择学年"},on:{backParentPage:function(e){t.curRouter="unitJobList"}}},"v-import",t.importParams,!1),[a("div",{attrs:{slot:"modal"},slot:"modal"},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"college-text"},[t._v("学年")]),t._v(" "),a("v-select",{staticClass:"btn-block search-select",attrs:{value:t.importModalSchoolYearDefault,options:t.schoolYearData,optionsLabel:"name",optionsValue:"id",search:"","close-on-select":""},on:{afterSelected:t.importModalSchoolYearSelected}})],1)])]):"jobApplyForm"===t.curRouter?a("jobApplyForm",{attrs:{formType:"unitJobView",isApply:!1,formDetail:t.applicationFormDetail},on:{back:t._back}}):a("jobDeclare",{attrs:{jobFormInfo:t.jobFormInfo,optParameter:t.optParameter,newJobDeclareData:t.jobDeclareData,jobParameter:t.jobParameter},on:{back:t._backJobList,cancelApplication:t._cancelApplication,resubimt:t._resubimt,revoke:t._revoke,sumbitJobDeclare:t._sumbitJobDeclare}})},staticRenderFns:[]};var p=a("C7Lr")(c,d,!1,function(t){a("UaCw")},null,null);e.default=p.exports},UaCw:function(t,e){},Zb6B:function(t,e,a){"use strict";a("aeU8");var s=a("a5EU"),i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"job-declare-page",attrs:{id:"jobDeclare"}},[t.optParameter.isShowLog?a("div",{staticClass:"log"},[a("button",{staticClass:"btn log-toggle",class:[t.logShow?"open":""],attrs:{title:"操作日志"},on:{click:function(e){t.logShow=!t.logShow}}},[t._v("日志")]),t._v(" "),a("div",{staticClass:"log-content",class:[t.logShow?"active":""]},[t.isLogRecord?a("div",{staticClass:"log-item"},[a("span",{staticClass:"btn-block log-time"},[t._v("当前状态")]),t._v(" "),a("label",[a("strong",[t._v(t._s(t.logData.statusLabel))])])]):a("div",{staticClass:"log-item"},[t._m(0)]),t._v(" "),t._l(t.logData.histories,function(e,s){return a("div",{key:s,staticClass:"log-item"},[a("label",{staticClass:"btn-block log-time"},[t._v(t._s(e.createTime))]),t._v(" "),a("label",{staticClass:"btn-block log-detail"},[t._v("在\n          "),a("strong",[t._v(t._s(e.node.nodeType.name))]),t._v("节点\n        ")]),t._v(" "),a("label",{staticClass:"btn-block log-detail"},[a("strong",[t._v(t._s(e.operator.name))]),t._v(" "),"ADD"===e.actionType?a("strong",[t._v("\n            新增岗位\n          ")]):a("strong",[t._v(t._s(t.actionTypeData[e.actionType])+"申请")])]),t._v(" "),"DISAGREE"===e.actionType?a("label",{staticClass:"btn-block log-detail"},[t._v("意见为：\n          "),a("strong",[t._v(t._s(e.opinion))])]):t._e(),t._v(" "),a("div",{staticClass:"log-records"},t._l(e.modifiedValues,function(e,s){return a("p",{key:s},[a("label",{staticClass:"btn-block log-detail"},[t._v("更新了\n              "),a("strong",[t._v(t._s(e.valueTypeLabel))]),t._v("为\n              "),a("strong",[t._v(t._s(e.newValueLabel))])])])}),0)])})],2)]):t._e(),t._v(" "),a("div",{staticClass:"jobDeclare-header"},[a("i",{staticClass:"maticon back-icon-btn pull-left",domProps:{innerHTML:t._s(t.icons("navigate_before"))},on:{click:t._back}},[t._v("navigate_before")]),t._v(" "),a("div",{staticClass:"jobDeclare-title"},[t._v("新增")])]),t._v(" "),a("div",{staticClass:"jobDelare-body",style:"max-height:"+t.scrollHeight+"px"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[t._m(1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.jobDeclareData.userNo,expression:"jobDeclareData.userNo"}],staticClass:"form-control modal-form-style search-input",attrs:{type:"text",disabled:!!t.isView},domProps:{value:t.jobDeclareData.userNo},on:{change:t.checkUser,input:function(e){e.target.composing||t.$set(t.jobDeclareData,"userNo",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[t._m(2),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.jobDeclareData.userName,expression:"jobDeclareData.userName"}],staticClass:"form-control search-input modal-form-style",attrs:{type:"text",disabled:"disabled"},domProps:{value:t.jobDeclareData.userName},on:{input:function(e){e.target.composing||t.$set(t.jobDeclareData,"userName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[t._m(3),t._v(" "),a("v-select",{staticClass:"btn-block search-select",attrs:{value:t.jobDeclareData.positionType,options:t.positionTypeData,optionsLabel:"label",optionsValue:"value",disabled:!!t.isView,search:"","close-on-select":""},on:{afterSelected:t.positionTypeSelected}})],1),t._v(" "),a("div",{staticClass:"form-group"},[t._m(4),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.jobDeclareData.positionName,expression:"jobDeclareData.positionName"}],staticClass:"form-control modal-form-style search-input",attrs:{type:"text",maxlength:"50",disabled:!!t.isView},domProps:{value:t.jobDeclareData.positionName},on:{input:function(e){e.target.composing||t.$set(t.jobDeclareData,"positionName",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[t._m(5),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.jobDeclareData.address,expression:"jobDeclareData.address"}],staticClass:"form-control modal-form-style search-input",attrs:{type:"text",maxlength:"50",disabled:!!t.isView},domProps:{value:t.jobDeclareData.address},on:{input:function(e){e.target.composing||t.$set(t.jobDeclareData,"address",e.target.value)}}})]),t._v(" "),"check"===t.optParameter.optsType?a("div",{staticClass:"form-group"},[t._m(6),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.jobDeclareData.rewardStandard,expression:"jobDeclareData.rewardStandard"}],staticClass:"form-control modal-form-style search-input",attrs:{type:"text",maxlength:"50"},domProps:{value:t.jobDeclareData.rewardStandard},on:{change:function(e){return t.digitalLimit("rewardStandard")},input:function(e){e.target.composing||t.$set(t.jobDeclareData,"rewardStandard",e.target.value)}}}),t._v(" "),a("i",{staticClass:"maticon edit-icon",domProps:{innerHTML:t._s(t.icons("edit"))}},[t._v("eidt")])]):a("div",{staticClass:"form-group"},[t._m(7),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.jobDeclareData.rewardStandard,expression:"jobDeclareData.rewardStandard"}],staticClass:"form-control modal-form-style search-input",attrs:{type:"text",maxlength:"50",disabled:!!t.isView},domProps:{value:t.jobDeclareData.rewardStandard},on:{change:function(e){return t.digitalLimit("rewardStandard")},input:function(e){e.target.composing||t.$set(t.jobDeclareData,"rewardStandard",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"input-label one-words-difference-margin"},[t._v("岗位总工时上限（小时）\n          ")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.jobDeclareData.totalWork,expression:"jobDeclareData.totalWork"}],staticClass:"form-control modal-form-style search-input",attrs:{type:"number",maxlength:"50",oninput:"value=value.replace(/^(\\.*)(\\d+)(\\.?)(\\d{0,2}).*$/g,'$2$3$4')",disabled:!!t.isView},domProps:{value:t.jobDeclareData.totalWork},on:{input:function(e){e.target.composing||t.$set(t.jobDeclareData,"totalWork",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group datepicker-group"},[t._m(8),t._v(" "),a("v-datepicker",{ref:"workStartTime",staticClass:"modal-form-style search-select",attrs:{disabled:!!t.isView,clearButton:!1,showTime:!1},on:{daySelected:t.workStartTimeSelected},model:{value:t.jobDeclareData.jobStartTime,callback:function(e){t.$set(t.jobDeclareData,"jobStartTime",e)},expression:"jobDeclareData.jobStartTime"}})],1),t._v(" "),"check"===t.optParameter.optsType?a("div",{staticClass:"form-group datepicker-group"},[t._m(9),t._v(" "),a("v-datepicker",{ref:"applyStartTime",staticClass:"modal-form-style search-select",attrs:{clearButton:!1,showTime:!1},on:{daySelected:t.applyStartTimeSelected},model:{value:t.jobDeclareData.applyStartTime,callback:function(e){t.$set(t.jobDeclareData,"applyStartTime",e)},expression:"jobDeclareData.applyStartTime"}}),t._v(" "),a("i",{staticClass:"maticon datepicker-edit-icon",domProps:{innerHTML:t._s(t.icons("edit"))}},[t._v("eidt")])],1):a("div",{staticClass:"form-group datepicker-group"},[t._m(10),t._v(" "),a("v-datepicker",{ref:"applyStartTime",staticClass:"modal-form-style search-select",attrs:{disabled:!!t.isView,clearButton:!1,showTime:!1},on:{daySelected:t.applyStartTimeSelected},model:{value:t.jobDeclareData.applyStartTime,callback:function(e){t.$set(t.jobDeclareData,"applyStartTime",e)},expression:"jobDeclareData.applyStartTime"}})],1),t._v(" "),a("div",{staticClass:"input-group radio-group marginTop25px"},[t._m(11),t._v(" "),"check"===t.optParameter.optsType?a("div",{staticClass:"radio-area"},[t._l(t.isTodifficultStudentData,function(e,s){return a("div",{key:s},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.jobDeclareData.isToDifficultyStudent,expression:"jobDeclareData.isToDifficultyStudent"}],attrs:{type:"radio",id:e.id},domProps:{value:e.id,checked:t._q(t.jobDeclareData.isToDifficultyStudent,e.id)},on:{change:function(a){return t.$set(t.jobDeclareData,"isToDifficultyStudent",e.id)}}}),t._v(" "),a("label",{attrs:{for:e.id}},[t._v(t._s(e.text))])])}),t._v(" "),a("i",{staticClass:"maticon datepicker-edit-icon",staticStyle:{"margin-left":"112px"},domProps:{innerHTML:t._s(t.icons("edit"))}},[t._v("eidt")])],2):a("div",{staticClass:"radio-area"},t._l(t.isTodifficultStudentData,function(e,s){return a("div",{key:s},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.jobDeclareData.isToDifficultyStudent,expression:"jobDeclareData.isToDifficultyStudent"}],attrs:{type:"radio",id:e.id,disabled:!!t.isView},domProps:{value:e.id,checked:t._q(t.jobDeclareData.isToDifficultyStudent,e.id)},on:{change:function(a){return t.$set(t.jobDeclareData,"isToDifficultyStudent",e.id)}}}),t._v(" "),a("label",{attrs:{for:e.id}},[t._v(t._s(e.text))])])}),0)])]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[t._m(12),t._v(" "),a("v-select",{staticClass:"btn-block search-select",attrs:{value:t.jobDeclareData.schoolYearId,disabled:!!t.isView,options:t.schoolYearData,optionsLabel:"name",optionsValue:"id",search:"","close-on-select":""},on:{afterSelected:t.schoolYearSelected}})],1),t._v(" "),a("div",{staticClass:"form-group"},[t._m(13),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.jobDeclareData.contact,expression:"jobDeclareData.contact"}],staticClass:"form-control modal-form-style search-input",attrs:{type:"text",maxlength:"50",disabled:!!t.isView},domProps:{value:t.jobDeclareData.contact},on:{change:t.isPhoneNo,input:function(e){e.target.composing||t.$set(t.jobDeclareData,"contact",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group",staticStyle:{"padding-top":"9px"}},[a("label",{staticClass:"input-label two-words-difference-margin"},[t._v("所属单位")]),t._v(" "),a("label",{staticClass:"input-label unit-name-label"},[t._v(t._s(t.unitName))])]),t._v(" "),"check"===t.optParameter.optsType?a("div",{staticClass:"form-group"},[t._m(14),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.jobDeclareData.personCount,expression:"jobDeclareData.personCount"}],staticClass:"form-control modal-form-style search-input",attrs:{type:"text",maxlength:"50"},domProps:{value:t.jobDeclareData.personCount},on:{change:function(e){return t.digitalLimit("personCount")},input:function(e){e.target.composing||t.$set(t.jobDeclareData,"personCount",e.target.value)}}}),t._v(" "),a("i",{staticClass:"maticon edit-icon",domProps:{innerHTML:t._s(t.icons("edit"))}},[t._v("eidt")])]):a("div",{staticClass:"form-group"},[t._m(15),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.jobDeclareData.personCount,expression:"jobDeclareData.personCount"}],staticClass:"form-control modal-form-style search-input",attrs:{type:"text",maxlength:"50",disabled:!!t.isView},domProps:{value:t.jobDeclareData.personCount},on:{change:function(e){return t.digitalLimit("personCount")},input:function(e){e.target.composing||t.$set(t.jobDeclareData,"personCount",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[t._m(16),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.jobDeclareData.workingTime,expression:"jobDeclareData.workingTime"}],staticClass:"form-control modal-form-style search-input",attrs:{type:"text",maxlength:"50",disabled:!!t.isView},domProps:{value:t.jobDeclareData.workingTime},on:{input:function(e){e.target.composing||t.$set(t.jobDeclareData,"workingTime",e.target.value)}}})]),t._v(" "),"check"===t.optParameter.optsType?a("div",{staticClass:"form-group"},[t._m(17),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.jobDeclareData.salaryCapMonth,expression:"jobDeclareData.salaryCapMonth"}],staticClass:"form-control modal-form-style search-input",attrs:{type:"text",maxlength:"50"},domProps:{value:t.jobDeclareData.salaryCapMonth},on:{change:function(e){return t.digitalLimit("salaryCapMonth")},input:function(e){e.target.composing||t.$set(t.jobDeclareData,"salaryCapMonth",e.target.value)}}}),t._v(" "),a("i",{staticClass:"maticon edit-icon",domProps:{innerHTML:t._s(t.icons("edit"))}},[t._v("eidt")])]):a("div",{staticClass:"form-group"},[t._m(18),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.jobDeclareData.salaryCapMonth,expression:"jobDeclareData.salaryCapMonth"}],staticClass:"form-control modal-form-style search-input",attrs:{type:"text",maxlength:"50",disabled:!!t.isView},domProps:{value:t.jobDeclareData.salaryCapMonth},on:{change:function(e){return t.digitalLimit("salaryCapMonth")},input:function(e){e.target.composing||t.$set(t.jobDeclareData,"salaryCapMonth",e.target.value)}}})]),t._v(" "),t._m(19),t._v(" "),a("div",{staticClass:"form-group datepicker-group"},[t._m(20),t._v(" "),a("v-datepicker",{ref:"workEndTime",staticClass:"modal-form-style search-select",attrs:{disabled:!!t.isView,clearButton:!1,showTime:!1},on:{daySelected:t.workEndTimeSelected},model:{value:t.jobDeclareData.jobEndTime,callback:function(e){t.$set(t.jobDeclareData,"jobEndTime",e)},expression:"jobDeclareData.jobEndTime"}})],1),t._v(" "),"check"===t.optParameter.optsType?a("div",{staticClass:"form-group datepicker-group"},[t._m(21),t._v(" "),a("v-datepicker",{ref:"applyEndTime",staticClass:"modal-form-style search-select",attrs:{clearButton:!1,showTime:!1},on:{daySelected:t.applyEndTimeSelected},model:{value:t.jobDeclareData.applyEndTime,callback:function(e){t.$set(t.jobDeclareData,"applyEndTime",e)},expression:"jobDeclareData.applyEndTime"}}),t._v(" "),a("i",{staticClass:"maticon datepicker-edit-icon",domProps:{innerHTML:t._s(t.icons("edit"))}},[t._v("eidt")])],1):a("div",{staticClass:"form-group datepicker-group"},[t._m(22),t._v(" "),a("v-datepicker",{ref:"applyEndTime",staticClass:"modal-form-style search-select",attrs:{disabled:!!t.isView,clearButton:!1,showTime:!1},on:{daySelected:t.applyEndTimeSelected},model:{value:t.jobDeclareData.applyEndTime,callback:function(e){t.$set(t.jobDeclareData,"applyEndTime",e)},expression:"jobDeclareData.applyEndTime"}})],1),t._v(" "),a("div",{staticClass:"input-group radio-group marginTop25px"},[t._m(23),t._v(" "),"check"===t.optParameter.optsType?a("div",{staticClass:"radio-area"},[t._l(t.canApplyData,function(e,s){return a("div",{key:s},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.jobDeclareData.canApply,expression:"jobDeclareData.canApply"}],attrs:{type:"radio",id:e.id},domProps:{value:e.id,checked:t._q(t.jobDeclareData.canApply,e.id)},on:{change:function(a){return t.$set(t.jobDeclareData,"canApply",e.id)}}}),t._v(" "),a("label",{attrs:{for:e.id}},[t._v(t._s(e.text))])])}),t._v(" "),a("i",{staticClass:"maticon datepicker-edit-icon",staticStyle:{"margin-left":"112px"},domProps:{innerHTML:t._s(t.icons("edit"))}},[t._v("eidt")])],2):a("div",{staticClass:"radio-area"},t._l(t.canApplyData,function(e,s){return a("div",{key:s},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.jobDeclareData.canApply,expression:"jobDeclareData.canApply"}],attrs:{type:"radio",id:e.id,disabled:!!t.isView},domProps:{value:e.id,checked:t._q(t.jobDeclareData.canApply,e.id)},on:{change:function(a){return t.$set(t.jobDeclareData,"canApply",e.id)}}}),t._v(" "),a("label",{attrs:{for:e.id}},[t._v(t._s(e.text))])])}),0)])])]),t._v(" "),a("div",{staticClass:"input-group radio-group four-words-difference-margin"},[a("label",{staticClass:"radio-text two-words-difference-margin"},[t._v("校区\n        "),t.schoolData.length>0?a("span",{staticClass:"star"},[t._v("*")]):t._e()]),t._v(" "),t.schoolData.length>0?a("div",{staticClass:"radio-area"},t._l(t.schoolData,function(e,s){return a("div",{key:s},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.jobDeclareData.campus,expression:"jobDeclareData.campus"}],attrs:{type:"radio",id:e.id,disabled:!!t.isView},domProps:{value:e.value,checked:t._q(t.jobDeclareData.campus,e.value)},on:{change:function(a){return t.$set(t.jobDeclareData,"campus",e.value)}}}),t._v(" "),a("label",{attrs:{for:e.id}},[t._v(t._s(e.label))])])}),0):a("div",{staticClass:"radio-area"},[a("label",{staticClass:"input-label unit-name-label"},[t._v("无")])])]),t._v(" "),a("div",{staticClass:"form-group"},[t._m(24),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.jobDeclareData.description,expression:"jobDeclareData.description"}],staticClass:"modal-textarea",attrs:{cols:"24",rows:"3",disabled:!!t.isView,maxlength:"600"},domProps:{value:t.jobDeclareData.description},on:{input:function(e){e.target.composing||t.$set(t.jobDeclareData,"description",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"input-label four-words-difference-margin textarea-label"},[t._v("岗位要求 ")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.jobDeclareData.positionRequire,expression:"jobDeclareData.positionRequire"}],staticClass:"modal-textarea",attrs:{cols:"24",rows:"3",disabled:!!t.isView,maxlength:"600"},domProps:{value:t.jobDeclareData.positionRequire},on:{input:function(e){e.target.composing||t.$set(t.jobDeclareData,"positionRequire",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"input-label other-words-difference-margin textarea-label"},[t._v("备注 ")]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.jobDeclareData.remark,expression:"jobDeclareData.remark"}],staticClass:"modal-textarea",attrs:{cols:"24",rows:"3",disabled:!!t.isView,maxlength:"600"},domProps:{value:t.jobDeclareData.remark},on:{input:function(e){e.target.composing||t.$set(t.jobDeclareData,"remark",e.target.value)}}})])]),t._v(" "),t.optParameter.isCheck?a("div",{staticClass:"jobDelare-footer"},["revoke"===t.optParameter.optsType?a("div",{staticClass:"btn-group"},[t.optParameter.canRevoke?a("button",{staticClass:"btn submit-btn",attrs:{type:"button"},on:{click:t._revoke}},[t._v("撤回")]):t._e()]):a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn submit-btn",attrs:{type:"button"},on:{click:t._pass}},[t._v("通过")]),t._v(" "),a("button",{staticClass:"btn submit-btn",attrs:{type:"button"},on:{click:t._unpass}},[t._v("不通过")])])]):a("div",{staticClass:"jobDelare-footer"},["declare"===t.optParameter.optsType?a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t._sumbitJobDeclare}},[t._v("提交")])]):a("div",{staticClass:"btn-group"},[t.optParameter.canRevoke?a("button",{staticClass:"btn submit-btn",attrs:{type:"button"},on:{click:t._revoke}},[t._v("撤回")]):t._e(),t._v(" "),t.optParameter.canResubmit?a("button",{staticClass:"btn submit-btn",attrs:{type:"button"},on:{click:t._resubimt}},[t._v("重新提交")]):t._e(),t._v(" "),t.optParameter.canCancel?a("button",{staticClass:"btn submit-btn",attrs:{type:"button"},on:{click:t._cancelApplication}},[t._v("取消申报")]):t._e()])]),t._v(" "),a("v-modal",{attrs:{show:t.showUnpassOpinionModal,width:"500"}},[a("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[a("h5",{staticClass:"modal-title"},[t._v("确定不通过该申请吗？")])]),t._v(" "),a("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[a("div",{staticClass:"form-group"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.opinion,expression:"opinion"}],staticClass:"unpass-modal-textarea",attrs:{cols:"24",rows:"5",placeholder:"请输入不通过的意见",maxlength:"600"},domProps:{value:t.opinion},on:{input:function(e){e.target.composing||(t.opinion=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[a("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(e){t.showUnpassOpinionModal=!1}}},[t._v("取消")]),t._v(" "),a("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.submitUnpassOpinion}},[t._v("确定")])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",[e("strong",[this._v("暂无相关日志")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label three-words-difference-margin"},[this._v("负责人工号\n            "),e("span",{staticClass:"star"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label three-words-difference-margin"},[this._v("负责人姓名"),e("span",{staticClass:"star"},[this._v("   ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label four-words-difference-margin"},[this._v("岗位类型\n            "),e("span",{staticClass:"star"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label four-words-difference-margin"},[this._v("岗位名称\n            "),e("span",{staticClass:"star"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label four-words-difference-margin"},[this._v("工作地点\n            "),e("span",{staticClass:"star"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label"},[this._v("报酬标准(元/小时)\n            "),e("span",{staticClass:"star"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label"},[this._v("报酬标准(元/小时)\n            "),e("span",{staticClass:"star"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label two-words-difference-margin"},[this._v("工作开始时间\n            "),e("span",{staticClass:"star"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label two-words-difference-margin"},[this._v("申请开始时间\n            "),e("span",{staticClass:"star"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label two-words-difference-margin"},[this._v("申请开始时间\n            "),e("span",{staticClass:"star"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"radio-text two-words-difference-margin"},[this._v("只针对困难生\n            "),e("span",{staticClass:"star"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label four-words-difference-margin"},[this._v("学年\n            "),e("span",{staticClass:"star"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label two-words-difference-margin"},[this._v("联系方式\n            "),e("span",{staticClass:"star"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label two-words-difference-margin"},[this._v("岗位人数\n            "),e("span",{staticClass:"star"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label two-words-difference-margin"},[this._v("岗位人数\n            "),e("span",{staticClass:"star"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label two-words-difference-margin"},[this._v("工作时段"),e("span",{staticClass:"star"},[this._v("   ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label one-words-difference-margin"},[this._v("人员月工资上限\n            "),e("span",{staticClass:"star"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label one-words-difference-margin"},[this._v("人员月工资上限\n            "),e("span",{staticClass:"star"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-group"},[e("label",{staticClass:"input-label one-words-difference-margin"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label"},[this._v("工作结束时间\n            "),e("span",{staticClass:"star"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label"},[this._v("申请结束时间\n            "),e("span",{staticClass:"star"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label"},[this._v("申请结束时间\n            "),e("span",{staticClass:"star"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"radio-text"},[this._v("允许学生申请\n            "),e("span",{staticClass:"star"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"input-label four-words-difference-margin textarea-label"},[this._v("岗位描述\n        "),e("span",{staticClass:"star"},[this._v("*")])])}]};var o=function(t){a("MrtH")},l=a("C7Lr")(s.a,i,!1,o,null,null);e.a=l.exports},ZuCk:function(t,e){},a5EU:function(t,e,a){"use strict";(function(t){var s=a("3cXf"),i=a.n(s),o=(a("kV13"),a("C331"));e.a={inject:{windowObj:{default:null}},props:{data:{default:null},optParameter:{default:null},newJobDeclareData:{default:null},jobFormInfo:{default:null},jobParameter:{default:null}},data:function(){return{isTodifficultStudentData:[],canApplyData:[],jobDeclareData:{unitId:"",managerId:"",userNo:"",userName:"",positionType:"",positionName:"",address:"",rewardStandard:"",jobStartTime:"",jobEndTime:"",applyStartTime:"",applyEndTime:"",schoolYearId:"",contact:"",personCount:"",workingTime:"",salaryCapMonth:"",totalWork:"",isToDifficultyStudent:"",canApply:"",description:"",positionRequire:"",remark:"",campus:""},unitName:"",modalType:"",isView:!1,positionTypeData:[],schoolYearData:[],schoolData:[],lang:"zh-cn",logShow:!1,isShowLog:!1,scrollHeight:null,logData:{},isLogRecord:!1,actionTypeData:{AGREE:"同意",DISAGREE:"不同意",REJECT:"驳回",REVOKE:"撤回",RESUBMIT:"重新提交",CANCEL:"取消申请"},showUnpassOpinionModal:!1,opinion:""}},created:function(){var t=this;"declare"===this.optParameter.optsType?(this.jobDeclareData.unitId=this.jobFormInfo.unitId,this.jobDeclareData.managerId=this.jobFormInfo.managerId,this.jobDeclareData.userNo=this.jobFormInfo.userNo,this.jobDeclareData.userName=this.jobFormInfo.userName):this.jobDeclareData=JSON.parse(i()(this.newJobDeclareData)),this.unitName=this.jobParameter.unitName,this.isView=this.jobParameter.isView,this.isTodifficultStudentData=[{id:"true",text:"是"},{id:"false",text:"否"}],this.canApplyData=[{id:"true",text:"是"},{id:"false",text:"否"}],this.optParameter.isShowLog&&Object(o.e)({url:"/api/pwps/workflow/runtime/position/"+this.jobParameter.positionId+"/histories",dataType:"json",type:"get",success:function(e){e.state?e.data?(t.logData=e.data,t.isLogRecord=!0):t.isLogRecord=!1:t.$toast(e.message)}}),Object(o.e)({url:"/api/system/dicts",dataType:"json",type:"get",data:{dictType:"岗位类型"},success:function(e){e.state?t.positionTypeData=e.data:t.$toast(e.message)}}),Object(o.e)({url:"/api/pwps/positions/options/schoolYears",dataType:"json",type:"get",success:function(e){e.state?t.schoolYearData=e.data:t.$toast(e.message)}}),Object(o.e)({url:"/api/system/dicts",dataType:"json",type:"get",data:{dictType:"校区"},success:function(e){e.state?t.schoolData=e.data:t.$toast(e.message)}})},mounted:function(){var e=t("#jobDeclare").height();this.scrollHeight=e-t(".jobDeclare-header").height()},methods:{_back:function(){this.$emit("back")},_cancelApplication:function(){this.$emit("cancelApplication")},_resubimt:function(){this.$emit("resubimt")},_revoke:function(){this.$emit("revoke")},_sumbitJobDeclare:function(){if(!this.jobDeclareData.managerId)return this.$toast("负责人学工号不能为空"),!1;this.jobDeclareData.positionType?this.jobDeclareData.positionName?this.jobDeclareData.address?this.jobDeclareData.rewardStandard?isNaN(this.jobDeclareData.rewardStandard)?this.$toast("报酬标准必须为数字"):this.jobDeclareData.jobStartTime?this.jobDeclareData.jobEndTime?this.jobDeclareData.applyStartTime?this.jobDeclareData.applyEndTime?this.jobDeclareData.schoolYearId?this.jobDeclareData.contact?isNaN(this.jobDeclareData.contact)?this.$toast("联系方式必须为数字"):this.jobDeclareData.personCount?this.jobDeclareData.salaryCapMonth?""===this.jobDeclareData.totalWork||0!=this.jobDeclareData.totalWork?this.jobDeclareData.isToDifficultyStudent?this.jobDeclareData.canApply?this.jobDeclareData.description?this.schoolData.length>0&&!this.jobDeclareData.campus?this.$toast("请选择校区"):this.$emit("sumbitJobDeclare",this.jobDeclareData):this.$toast("岗位描述不能为空"):this.$toast("请选择是否允许学生申请"):this.$toast("请选择是否只针对困难生"):this.$toast("岗位总工时上限不能为0"):this.$toast("人员月工资上限不能为空"):this.$toast("岗位人数不能为空"):this.$toast("联系方式不能为空"):this.$toast("请选择学年"):this.$toast("申请结束时间不能为空"):this.$toast("申请开始时间不能为空"):this.$toast("工作结束时间不能为空"):this.$toast("工作开始时间不能为空"):this.$toast("报酬标准不能为空"):this.$toast("工作地点不能为空"):this.$toast("岗位名称不能为空"):this.$toast("请选择岗位类型")},_pass:function(){this.jobDeclareData.rewardStandard?isNaN(this.jobDeclareData.rewardStandard)?this.$toast("报酬标准必须为数字"):this.jobDeclareData.salaryCapMonth?this.$emit("pass",this.jobDeclareData):this.$toast("人员月工资上限不能为空"):this.$toast("报酬标准不能为空")},_unpass:function(){this.opinion="",this.showUnpassOpinionModal=!0},submitUnpassOpinion:function(){if(!this.opinion)return this.$toast("请输入不通过的意见");this.$emit("unpass",{opinion:this.opinion})},checkUser:function(){var t=this;this.jobDeclareData.userNo?Object(o.e)({url:"/api/users/"+this.jobDeclareData.userNo,type:"GET",success:function(e){e.state?(t.jobDeclareData.managerId=e.data.userId,t.jobDeclareData.userName=e.data.name):(t.$toast("用户不存在"),t.jobDeclareData.userName="")}}):this.$toast("请输入负责人学工号")},schoolYearSelected:function(t){this.jobDeclareData.schoolYearId=t.value},positionTypeSelected:function(t){this.jobDeclareData.positionType=t.value},workStartTimeSelected:function(t){var e=this;if(this.jobDeclareData.jobEndTime){if(new Date(t.value).getTime()-new Date(this.jobDeclareData.jobEndTime).getTime()>0)return this.$nextTick(function(){e.$toast("工作开始时间要在工作结束时间之前"),e.jobDeclareData.jobStartTime=""}),!1;this.jobDeclareData.jobStartTime=t.value}else this.jobDeclareData.jobStartTime=t.value},workEndTimeSelected:function(t){var e=this;if(this.jobDeclareData.jobStartTime){if(new Date(t.value).getTime()-new Date(this.jobDeclareData.jobStartTime).getTime()<0)return this.$nextTick(function(){e.$toast("工作结束时间要在工作开始时间之后"),e.jobDeclareData.jobEndTime=""}),!1;this.jobDeclareData.jobEndTime=t.value}else this.jobDeclareData.jobEndTime=t.value},applyStartTimeSelected:function(t){var e=this;if(this.jobDeclareData.applyEndTime){if(new Date(t.value).getTime()-new Date(this.jobDeclareData.applyEndTime).getTime()>0)return this.$nextTick(function(){e.$toast("申请开始时间要在申请结束时间之前"),e.jobDeclareData.applyStartTime=""}),!1;this.jobDeclareData.applyStartTime=t.value}else this.jobDeclareData.applyStartTime=t.value},applyEndTimeSelected:function(t){var e=this;if(this.jobDeclareData.applyStartTime){if(new Date(t.value).getTime()-new Date(this.jobDeclareData.applyStartTime).getTime()<0)return this.$nextTick(function(){e.$toast("申请结束时间要在申请开始时间之后"),e.jobDeclareData.applyEndTime=""}),!1;this.jobDeclareData.applyEndTime=t.value}else this.jobDeclareData.applyEndTime=t.value},digitalLimit:function(t){return"rewardStandard"===t&&isNaN(this.jobDeclareData.rewardStandard)?(this.$toast("报酬标准必须为数字"),void(this.jobDeclareData.rewardStandard="")):"personCount"===t&&isNaN(this.jobDeclareData.personCount)?(this.$toast("岗位人数必须为数字"),void(this.jobDeclareData.personCount="")):"salaryCapMonth"===t&&isNaN(this.jobDeclareData.salaryCapMonth)?(this.$toast("人员月工资上限必须为数字"),void(this.jobDeclareData.salaryCapMonth="")):void 0},isPhoneNo:function(){if(!/^1[3456789]\d{9}$/.test(this.jobDeclareData.contact))return this.$toast("联系方式格式不正确"),void(this.jobDeclareData.contact="")}},watch:{windowObj:{deep:!0,handler:function(){var e=t("#jobDeclare").height();this.scrollHeight=e-t(".jobDeclare-header").height()}}}}}).call(e,a("qqHy"))},aeU8:function(t,e,a){"use strict";(function(t){var e=a("3cXf");a.n(e),a("kV13"),a("C331")}).call(e,a("qqHy"))},wto8:function(t,e,a){"use strict";var s=a("3cXf"),i=a.n(s),o=a("C331"),l={props:{type:{default:"add"},data:{default:null}},data:function(){return{detectShow:!1,logShow:!1,isShowLog:!1,logData:{histories:[],statusLabel:""},isLogRecord:!1,actionTypeData:{AGREE:"同意",DISAGREE:"不同意",REJECT:"驳回",REVOKE:"撤回",RESUBMIT:"重新提交",CANCEL:"取消申请"},titleJson:{publish:"学生申请岗位限制",unitPublish:"学生申请岗位限制",setting:"学生申请岗位限制",add:"新增岗位"},typeJson:{publish:"发布",unitPublish:"发布",setting:"设置",add:"新增"},layoutData:[{id:"userNo",name:"负责人",type:"detect",required:!0,disabled:!1},{id:"schoolYearId",name:"学年",type:"select",required:!0,disabled:!1,data:{url:"/api/pwps/positions/options/schoolYears",optionsLabel:"name",optionsValue:"id"}},{id:"contact",name:"联系方式",type:"input",required:!0,disabled:!1},{id:"positionType",name:"岗位类型",type:"select",required:!0,disabled:!1,data:{url:"/api/system/dicts?dictType=岗位类型",optionsLabel:"label",optionsValue:"value"}},{id:"unitId",name:"所属单位",type:"select",required:!0,disabled:!1,data:{url:"/api/pwps/units/all",optionsLabel:"name",optionsValue:"id"}},{id:"positionName",name:"岗位名称",type:"input",required:!0,disabled:!1},{id:"personCount",name:"岗位人数",type:"number",required:!0,disabled:!1},{id:"address",name:"工作地点",type:"input",required:!0,disabled:!1},{id:"rewardStandard",name:"报酬标准(元/小时)",type:"number",required:!0,disabled:!1},{id:"salaryCapMonth",name:"人员月工资上限",type:"number",required:!0,disabled:!1},{id:"totalWork",name:"岗位总工时上限（小时）",type:"float",required:!1,disabled:!1},{id:"jobStartTime",name:"工作开始时间",type:"datetime",required:!0,disabled:!1},{id:"jobEndTime",name:"工作结束时间",type:"datetime",required:!0,disabled:!1},{id:"applyStartTime",name:"申请开始时间",type:"datetime",required:!0,disabled:!1},{id:"applyEndTime",name:"申请结束时间",type:"datetime",required:!0,disabled:!1},{id:"workingTime",name:"工作时段",type:"input",required:!1,disabled:!1},{id:"campus",name:"校区",type:"select",required:!0,disabled:!1,data:{url:"/api/system/dicts?dictType=校区",optionsLabel:"label",optionsValue:"value"}},{id:"isToDifficultyStudent",name:"只针对困难生",type:"radio",required:!0,disabled:!1,data:{options:[{id:"true",text:"是"},{id:"false",text:"否"}],optionsLabel:"text",optionsValue:"id"}},{id:"canApply",name:"允许学生申请",type:"radio",required:!0,disabled:!1,data:{options:[{id:"true",text:"是"},{id:"false",text:"否"}],optionsLabel:"text",optionsValue:"id"}},{id:"description",name:"岗位描述",type:"textarea",required:!0,disabled:!1,data:{maxLength:600,rows:4}},{id:"positionRequire",name:"岗位要求",type:"textarea",required:!1,disabled:!1,data:{maxLength:600,rows:4}},{id:"remark",name:"备注",type:"textarea",required:!1,disabled:!1,data:{maxLength:600,rows:4}}],formData:{unitId:"",managerId:"",userNo:"",userName:"",positionType:"",positionName:"",address:"",rewardStandard:"",jobStartTime:"",jobEndTime:"",applyStartTime:"",applyEndTime:"",schoolYearId:"",contact:"",personCount:"",workingTime:"",salaryCapMonth:"",totalWork:"",isToDifficultyStudent:"",canApply:"",description:"",positionRequire:"",remark:"",campus:""}}},methods:{_showLog:function(){var t=this;if(this.logShow=!this.logShow,this.logShow){var e="api/pwps/positions/"+this.data.id+"/getPositionLog";Object(o.d)(e).then(function(e){e.state&&(e.data.length?(t.isLogRecord=!0,t.logData.histories=e.data):t.isLogRecord=!1)})}},getPersonCountTitle:function(){return"当前有"+this.formData.userIncumbencyCount+"位在岗人员，岗位人数最低可调整至"+this.formData.userIncumbencyCount},_back:function(){this.$emit("back")},_detect:function(t){this.formData.userNo=t.userNo,this.formData.userName=t.name,this.formData.managerId=t.userId,this.formData.manager=t,this.detectShow=!1},_change:function(t,e){var a=this;if("contact"===e.id)/^1[3456789]\d{9}$/.test(this.formData.contact)||(this.$toast("联系方式格式不正确"),this.formData.contact="");else if("jobStartTime"===e.id||"jobEndTime"===e.id){if(this.formData.jobStartTime&&this.formData.jobEndTime)new Date(this.formData.jobStartTime.replace(/-/g,"/")).getTime()-new Date(this.formData.jobEndTime.replace(/-/g,"/")).getTime()>0&&("jobStartTime"===e.id?(this.$toast("工作开始时间不能在工作结束时间之后"),this.$nextTick(function(){a.formData.jobStartTime=""})):(this.$toast("工作结束时间不能在工作开始时间之前"),this.$nextTick(function(){a.formData.jobEndTime=""})))}else if("applyStartTime"===e.id||"applyEndTime"===e.id){if(this.formData.applyStartTime&&this.formData.applyEndTime)new Date(this.formData.applyStartTime.replace(/-/g,"/")).getTime()-new Date(this.formData.applyEndTime.replace(/-/g,"/")).getTime()>0&&("applyStartTime"===e.id?(this.$toast("工作开始时间不能在工作结束时间之后"),this.$nextTick(function(){a.formData.applyStartTime=""})):(this.$toast("工作结束时间不能在工作开始时间之前"),this.$nextTick(function(){a.formData.applyEndTime=""})))}else if("personCount"===e.id){if(["setting","publish"].indexOf(this.type)>=0)parseInt(this.formData.personCount||0)>parseInt(this.formData.initPersonCount||0)||(this.$toast("新值不得小于旧值！"),this.$nextTick(function(){a.formData.personCount=a.formData.initPersonCount}));else parseInt(this.formData.personCount||0)>=0||(this.$toast("不能为负值！"),this.$nextTick(function(){a.formData.personCount=0}))}},_radioClick:function(t,e){t.disabled||(this.formData[t.id]=e[t.data.optionsValue])},_verify:function(){var t=this,e=!0;return this.layoutData.forEach(function(a){a.required&&e&&!t.formData[a.id]&&(t.$toast(a.name+"不能为空"),e=!1)}),e},_save:function(){this._verify()&&(this.formData.userIncumbencyCount>this.formData.personCount?this.$toast("岗位人数不能小于在岗人数!"):""===this.formData.totalWork||0!=this.formData.totalWork?this.$emit("submit",this.formData):this.$toast("岗位总工时上限不能为0"))},_initPageLayout:function(){if("unitPublish"===this.type){if(this.layoutData=[{id:"applyStartTime",name:"申请开始时间",type:"datetime",required:!0,disabled:!1},{id:"applyEndTime",name:"申请结束时间",type:"datetime",required:!0,disabled:!1}],this.data)for(var t in this.formData={},this.data)this.$set(this.formData,t,this.data[t])}else this.data&&(this.formData=JSON.parse(i()(this.data)))}},created:function(){this._initPageLayout()}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"job-declare-page"},["add"!==t.type&&"unitPublish"!==t.type?a("div",{staticClass:"log"},[a("button",{staticClass:"btn log-toggle",class:[t.logShow?"open":""],attrs:{title:"操作日志"},on:{click:function(e){return t._showLog()}}},[t._v("日志")]),t._v(" "),t.logShow?a("div",{staticClass:"log-content",class:[t.logShow?"active":""]},[t.isLogRecord?a("div",{staticClass:"log-item"},[a("span",{staticClass:"btn-block log-time"},[t._v("编辑记录")]),t._v(" "),t._l(t.logData.histories,function(e,s){return a("div",{key:s,staticClass:"log-item"},[a("label",{staticClass:"btn-block log-time"},[t._v(t._s(e.updateTime))]),t._v(" "),a("label",{staticClass:"btn-block log-detail"},[a("strong",[t._v(t._s(e.userName))]),t._v("修改了岗位信息\n        ")])])})],2):a("div",{staticClass:"log-item"},[t._m(0)])]):t._e()]):t._e(),t._v(" "),a("div",{staticClass:"job-declare-header"},[a("i",{staticClass:"maticon back-icon-btn pull-left",domProps:{innerHTML:t._s(t.icons("navigate_before"))},on:{click:t._back}},[t._v("navigate_before")]),t._v(" "),a("div",{staticClass:"job-declare-title"},[t._v(t._s(t.titleJson[t.type]))])]),t._v(" "),a("div",{staticClass:"job-declare-body"},[a("GeminiScrollbar",{attrs:{scrollX:!1}},[a("div",{staticClass:"body-wrapper container-fluid"},[a("div",{staticClass:"row"},[t._l(t.layoutData,function(e,s){return a("div",{key:s,staticClass:"info-item",class:["textarea"===e.type?"col-md-12":"col-md-6"]},[a("div",{staticClass:"input-group info-content",class:{disabled:e.disabled}},[a("span",{staticClass:"input-group-addon",class:{"pull-left":"textarea"===e.type}},[t._v("\n                "+t._s(e.name)+"\n                "),e.required?a("span",{staticClass:"star"},[t._v("*")]):t._e()]),t._v(" "),"input"===e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData[e.id],expression:"formData[item.id]"}],staticClass:"form-control",attrs:{type:"text",disabled:e.disabled},domProps:{value:t.formData[e.id]},on:{change:function(a){return t._change(a,e)},input:function(a){a.target.composing||t.$set(t.formData,e.id,a.target.value)}}}):t._e(),t._v(" "),"personCount"===e.id&&t.formData.userIncumbencyCount?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.getPersonCountTitle(),placement:"right"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData[e.id],expression:"formData[item.id]"}],staticClass:"form-control",attrs:{type:"number",disabled:e.disabled,min:t.formData.userIncumbencyCount},domProps:{value:t.formData[e.id]},on:{change:function(a){return t._change(a,e)},input:function(a){a.target.composing||t.$set(t.formData,e.id,a.target.value)}}})]):"number"===e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData[e.id],expression:"formData[item.id]"}],staticClass:"form-control",attrs:{type:"number",disabled:e.disabled},domProps:{value:t.formData[e.id]},on:{change:function(a){return t._change(a,e)},input:function(a){a.target.composing||t.$set(t.formData,e.id,a.target.value)}}}):"float"===e.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData[e.id],expression:"formData[item.id]"}],staticClass:"form-control",attrs:{type:"number",disabled:e.disabled,oninput:"value=value.replace(/^(\\.*)(\\d+)(\\.?)(\\d{0,2}).*$/g,'$2$3$4')"},domProps:{value:t.formData[e.id]},on:{change:function(a){return t._change(a,e)},input:function(a){a.target.composing||t.$set(t.formData,e.id,a.target.value)}}}):"select"===e.type?a("v-select",{attrs:{url:e.data&&e.data.url,options:e.data&&e.data.options,optionsLabel:e.data&&e.data.optionsLabel,optionsValue:e.data&&e.data.optionsValue,disabled:e.disabled,"close-on-select":""},on:{change:function(a){return t._change(a,e)}},model:{value:t.formData[e.id],callback:function(a){t.$set(t.formData,e.id,a)},expression:"formData[item.id]"}}):"datetime"===e.type?a("v-datepicker",{attrs:{disabled:e.disabled,clearButton:!0,showTime:!1,format:e.data&&e.data.format},on:{change:function(a){return t._change(a,e)}},model:{value:t.formData[e.id],callback:function(a){t.$set(t.formData,e.id,a)},expression:"formData[item.id]"}}):"radio"===e.type?a("div",{staticClass:"info-options"},t._l(e.data.options,function(s,i){return a("span",{key:i,on:{click:function(a){return t._radioClick(e,s)}}},[a("i",{staticClass:"maticon ",class:t.formData[e.id]===s[e.data.optionsValue]?"active":"",domProps:{innerHTML:t._s(t.icons(t.formData[e.id]===s[e.data.optionsValue]?"radio_button_checked":"radio_button_unchecked"))}}),t._v("\n                  "+t._s(s[e.data.optionsLabel])+"\n                ")])}),0):"detect"===e.type?a("div",{staticClass:"detect-div"},[a("detect",{attrs:{url:"/api/users/search",searchVal:t.formData.userName?t.formData.userName+"("+t.formData.userNo+")":"",type:"query"},on:{afterSelected:t._detect}})],1):"textarea"===e.type?a("v-textarea",{attrs:{maxLength:e.data.maxLength,rows:e.data.rows,readonly:e.disabled},model:{value:t.formData[e.id],callback:function(a){t.$set(t.formData,e.id,a)},expression:"formData[item.id]"}}):"label"===e.type?a("label",{staticClass:"label-disabled"},[t._v(t._s(t.formData[e.id]||"无"))]):t._e()],1)])}),t._v(" "),"unitPublish"===t.type?a("div",{staticClass:"tip info-item col-md-12"},[t._v("岗位发布后无法删除，若要删除请联系校级勤工助学管理员")]):t._e()],2)])])],1),t._v(" "),a("div",{staticClass:"job-declare-footer text-center"},[a("a",{staticClass:"btn save",on:{click:t._save}},[t._v(t._s(t.typeJson[t.type]?"确认"+t.typeJson[t.type]:"提    交"))])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",[e("strong",[this._v("暂无相关日志")])])}]};var n=a("C7Lr")(l,r,!1,function(t){a("ZuCk")},null,null);e.a=n.exports}});