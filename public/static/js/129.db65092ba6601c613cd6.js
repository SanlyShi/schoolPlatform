webpackJsonp([129],{"s/+2":function(t,e){},vkRC:function(t,e){},yV1m:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("68u/"),a("YXeK");var n=a("EA6R"),i=a.n(n),s=a("lC5x"),o=a.n(s),r=a("J0Oq"),l=a.n(r),c=a("MVd6"),u=a("Se9A"),f=a("XfSg"),d=a("p+qa"),p=a("+X9P"),h=(a("7Adc"),u.a,p.a,{components:{ModuleContainer:u.a,BaseInfo:p.a},data:function(){return{ojf:new c.a}},methods:{createOjf:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$refs.baseInfo.validate();case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),Object(d.a)(0,200),e.abrupt("return");case 9:return e.next=11,f.a.create(t.ojf);case 11:a=e.sent,n=a.state,i=a.message,a.data,n?t.$alert("发布成功","",{center:!0,showClose:!1}).then(function(){t.backToList()}):t.$toast(i);case 16:case"end":return e.stop()}},e,t,[[0,5]])}))()},backToList:function(){this.$emit("back-to-list",{refresh:!0,tableName:"manageList"})}}}),m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"back",on:{click:t.backToList}},[a("i",{staticClass:"el-icon-back"}),t._v("返回\n  ")]),t._v(" "),a("div",{staticClass:"module-container"},[a("base-info",{ref:"baseInfo",attrs:{edit:""},model:{value:t.ojf,callback:function(e){t.ojf=e},expression:"ojf"}}),t._v(" "),a("module-container",{attrs:{actions:"",inline:""}},[a("el-button",{attrs:{type:"primary",size:"large"},on:{click:t.createOjf}},[t._v("发布")])],1)],1)])},staticRenderFns:[]},v=a("C7Lr")(h,m,!1,null,null,null).exports,b={components:{NewOjf:v},data:function(){var t=this;return{ojf:new c.a,table:{url:"/table-data/employment/manage/networkMeeting/getNetworkMeetingList?ts=",search:{ts:+new Date,beginTime:"",endTime:""},columns:[{id:"name",title:"网招会名称",className:"text-left",width:150,hidden:!1,search:{type:"",data:{placeholer:"网招会名称",autoFocus:!1}},formatter:function(t){return c.a.fromApi(t).getNameHtmlWithStatus()}},{id:"time",title:"网招会时间",className:"text-left line-height-normal",width:145,hover:!1,hidden:!1,search:{type:"datetime",data:{placeholder:"网招会",dateFormat:"yyyy-MM-dd",change:function(e){e.value,e.target;var a=t.$refs.manageListTable.tableSearchFields.time_start,n=t.$refs.manageListTable.tableSearchFields.time_end;t.table.search.beginTime=a?a.split(" ")[0]+" 00:00:00":"",t.table.search.endTime=n?n.split(" ")[0]+" 23:59:59":""}}},formatter:function(t){return new Date(t.beginTime).format("yyyy-MM-dd HH:mm")+"~<br/>"+new Date(t.endTime).format("yyyy-MM-dd HH:mm")}},{id:"applyTime",title:"网招会申请时间",className:"text-left line-height-normal",width:140,hidden:!1,hover:!1,formatter:function(t){return new Date(t.applyBeginTime).format("yyyy-MM-dd HH:mm")+"~<br/>"+new Date(t.applyEndTime).format("yyyy-MM-dd HH:mm")}},{id:"opt",title:"操作",width:120,hidden:!1,formatter:function(e){var a=c.a.fromApi(e),n={show:{tag:"a",text:"查看",callback:function(e,n){t.showOjf(a)}},publish:{tag:"a",text:"发布",callback:function(e,n){t.publish(a)}},setTop:{tag:"a",text:"置顶",callback:function(e,n){t.changeTop(a,!0)}},downTop:{tag:"a",text:"取消置顶",callback:function(e,n){t.changeTop(a,!1)}},unShelve:{tag:"a",text:"下架",callback:function(e,n){t.unShelve(a)}},shelve:{tag:"a",text:"上架",callback:function(e,n){t.shelve(a)}}},i=[n.show];return a.published?a.unShelved?i.push(n.shelve):i.push(n.unShelve):i.push(n.publish),a.top?i.push(n.downTop):i.push(n.setTop),i}}]}}},computed:{tableUrl:function(){return this.table.url+"&beginTime="+(this.table.search.beginTime||"")+"&endTime="+(this.table.search.endTime||"")+"&ts="+this.table.search.ts}},methods:{toCreateOjf:function(){this.$emit("to-create-ojf")},showOjf:function(t){var e=this;return l()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.$emit("to-detail",t);case 1:case"end":return a.stop()}},a,e)}))()},unShelve:function(t){var e=this;return l()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:i.a.confirm("确认下架"+t.name+"?").then(l()(o.a.mark(function a(){var n,i,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.unShelve(t.id);case 2:n=a.sent,i=n.state,s=n.message,n.data,i?(e.$toast("下架成功"),e.refreshTable()):e.$toast(s);case 7:case"end":return a.stop()}},a,e)})));case 1:case"end":return a.stop()}},a,e)}))()},shelve:function(t){var e=this;return l()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:i.a.confirm("确认上架"+t.name+"?").then(l()(o.a.mark(function a(){var n,i,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.shelve(t.id);case 2:n=a.sent,i=n.state,s=n.message,n.data,i?(e.$toast("上架成功"),e.refreshTable()):e.$toast(s);case 7:case"end":return a.stop()}},a,e)})));case 1:case"end":return a.stop()}},a,e)}))()},publish:function(t){var e=this;return l()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:i.a.confirm("确认发布"+t.name+"?").then(l()(o.a.mark(function a(){var n,i,s;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f.a.publish(t.id);case 2:n=a.sent,i=n.state,s=n.message,n.data,i?(e.$toast("发布成功"),e.refreshTable()):e.$toast(s);case 7:case"end":return a.stop()}},a,e)})));case 1:case"end":return a.stop()}},a,e)}))()},changeTop:function(t,e){var a=this;return l()(o.a.mark(function n(){var i,s,r;return o.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.changeTop(t.id,e);case 2:i=n.sent,s=i.state,r=i.message,i.data,s?(a.$toast("置顶成功"),a.refreshTable()):a.$toast(r);case 7:case"end":return n.stop()}},n,a)}))()},refreshTable:function(){this.table.search.ts=+new Date}}},g={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("v-table",{ref:"manageListTable",attrs:{url:this.tableUrl,columns:this.table.columns,pagesize:"20",idField:"id",multiple:!1,order:!0,search:!1}},[e("div",{staticClass:"pull-right",attrs:{slot:"btn-group"},slot:"btn-group"},[e("el-button",{attrs:{type:"primary"},on:{click:this.toCreateOjf}},[this._v("新增网招会")])],1)])],1)},staticRenderFns:[]},j=a("C7Lr")(b,g,!1,null,null,null).exports,x=a("aA9S"),w=a.n(x),y=a("DkpT"),k={data:function(){var t=this;return{page:"LIST",ojf:new c.a,table:{url:"/table-data/employment/manage/networkMeeting/getNetworkMeetingAuditList?ts=",search:{ts:+new Date},columns:[{id:"companyName",title:"单位名称",className:"text-left",width:130,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!1}}},{id:"name",title:"网招会名称",className:"text-left",width:130,hidden:!1,search:{type:"input",data:{placeholer:"",autoFocus:!1}}},{id:"beginTime",title:"开始时间",className:"text-left",width:145,hidden:!1},{id:"endTime",title:"结束时间",className:"text-left",width:145,hidden:!1},{id:"createTime",title:"提交时间",className:"text-left",width:145,hidden:!1},{id:"status",title:"审核状态",className:"text-left",width:80,hidden:!1,hover:!1,formatter:function(t){var e=y.c[t.status]||y.b[t.status];return'<span class="el-tag el-tag--small el-tag--dark el-tag--'+y.d[t.status]+'">'+e+"</span>"},search:{type:"select",data:{placeholer:"审核状态",autoFocus:!1,optionsLabel:"text",optionsValue:"id",options:y.e.filter(function(t){return![y.a.COUNTERMAND.toString()].includes(t.id)})}}},{id:"auditReason",title:"审核意见",className:"text-left",width:100,hidden:!1,formatter:function(t){return t.auditReason||""}},{id:"opt",title:"操作",width:100,hidden:!1,formatter:function(e){return[{show:{tag:"a",text:"查看",callback:function(e,a){t.toApplyDetail({ojfUnitApplyId:e.participantId,ojf:new c.a({id:e.id})})}}}.show]}}]}}},computed:{tableUrl:function(){return this.table.url+"&ts="+this.table.search.ts}},methods:{backToList:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).created&&this.refreshTable(),this.page=this.PAGES.LIST},toApplyDetail:function(t){var e=this;return l()(o.a.mark(function a(){return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:e.$emit("to-apply-detail",w()({},t,{from:"LIST"}));case 1:case"end":return a.stop()}},a,e)}))()},refreshTable:function(){this.table.search.ts=+new Date}}},O={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("v-table",{ref:"manageListTable",attrs:{url:this.tableUrl,columns:this.table.columns,pagesize:"20",idField:"id",multiple:!1,order:!0,search:!1}})],1)},staticRenderFns:[]},T=a("C7Lr")(k,O,!1,null,null,null).exports,_=(Object,u.a,p.a,{props:{ojf:Object},components:{ModuleContainer:u.a,BaseInfo:p.a},data:function(){return{hasUpdated:!1,loading:!1,isEditingOjf:!1,ojfTemp:null,showOpLogs:!1,opLogDataUrl:"",exportOjfUnitDialog:{show:!1,selectAll:!1,fields:[{value:"1",text:"单位名称"},{value:"2",text:"单位性质"},{value:"3",text:"单位联系人"},{value:"4",text:"单位规模"},{value:"5",text:"电话"},{value:"6",text:"邮箱"},{value:"7",text:"单位地址"},{value:"8",text:"职位数量"},{value:"9",text:"职位名称"},{value:"10",text:"薪资范围"},{value:"11",text:"招聘人数"},{value:"12",text:"所属类别"},{value:"13",text:"专业要求"},{value:"14",text:"学历要求"},{value:"15",text:"工作地点"},{value:"16",text:"岗位职责"},{value:"17",text:"岗位要求"}],selected:[]}}},computed:{allExportOjfUnitFieldsSelected:function(){return this.exportOjfUnitDialog.fields.length===this.exportOjfUnitDialog.selected.length}},created:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(t.ojf.id);case 2:a=e.sent,n=a.state,i=a.message,s=a.data,n?t.ojf.units=c.a.fromApi(s).units:t.$toast(i);case 7:case"end":return e.stop()}},e,t)}))()},methods:{updateOjf:function(){var t=this;return l()(o.a.mark(function e(){var a,n,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$refs.baseInfo.validate();case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),Object(d.a)(0,200),e.abrupt("return");case 9:return e.next=11,f.a.update(t.ojf);case 11:a=e.sent,n=a.state,i=a.message,a.data,n?(t.$toast("保存更改成功"),t.hasUpdated=!0,t.isEditingOjf=!1,t.ojfTemp=null):t.$toast(i);case 16:case"end":return e.stop()}},e,t,[[0,5]])}))()},toReserve:function(){this.$emit("to-reserve",{ojf:this.ojf})},toExportOjfUnit:function(){this.exportOjfUnitDialog.show=!0,this.selectAllExportOjfUnitFields()},selectAllExportOjfUnitFields:function(t){this.exportOjfUnitDialog.selected=t?this.exportOjfUnitDialog.fields.map(function(t){return t.value}):[]},exportOjfUnit:function(){window.open("/downloads/employment/manage/networkMeeting/excelOut?id="+this.ojf.id+"&fields="+this.exportOjfUnitDialog.selected.sort(function(t,e){return parseInt(t)-parseInt(e)}).join(",")),this.exportOjfUnitDialog.show=!1},showOjfUnitApply:function(t,e){this.$emit("to-apply-detail",{ojfUnitApplyId:t.id,ojf:this.ojf,edit:!0,hideStatus:!0})},toEditOjf:function(){this.ojfTemp=w()({},this.ojf),this.isEditingOjf=!0},cancelEditOjf:function(){w()(this.ojf,this.ojfTemp),this.isEditingOjf=!1},backToList:function(){var t={};this.hasUpdated&&(t={refresh:!0,tableName:"manageList"}),this.$emit("back-to-list",t)}}}),L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"back",on:{click:t.backToList}},[a("i",{staticClass:"el-icon-back"}),t._v("返回\n  ")]),t._v(" "),a("div",{staticClass:"module-container"},[a("base-info",{ref:"baseInfo",attrs:{edit:t.isEditingOjf},model:{value:t.ojf,callback:function(e){t.ojf=e},expression:"ojf"}}),t._v(" "),t.isEditingOjf?a("module-container",{attrs:{actions:""}},[a("el-button",{attrs:{size:"large"},on:{click:t.cancelEditOjf}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"large"},on:{click:t.updateOjf}},[t._v("保存")])],1):t._e(),t._v(" "),a("module-container",{attrs:{title:"参会单位",loader:t.loading,"loader-text":"正在加载参会单位"}},[a("div",{staticClass:"actions"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.toReserve}},[t._v("预留展位")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-download"},on:{click:t.toExportOjfUnit}},[t._v("导出")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.ojf.units}},[a("el-table-column",{attrs:{type:"index",width:"40"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"企业名称",width:"260"}}),t._v(" "),a("el-table-column",{attrs:{prop:"positionCount",label:"职位数量",width:"260"}}),t._v(" "),a("el-table-column",{attrs:{prop:"opt",label:"操作",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.showOjfUnitApply(e.row,e.$index)}}},[t._v("查看")])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"operations-container-action"},[t.isEditingOjf?a("el-button",{attrs:{type:"text"},on:{click:t.cancelEditOjf}},[t._v("取消编辑")]):a("el-button",{attrs:{type:"text",icon:"el-icon-edit-outline"},on:{click:t.toEditOjf}},[t._v("编辑")])],1),t._v(" "),a("div",{staticClass:"operations-container",class:{show:t.showOpLogs}})],1),t._v(" "),a("el-dialog",{attrs:{title:"选择导出的字段",visible:t.exportOjfUnitDialog.show,width:"25%","show-close":!1,center:""},on:{"update:visible":function(e){return t.$set(t.exportOjfUnitDialog,"show",e)}}},[a("el-checkbox",{attrs:{indeterminate:t.exportOjfUnitDialog.selected.length&&t.exportOjfUnitDialog.selected.length<t.exportOjfUnitDialog.fields.length},on:{change:t.selectAllExportOjfUnitFields},model:{value:t.allExportOjfUnitFieldsSelected,callback:function(e){t.allExportOjfUnitFieldsSelected=e},expression:"allExportOjfUnitFieldsSelected"}},[t._v("\n      全选\n    ")]),t._v(" "),a("el-checkbox-group",{model:{value:t.exportOjfUnitDialog.selected,callback:function(e){t.$set(t.exportOjfUnitDialog,"selected",e)},expression:"exportOjfUnitDialog.selected"}},t._l(t.exportOjfUnitDialog.fields,function(e){return a("div",{key:e.value},[a("el-checkbox",{attrs:{label:e.value}},[t._v(t._s(e.text))])],1)}),0),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.exportOjfUnitDialog.show=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.exportOjfUnit}},[t._v("导 出")])],1)],1)],1)},staticRenderFns:[]};var D=a("C7Lr")(_,L,!1,function(t){a("vkRC")},"data-v-45e58501",null).exports,U=a("PUN0"),A=a("G1RR"),E=(U.a,A.a,{components:{ManageOjfList:j,ManageOjfAuditList:T,NewOjf:v,OjfDetail:D,UnitOjfApply:U.a,UnitOjfApplyDetail:A.a},data:function(){return{activeList:"ALL",page:"LIST",ojf:null,ojfUnitApplyId:null,showOplog:!1,edit:!1,applyDetailFrom:null,hideStatus:!1}},watch:{activeList:function(t){var e={ALL:"manageList",AUDIT:"auditList"}[t];this.$refs[e].refreshTable()}},methods:{toCreateOjf:function(){this.page="NEW"},toDetail:function(t){this.page="DETAIL",this.ojf=t},toApplyDetail:function(t){var e=t.ojf,a=t.ojfUnitApplyId,n=t.showOplog,i=t.edit,s=t.from,o=t.hideStatus;this.ojf=e,this.ojfUnitApplyId=a,this.showOplog=n||!1,this.edit=i||!1,this.applyDetailFrom=s,this.hideStatus=o,this.page="APPLY_DETAIL"},toReserve:function(t){var e=t.ojf;this.ojf=e,this.page="APPLY"},backToList:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.refresh,a=t.tableName,n=t.from;this.page=n||"LIST",e&&this.$refs[a].refreshTable()},backToDetail:function(){this.page="DETAIL"},applyDetailBack:function(t){var e=t.from,a=t.refresh,n=t.tableName;this.page=e||"DETAIL",a&&this.$refs[n].refreshTable()}}}),$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:"LIST"===t.page,expression:"page === 'LIST'"}],staticClass:"tab-content"},[a("el-tabs",{model:{value:t.activeList,callback:function(e){t.activeList=e},expression:"activeList"}},[a("el-tab-pane",{attrs:{label:"网招会列表",name:"ALL"}},[a("manage-ojf-list",{ref:"manageList",on:{"to-create-ojf":t.toCreateOjf,"to-detail":t.toDetail}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"网招会审核",name:"AUDIT"}},[a("manage-ojf-audit-list",{ref:"auditList",on:{"to-apply-detail":t.toApplyDetail}})],1)],1)],1),t._v(" "),"NEW"===t.page?a("div",[a("new-ojf",{on:{"back-to-list":t.backToList}})],1):t._e(),t._v(" "),"DETAIL"===t.page?a("div",[a("ojf-detail",{attrs:{ojf:t.ojf},on:{"back-to-list":t.backToList,"to-apply-detail":t.toApplyDetail,"to-reserve":t.toReserve}})],1):t._e(),t._v(" "),"APPLY"===t.page?a("div",[a("unit-ojf-apply",{attrs:{ojf:t.ojf,"is-manager":""},on:{"back-to-list":t.backToDetail}})],1):t._e(),t._v(" "),"APPLY_DETAIL"===t.page?a("div",[a("unit-ojf-apply-detail",{attrs:{ojf:t.ojf,"ojf-unit-apply-id":t.ojfUnitApplyId,from:t.applyDetailFrom,"hide-status":t.hideStatus,"show-oplog":t.showOplog,edit:t.edit,"is-manager":""},on:{back:t.applyDetailBack}})],1):t._e()])},staticRenderFns:[]};var S=a("C7Lr")(E,$,!1,function(t){a("s/+2")},null,null);e.default=S.exports}});