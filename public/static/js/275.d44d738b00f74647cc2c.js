webpackJsonp([275],{OKQo:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("C331"),n={components:{},data:function(){return{page:"layoutPage",systemId:"",currentItem:"",currentId:null,currentIndex:{module:-1,bottom:-1},list:{module:[],bottom:[]}}},computed:{},watch:{"list.module":function(t){this.changeClass(this.currentItem,this.currentId),this.sort()},"list.bottom":function(t){this.changeClass(this.currentItem,this.currentId),this.sort()}},created:function(){this.systemId=sessionStorage.getItem("_SYSTEM_ID"),this.initData()},mounted:function(){},methods:{selectItem:function(t,s,e){this.currentItem=t,this.currentId=e,this.currentIndex[t]=s},changeClass:function(t,s){if(t){var e=this.list[t].findIndex(function(t){return t.id==s});this.currentIndex[t]=e}},initData:function(){var t=this;Object(i.d)("/api/cms/module/getLayoutDataList?systemId="+this.systemId).then(function(s){s.state?t.list.module=s.data:t.$toast(s.message)}),Object(i.d)("/api/cms/bottom/getBottomList?systemId="+this.systemId).then(function(s){s.state?t.list.bottom=s.data.content:t.$toast(s.message)})},sort:function(){var t=this;if(this.currentItem){var s="/api/cms/"+this.currentItem+"/sortChange",e=this.list[this.currentItem].map(function(t,s){return{id:t.id,sort:s+1}}),n={};n="module"==this.currentItem?{moduleVOList:e}:{bottomVOList:e},Object(i.e)({url:s,dataType:"json",type:"post",data:n,success:function(s){s.state||t.$toast(s.message)}})}}}},o={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("GeminiScrollbar",{staticClass:"layout-page",attrs:{scrollX:!1}},[e("div",{staticClass:"layout-content"},[e("div",{staticClass:"title"},[t._v("首页模块布局")]),t._v(" "),e("div",{staticClass:"nav normal-font shadow"},[t._v("导航栏")]),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"banner normal-font shadow"},[t._v("轮播图")]),t._v(" "),e("div",{staticClass:"center-fixed"},[e("div",{staticClass:"date fixed-cnt normal-font shadow"},[t._v("日历")]),t._v(" "),e("div",{staticClass:"info fixed-cnt normal-font shadow"},[t._v("招聘信息")])]),t._v(" "),e("div",{staticClass:"module"},[e("div",{staticClass:"module-item normal-font shadow"},[t._v("就业事务")]),t._v(" "),t._l(t.list.module,function(s,i){return e("div",{directives:[{name:"dragging",rawName:"v-dragging",value:{item:s,list:t.list.module,group:"module"},expression:"{ item: item, list: list.module, group: 'module'}"}],key:i,staticClass:"module-item normal-font shadow cross",class:{on:t.currentIndex.module==i},on:{mousedown:function(e){return t.selectItem("module",i,s.id)}}},[e("div",{staticClass:"drag"},[t._v("可布局")]),t._v("\n          "+t._s(s.title)+"\n        ")])})],2)])]),t._v(" "),e("div",{staticClass:"layout-content"},[e("div",{staticClass:"title"},[t._v("底部链接布局")]),t._v(" "),e("div",{staticClass:"bottom"},t._l(t.list.bottom,function(s,i){return e("div",{directives:[{name:"dragging",rawName:"v-dragging",value:{item:s,list:t.list.bottom,group:"bottom"},expression:"{ item: item, list: list.bottom, group: 'bottom'}"}],key:i,staticClass:"bottom-item cross",class:{on:t.currentIndex.bottom==i},on:{mousedown:function(e){return t.selectItem("bottom",i,s.id)}}},[t._v("\n        "+t._s(s.title)+"\n      ")])}),0)])])},staticRenderFns:[]};var a=e("C7Lr")(n,o,!1,function(t){e("TSzm")},"data-v-05e8e162",null);s.default=a.exports},TSzm:function(t,s){}});