webpackJsonp([195],{fHS7:function(t,a){},pWc3:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("C331"),o={created:function(){var t=this,a=localStorage.getItem("lang"),e=this;Object(s.g)(a)&&(this.lang=a),Object(s.e)({url:"/api/app/search?category=ALL&typeId=&userType=&keyword=&capital=",dataType:"json",type:"get",async:!1,success:function(a){a.state&&(t.appArr=[],t.allApp=a.data,a.data.forEach(function(a,e){var s={};s.name=a.name,s.id=a.id,t.appArr.push(s)}))}}),this.refreshRows(),this.columns=[{id:"name",title:"关联的应用",className:"text-left",hidden:!1,width:"200px"},{id:"opt",title:this.translate.opt,className:"text-center",width:"200px",hidden:!1,formatter:function(){return[{tag:"a",text:e.translate.remove,className:"opt-btn",callback:function(t,a){confirm("确认要删除吗？删除后数据将无法恢复!")&&Object(s.e)({url:"/api/employment/app/"+t.id,dataType:"json",type:"post",success:function(t){t.state&&e.refreshRows()}})}}]}}]},data:function(){return{allApp:[],appArr:[],curAppId:"",rows:[],columns:[],url:"/table-data/department",showAddModal:!1,department:{},newDepartment:{name:""},modalType:"",isChange:!1,isDisabled:!1,lang:"zh-cn"}},computed:{translate:function(){return Object(s.g)(this.lang).departmentManage}},methods:{refreshRows:function(){var t=this;Object(s.e)({url:"/api/employment/platform/getAppList",dataType:"json",type:"get",async:!1,success:function(a){a.state&&(t.rows=[],a.data.forEach(function(a,e){var s={};t.allApp.forEach(function(t,e){a.appId==t.id&&(s.name=t.name)}),s.appId=a.appId,s.id=a.id,t.rows.push(s)}))}})},addModal:function(){this.rows.length>=8?this.$toast("最多只可配置8个哟！"):this.showAddModal=!0},changeRole:function(){var t=this;this.curAppId?Object(s.e)({url:"/api/employment/app/addRelationApp",dataType:"json",data:{appId:this.curAppId},type:"POST",success:function(a){a.state?(t.$toast("新增关联应用成功！"),t.showAddModal=!1,t.refreshRows()):t.$toast(a.message)}}):this.$toast("请选择应用！")},cancleModal:function(){this.showAddModal=!1}}},n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container-fluid",attrs:{id:"transaction-page"}},[e("div",{staticClass:"row text-center"},[e("v-table",{attrs:{title:"首页事务配置",pagesize:"10",idField:"id",rows:t.rows,columns:t.columns,multiple:!1,order:!0,search:!1,paginationShow:!1}},[e("div",{staticClass:"btn-group pull-right",attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[e("el-button",{staticClass:"custom-btn",attrs:{type:"primary"},on:{click:function(a){return t.addModal()}}},[t._v("新增")])],1)])],1),t._v(" "),e("v-modal",{staticClass:"editDepartmentModal",attrs:{show:t.showAddModal,effect:"fade",width:"274"}},[e("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v("\n        新增关联应用\n      ")])]),t._v(" "),e("div",{staticClass:"modal-body",attrs:{slot:"modal-body"},slot:"modal-body"},[e("div",{staticClass:"form-group"},[e("v-select",{staticStyle:{width:"100%"},attrs:{options:t.appArr,optionsLabel:"name",optionsValue:"id"},model:{value:t.curAppId,callback:function(a){t.curAppId=a},expression:"curAppId"}})],1)]),t._v(" "),e("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[e("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.cancleModal}},[t._v(t._s(t.translate.cancel))]),t._v(" "),e("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(a){return t.changeRole()}}},[t._v(t._s(t.translate.confirm))])])])],1)},staticRenderFns:[]};var r=e("C7Lr")(o,n,!1,function(t){e("fHS7")},null,null);a.default=r.exports}});