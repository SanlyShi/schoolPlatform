webpackJsonp([242],{CUae:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("a3Yh"),s=i.n(a),n=i("C331"),c=(i("ZpE2"),{data:function(){var t;return t={tableCheckedList:[],check:!0,isNew:!1,attributeArr:[]},s()(t,"tableCheckedList",[]),s()(t,"url","/table-data/archives/know/getListKnowLedge"),s()(t,"columns",[]),s()(t,"editItem",{id:"",attributeValue:"",title:"",content:""}),t},created:function(){var t=this;Object(n.e)({url:"/api/archives/demo/getSysDict?name=属性",type:"get",success:function(e){t.attributeArr=e.data}}),this.initC()},computed:{nowArr:function(){var t=[];return 0==this.tableCheckedList.length?t=[]:this.tableCheckedList.forEach(function(e){t.push(e.id)}),t}},methods:{addItem:function(){this.editItem={id:"",attributeValue:"",title:"",content:""},this.check=!1,this.isNew=!0},save:function(){var t=this;if(this.isNew){var e={attribute:"",title:"",content:"",filePath:""};e.attribute=this.editItem.attributeValue,e.title=this.editItem.title,e.content=this.editItem.content,Object(n.e)({url:"/api/archives/know/saveOneBase",data:e,type:"POST",success:function(e){e.state&&(t.$toast("新增成功"),t.url=t.url+"?timestamp="+(new Date).getTime(),t.check=!0)}})}else{var i={attribute:"",title:"",content:"",filePath:""};i.attribute=this.editItem.attributeValue,i.title=this.editItem.title,i.content=this.editItem.content,Object(n.e)({url:"/api/archives/know/"+this.editItem.id+"/updateOneBase",data:i,type:"post",success:function(e){e.state&&(t.$toast("保存编辑成功"),t.url=t.url+"?timestamp="+(new Date).getTime(),t.check=!0)}})}},afterSelectAttr:function(t){this.editItem.attributeValue=t.value},_backList:function(){this.check=!0},batchDel:function(){var t=this;if(this.nowArr.length>0){Object(n.d)("/api/archives/know/deleteKnowLedge?id="+this.nowArr,{},"post").then(function(e){e.state&&(t.url=t.url+"?timestamp="+(new Date).getTime())})}else this.$toast("请勾选需要操作的行")},_tableChecked:function(t){this.tableCheckedList=t},initC:function(){var t=this;this.columns=[{id:"attribute",title:"属性",className:"text-left",hidden:!1,width:120,search:{type:"select",data:{url:"/api/archives/demo/getSysDict?name=属性",optionsLabel:"name",optionsValue:"value",placeholder:""}}},{id:"title",title:"问题标题",className:"text-left",hidden:!1,width:120,search:{type:"input",placeholder:"问题标题"}},{id:"updateTime",title:"修改时间",className:"text-left",hidden:!1,width:150},{id:"userName",title:"操作人",className:"text-left",hidden:!1,width:120},{id:"opt",className:"text-left",title:"操作",width:50,hidden:!1,formatter:function(){return[{tag:"a",text:"编辑",className:"opt-btn",callback:function(e,i){t.isNew=!1,t.check=!1,t.editItem={id:"",attributeValue:"",title:"",content:""},t.editItem.id=e.id,t.attributeArr.forEach(function(i){i.name==e.attribute&&(t.editItem.attributeValue=i.value)}),t.editItem.content=e.content,t.editItem.title=e.title}}]}}]}}}),l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"relationship-page container-fluid",attrs:{id:"enrollQuestion-page"}},[t.check?i("v-table",{ref:"studentTable",attrs:{url:t.url,pagesize:"10",idField:"id",columns:t.columns,multiple:!0,order:!0,search:!1},on:{afterChecked:t._tableChecked}},[i("div",{attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[i("div",{staticClass:"btn-group pull-right"},[i("button",{staticClass:"btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:function(e){return t.addItem()}}},[t._v("新增")]),t._v(" "),i("button",{staticClass:"btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:function(e){return t.batchDel()}}},[t._v("批量删除")])])])]):t._e(),t._v(" "),t.check?t._e():i("div",{staticClass:"box-wrap"},[i("div",{staticClass:"title-div"},[i("button",{staticClass:"btn back-btn clearBtnBorder btnclass",attrs:{type:"button"},on:{click:t._backList}},[i("i",{staticClass:"maticon back-icon-btn",domProps:{innerHTML:t._s(t.icons("arrow_back"))}},[t._v("arrow_back")]),t._v(" "),i("span",{staticClass:"nav-title"},[t._v("返回")])])]),t._v(" "),i("div",{staticClass:"content-form"},[i("div",{staticClass:"select-content"},[i("div",{staticClass:"select-item"},[i("p",[t._v("属性：")]),t._v(" "),i("v-select",{staticClass:"inputM",attrs:{options:t.attributeArr,value:t.editItem.attributeValue,optionsLabel:"name",optionsValue:"value"},on:{afterSelected:t.afterSelectAttr}})],1),t._v(" "),i("div",{staticClass:"select-item"},[i("p",[t._v("问题标题：")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.editItem.title,expression:"editItem.title"}],staticClass:"inputM pro-inp",domProps:{value:t.editItem.title},on:{input:function(e){e.target.composing||t.$set(t.editItem,"title",e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"text-item"},[i("u-editor",{staticClass:"my-edit",model:{value:t.editItem.content,callback:function(e){t.$set(t.editItem,"content",e)},expression:"editItem.content"}})],1),t._v(" "),i("div",{staticClass:"sumit-btn"},[i("button",{staticClass:"btn btn-bgColor-style clearBtnBorder mybtn",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v("保存")])])])])],1)},staticRenderFns:[]};var r=i("C7Lr")(c,l,!1,function(t){i("FZ85")},null,null);e.default=r.exports},FZ85:function(t,e){}});