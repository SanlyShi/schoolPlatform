webpackJsonp([254],{QZt9:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});i("kV13");var s=i("qqHy"),a=i.n(s),n=i("C331"),o={created:function(){var t=this;Object(n.e)({url:"/api/firstPage/initSetting",type:"get",success:function(e){e.state?(t.content=e.data?e.data.content:"",t.imgUrl=e.data&&e.data.background?t.imageUrlPrefix+e.data.background:"",t.tips=e.data?e.data.tips:""):t.$toast(e.message)}})},data:function(){return{imgUrl:"",content:"",tips:"",file:null}},methods:{_previewImg:function(t){var e=this;if(this.file=t.target.files[0],this.file)if(this.file.size>5242880)this.$toast("上传图片过大,图片最大不超过5MB哦~");else{var i=new FileReader;i.onloadend=function(){e.imgUrl=i.result,e._judgeImgPos()},i.readAsDataURL(this.file)}},_judgeImgPos:function(){var t,e,i,s;a()("#previewImg").removeAttr("style"),setTimeout(function(){t=a()("#previewImg").width(),e=a()("#previewImg").height(),i=a()(".img-container").width(),s=a()(".img-container").height(),t>e?(a()("#previewImg").css("height","100%"),a()("#previewImg").css("margin-left",-(t*s/e-i)/2+"px")):(a()("#previewImg").css("width","100%"),a()("#previewImg").css("margin-top",-(e*i/t-s)/2+"px"))},10)},_saveView:function(){var t=this,e=new FormData;this.file&&e.append("file",this.file),this.$waiting.show({container:"#loginSetPage"}),this.file?Object(n.e)({url:"/upload/storage/files",type:"post",data:e,processData:!1,contentType:!1,success:function(e){"88888"===e.code?t._submit(e.data.hash):t.$toast("图片上传失败！")}}):this._submit(this.imgUrl.replace(this.imageUrlPrefix,""))},_submit:function(t){var e=this;Object(n.e)({url:"/api/firstPage/info",type:"post",data:{background:t,content:this.content,tips:this.tips},success:function(t){t.state?e.$toast("保存成功"):e.$toast(t.message)}}).always(function(){e.$waiting.close()})}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container-fluid",attrs:{id:"loginSetPage"}},[i("div",{staticClass:"row"},[i("button",{staticClass:"btn pull-right",attrs:{id:"save"},on:{click:t._saveView}},[i("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons("save"))}}),t._v("保存")])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-8"}),t._v(" "),i("div",{staticClass:"col-md-4 edit-part"},[i("span",{staticClass:"word-tips pull-right"},[t._v(t._s(t.tips?t.tips.length:0)+"/100")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tips,expression:"tips"}],staticClass:"tips",attrs:{placeholder:"登录提示信息（100字以内）",maxlength:"100"},domProps:{value:t.tips},on:{keyup:function(e){t.tips=t.tips.slice(0,100)},input:function(e){e.target.composing||(t.tips=e.target.value)}}})])]),t._v(" "),i("div",{staticClass:"row edit-part"},[i("div",{staticClass:"col-md-8 img-container",style:"background-image:url("+t.imgUrl+")"},[i("div",{staticClass:"cover"},[i("button",{staticClass:"btn"},[i("i",{staticClass:"maticon",domProps:{innerHTML:t._s(t.icons("photo"))}}),t._v(" "),t.imgUrl?i("span",[t._v("修改")]):i("span",[t._v("添加")])]),t._v(" "),i("input",{attrs:{type:"file",id:"imgPicker"},on:{change:t._previewImg}})])]),t._v(" "),i("div",{staticClass:"col-md-4 text-container"},[i("span",{staticClass:"word-tips pull-right"},[t._v(t._s(t.content?t.content.length:0)+"/1000")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{placeholder:"广而告之内容...",maxlength:"1000"},domProps:{value:t.content},on:{keyup:function(e){t.content=t.content.slice(0,1e3)},input:function(e){e.target.composing||(t.content=e.target.value)}}})])])])},staticRenderFns:[]};var c=i("C7Lr")(o,r,!1,function(t){i("gU7i")},"data-v-1fde1dbe",null);e.default=c.exports},gU7i:function(t,e){}});