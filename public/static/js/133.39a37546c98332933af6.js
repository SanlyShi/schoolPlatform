webpackJsonp([133],{"4pDP":function(t,a){},"6BWh":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var l=e("C331"),s=e("y0ro"),i=(s.a,{mixins:[s.a],data:function(){return{columns:[],gradeOptions:[],timestamp:"?timestamp=",tableData_url:"/table-data/partyBuild/users/page/users/",showInfoModal:!1,isCheck:!1,organizationName_options:[],organizationPosition_options:[],collegeId:"",grade:"",politicalStatus:"",organizationName_value:"",organizationPosition:"",organizationName:"",userInfo:{partyBuildOrganization:{},studentPartyBuildInfo:{}},seleteFace_list:[],editInfo:{politicalStatus:"",studentPartyBuildInfo:{joinTime:"",correctionTime:"",recommendPartyOrganizations:""},partyBuildOrganization:{id:""}},selectList:[],selectModel:"",recommendPartyOrganizations_model:"",seleteFace:"",seleteFace_id:"",tableCheckedList:[],setParty:!1,selectedParty:"",showDetailStatus:!1,checkRows:[],addMemberStatus:!1,addParams:{userNo:"",userId:""}}},props:{selectItem:{default:{}}},methods:{_backParentPage:function(){this.$parent.showMember=!1},afterChecked:function(t){this.checkRows=t},afterDetect:function(t){this.addParams.userId=t.userId},getGrade:function(){for(var t=(new Date).getFullYear(),a=t-5;a<t+5;a++)this.gradeOptions.push({id:a+"",name:a+""})},getFace:function(){var t=this;Object(l.e)({type:"get",url:"/api/system/dicts?dictType=政治面貌",success:function(a){a.state&&(t.seleteFace_list=a.data,a.data.map(function(a){a.label==t.seleteFace&&(t.seleteFace_id=a.value)}))}})},getPositionOptions:function(){var t=this;Object(l.e)({url:"/api/partyMember/personInChargePositionOptions",type:"get",success:function(a){a.state&&(a.data.organizationName.map(function(a){t.organizationName_options.push(a)}),a.data.organizationPosition.map(function(a){t.organizationPosition_options.push(a)}))}})},partySelect:function(t){this.editInfo.partyBuildOrganization.id=t.value},faceSelect:function(t){this.seleteFace_id=t.value},exportStat:function(){var t="/downloads/partyBuild/users/excels?organizationId="+this.selectItem.organizationId,a=this.$refs.table.tableSearchFields;for(var e in a)t=t+"&"+e+"="+a[e];window.location.href=t},createTimeSelected_in:function(t){this.editInfo.studentPartyBuildInfo.joinTime=t.value},createTimeSelected_office:function(t){this.editInfo.studentPartyBuildInfo.correctionTime=t.value},_tableChecked:function(t){this.tableCheckedList=t},selectParty:function(t){},submitAdd:function(){var t=this,a={userId:this.addParams.userId,organizationId:this.selectItem.organizationId};Object(l.d)("api/partyBuild/users",a).then(function(a){a.state&&(t.$toast("操作成功!"),t.addMemberStatus=!1,t.timestamp="?timestamp="+(new Date).getTime())})},addMember:function(t){t?this.getMemberDetail(t.userId):this.addMemberStatus=!0},getMemberDetail:function(t){var a=this,e="api/document/students/baseStatusOrganizationInfo/"+t;Object(l.d)(e).then(function(t){t.state&&(a.userInfo=t.data,a.showDetailStatus=!0)})},deleteMember:function(t){var a=this;if(confirm("确认移除成员?")){var e="api/partyBuild/users/"+t.userId+"/"+this.selectItem.organizationId;Object(l.d)(e,{},"post").then(function(t){t.state&&(a.timestamp="?timestamp="+(new Date).getTime(),a.$toast("操作成功"))})}}},created:function(){var t=this;this.importParams={parentPageTitle:"",downloadTemplateUrl:"/partyBuild/users/excel/template",downloadErrorTemplateUrl:"/partyBuild/users/excels/errorExcels",checkTemplateUrl:"/partyBuild/users/excel/"+this.selectItem.organizationId,templateName:"批量导入模板",importBtnType:[{url:"/partyBuild/users/import/",method:"post",isShowBtn:!0,name:"增量导入",success:function(a){t.timestamp="?timestamp="+(new Date).getTime(),t.curRoute="allStaff"}}]};for(var a=(new Date).getFullYear(),e=[],l=0;l<10;l++){var s=a-l;e.push({label:s+"",value:s+""})}var i=this;this.columns=[{title:"学号",id:"userNo",className:"text-left",width:100,search:{type:"input",data:{placeholder:""}},hidden:!1},{title:"姓名",id:"name",className:"text-left",width:100,search:{type:"input",data:{placeholder:""}},hidden:!1},{title:"学院名称",id:"college",className:"text-left",width:100,search:{type:"select",data:{url:"/api/partyBuild/organizations/manage/college/options",optionsLabel:"text",optionsValue:"id",placeholder:""}},hidden:!1},{title:"培养层次",id:"educationLevel",className:"text-left",width:100,search:{type:"select",data:{url:"/api/system/dicts?dictType=培养层次",optionsLabel:"label",optionsValue:"value",placeholder:""}},hidden:!1},{title:"年级",id:"grade",className:"text-left",width:100,search:{type:"select",data:{options:e,optionsLabel:"label",optionsValue:"value",placeholder:""}},hidden:!1},{title:"班级",id:"className",className:"text-left",width:100,search:{type:"input",data:{placeholder:""}},hidden:!1},{title:"当前状态",id:"schoolStatus",className:"text-left",width:100,search:{type:"select",data:{url:"/api/system/dicts?dictType=在校状态",optionsLabel:"label",optionsValue:"value",placeholder:""}},hidden:!1},{title:"政治面貌",id:"politicalStatus",className:"text-left",width:140,search:{type:"select",data:{url:"/api/system/dicts?dictType=政治面貌",optionsLabel:"label",optionsValue:"value",placeholder:""}},hidden:!1},{title:"培养发展阶段",id:"trainingAndDevelopmentStage",className:"text-left",width:140,search:{type:"select",data:{url:"/api/system/dicts?dictType=培养发展阶段",optionsLabel:"label",optionsValue:"value",placeholder:""}},hidden:!0},{title:"所属党组织",id:"name",className:"text-left",width:140,search:{type:"input",data:{placeholder:""}},hidden:!0,formatter:function(t){return t.partyBuildOrganization.name}},{title:"专业",id:"major",className:"text-left",width:140,search:{type:"input",data:{placeholder:""}},hidden:!0},{title:"民族",id:"nation",className:"text-left",width:70,search:{type:"select",data:{url:"/api/system/dicts?dictType=民族",optionsLabel:"label",optionsValue:"value",placeholder:""}},hidden:!0},{title:"性别",id:"sex",className:"text-left",width:70,search:{type:"select",data:{url:"/api/system/dicts?dictType=性别",optionsLabel:"label",optionsValue:"value",placeholder:""}},hidden:!0},{title:"出生日期",id:"birthday",className:"text-left",width:140,hidden:!0},{title:"生源地",id:"originPlace",className:"text-left",width:140,search:{type:"input",data:{placeholder:""}},hidden:!0},{id:"opt",title:"操作",className:"text-center",width:"260px",hidden:!1,formatter:function(t){return[{tag:"a",text:"查看",className:"opt-btn",callback:function(t,a){i.addMember(t)}},{tag:"a",text:"移除",className:"opt-btn",callback:function(t,a){i.deleteMember(t)}}]}}]},mounted:function(){this.getGrade()}}),o={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.showDetailStatus?e("div",{staticClass:"detail_wrap"},[e("label",{staticClass:"back pull-left",staticStyle:{padding:"0"},on:{click:function(a){t.showDetailStatus=!1}}},[e("i",{staticClass:"maticon pull-left",domProps:{innerHTML:t._s(t.icons("arrow_back"))}},[t._v("arrow_back")]),t._v(" "),e("span",[t._v("返回")])]),t._v(" "),e("div",{staticClass:"form-wrap box_flex align_center input_wrap flex_wrap",staticStyle:{"margin-top":"40px"}},[e("div",{staticClass:"modal-body canEdit",attrs:{slot:"modal-body"},slot:"modal-body"},[e("h1",[t._v("基本信息")]),t._v(" "),e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"input-label title-label"},[t._v("姓名:")]),t._v(" "),e("label",{staticClass:"input-label modal-label"},[t._v(t._s(t.userInfo.name))])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"input-label title-label"},[t._v("年级:")]),t._v(" "),e("label",{staticClass:"input-label modal-label"},[t._v(t._s(t.userInfo.grade))])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"input-label title-label"},[t._v("培养层次:")]),t._v(" "),e("label",{staticClass:"input-label modal-label"},[t._v(t._s(t.userInfo.educationLevel))])])]),t._v(" "),e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"input-label title-label"},[t._v("学号:")]),t._v(" "),e("label",{staticClass:"input-label modal-label"},[t._v(t._s(t.userInfo.studentId))])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"input-label title-label"},[t._v("班级:")]),t._v(" "),e("label",{staticClass:"input-label modal-label"},[t._v(t._s(t.userInfo.className))])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"input-label title-label"},[t._v("生源地:")]),t._v(" "),e("label",{staticClass:"input-label modal-label"},[t._v(t._s(t.userInfo.originPlace))])])]),t._v(" "),e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"input-label title-label"},[t._v("性别:")]),t._v(" "),e("label",{staticClass:"input-label modal-label"},[t._v(t._s(t.userInfo.sex))])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"input-label title-label"},[t._v("学院:")]),t._v(" "),e("label",{staticClass:"input-label modal-label"},[t._v(t._s(t.userInfo.college))])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"input-label title-label"},[t._v("出生日期:")]),t._v(" "),e("label",{staticClass:"input-label modal-label"},[t._v(t._s(t.userInfo.birthday))])])]),t._v(" "),e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"input-label title-label"},[t._v("民族:")]),t._v(" "),e("label",{staticClass:"input-label modal-label"},[t._v(t._s(t.userInfo.nation))])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"input-label title-label"},[t._v("专业:")]),t._v(" "),e("label",{staticClass:"input-label modal-label"},[t._v(t._s(t.userInfo.major))])])])])]),t._v(" "),e("div",{staticClass:"modal-body canEdit",attrs:{slot:"modal-body"},slot:"modal-body"},[e("div",{staticClass:"editCt"},[e("h1",[t._v("入党信息")]),t._v(" "),e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"input-label title-label"},[t._v("政治面貌:")]),t._v(" "),e("label",{staticClass:"input-label modal-label"},[t._v(t._s(t.userInfo.politicalStatus))])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"edit-class-text"},[t._v("申请入党时间:")]),t._v(" "),e("label",{staticClass:"input-label modal-label"},[t._v(t._s(t.userInfo.studentPartyBuildInfo.applyTime))])])]),t._v(" "),e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"input-label title-label"},[t._v("培养发展阶段:")]),t._v(" "),e("label",{staticClass:"input-label modal-label"},[t._v(t._s(t.userInfo.trainingAndDevelopmentStage))])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"edit-class-text"},[t._v("入党时间:")]),t._v(" "),e("label",{staticClass:"input-label modal-label"},[t._v(t._s(t.userInfo.studentPartyBuildInfo.joinTime))])])]),t._v(" "),e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"input-label title-label"},[t._v("发展入党的党组织:")]),t._v(" "),e("label",{staticClass:"input-label modal-label"},[t._v(t._s(t.userInfo.studentPartyBuildInfo.recommendPartyOrganizations))])]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{staticClass:"edit-class-text"},[t._v("转正时间:")]),t._v(" "),e("label",{staticClass:"input-label modal-label"},[t._v(t._s(t.userInfo.studentPartyBuildInfo.correctionTime))])])]),t._v(" "),e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"form-group"},[e("label",{staticClass:"input-label title-label"},[t._v("所属党组织:")]),t._v(" "),e("label",{staticClass:"input-label modal-label"},[t._v(t._s(t.userInfo.partyBuildOrganization.name))])])])])])]):e("div",{staticClass:"container-fluid",attrs:{id:"party-member-manage"}},[e("div",{staticClass:"back-parent-page"},[e("button",{staticClass:"btn back-btn clearBtnBorder box_flex align_center",attrs:{type:"button"},on:{click:t._backParentPage}},[e("i",{staticClass:"maticon back-icon-btn",domProps:{innerHTML:t._s(t.icons("arrow_back"))}},[t._v("arrow_back")]),t._v(" "),e("span",{staticClass:"nav-title"},[t._v(t._s(t.selectItem.parentPageTitle))])])]),t._v(" "),e("v-table",{ref:"table",attrs:{columns:t.columns,url:t.tableData_url+t.selectItem.organizationId+t.timestamp,columnsControl:!0,pagesize:"10",order:!0,search:!1}},[e("div",{attrs:{slot:"btn-group",role:"group"},slot:"btn-group"},[e("div",{staticClass:"btn-group pull-left set"},[t.tableCheckedList.length>0?e("div",{staticClass:"batch-options"},[e("span",{staticClass:"pull-left"},[t._v("已选择"+t._s(t.tableCheckedList.length)+"项，其中可操作的有"+t._s(t.tableCheckedList.length)+"项")]),t._v(" "),e("div",{staticClass:"pull-left"},[e("button",{staticClass:"btn btn-bgColor-style clearBtnBorder resetBtn",attrs:{type:"button"},on:{click:function(a){t.setParty=!0,t.selectedParty=""}}},[e("span",[t._v("设置所属党组织")])])])]):t._e()]),t._v(" "),e("div",{staticClass:"btn-group pull-right"},[e("button",{staticClass:"btn batch-add-btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:function(a){return t.addMember()}}},[t._v("新增成员")]),t._v(" "),e("button",{staticClass:"btn batch-add-btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:t.quickAddRecord}},[t._v("批量新增")]),t._v(" "),e("button",{staticClass:"btn batch-add-btn btn-bgColor-style clearBtnBorder",attrs:{type:"button"},on:{click:t.exportStat}},[t._v("导出")])])])]),t._v(" "),e("v-modal",{attrs:{show:t.addMemberStatus,id:"infoModal",effect:"fade",width:"400"}},[e("div",{staticClass:"modal-header",attrs:{slot:"modal-header"},slot:"modal-header"},[e("h5",{staticClass:"modal-title"},[t._v("新增成员")])]),t._v(" "),e("div",{staticClass:"modal-body setParty box_flex align_center",staticStyle:{overflow:"inherit"},attrs:{slot:"modal-body"},slot:"modal-body"},[e("label",{staticClass:"partyName",staticStyle:{"margin-right":"5px"}},[t._v("姓名")]),t._v(" "),e("detect",{attrs:{url:"api/document/students/searchResults",placeholder:"输入姓名或者学号"},on:{afterSelected:function(a){t.afterDetect(a)}}})],1),t._v(" "),e("div",{staticClass:"modal-footer",attrs:{slot:"modal-footer"},slot:"modal-footer"},[e("button",{staticClass:"btn cancel-btn clearBtnBorder",attrs:{type:"button"},on:{click:function(a){t.addMemberStatus=!1}}},[t._v("取消")]),t._v(" "),e("button",{staticClass:"btn submit-btn clearBtnBorder",attrs:{type:"button"},on:{click:t.submitAdd}},[t._v("确定")])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:"importPage"===t.curRoute,expression:"curRoute === 'importPage'"}],staticClass:"importPageClass"},[e("v-import",t._b({on:{backParentPage:function(a){t.curRoute="allStaff"}}},"v-import",t.importParams,!1))],1)],1)},staticRenderFns:[]};var n=e("C7Lr")(i,o,!1,function(t){e("wDoS"),e("4pDP")},"data-v-3df6aedd",null);a.default=n.exports},wDoS:function(t,a){}});