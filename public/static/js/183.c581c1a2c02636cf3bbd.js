webpackJsonp([183],{N4UM:function(t,e){},"nQ+6":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("C331"),o={props:{data:{default:""}},data:function(){return{number:0,tabIndex:0,tabs:[{type:"all",name:"全部"},{type:"school",name:"全校"},{type:"college",name:"学院"},{type:"instructor",name:"辅导员"}],selectedTab:"all",announcementArr:{all:[],school:[],college:[],instructor:[]},pageIndex:{all:0,school:0,college:0,instructor:0},pageSize:10,isLoadMoreData:!1,loadingText:!1,typeData:{all:"全部",school:"全校",college:"学院",instructor:"辅导员"},noDataTips:"",isShowNoMoreDataTips:{all:!1,school:!1,college:!1,instructor:!1}}},created:function(){this._initAnnouncementList(this.selectedTab)},methods:{_initAnnouncementList:function(t){var e=this;this.loadingText=!0,this.isLoadMoreData=!1,Object(a.e)({url:"/api/announcement/list/20",type:"get",data:{page:this.pageIndex[t],size:this.pageSize,type:t},success:function(n){n.state?(e.loadingText=!1,n.data.content.length>0?e.noDataTips="":e.noDataTips="---暂无相关数据---",n.data.content.forEach(function(n){e.announcementArr[t].push(n)}),e.announcementArr[t].length>e.pageSize?e.isShowNoMoreDataTips[t]=!0:e.isShowNoMoreDataTips[t]=!1,n.data.content.length<e.pageSize?e.isLoadMoreData=!1:e.isLoadMoreData=!0):e.$vux.toast.show({text:n.message,position:"bottom",type:"text"})}})},_viewAnnounce:function(t){this.$emit("addBread",{route:"/announcement/MAnnouncementDetail?id="+t.announcementId,title:""})},tabClick:function(t){this.selectedTab=t.type,0===this.announcementArr[this.selectedTab].length&&this._initAnnouncementList(this.selectedTab,!0)}},mounted:function(){var t=this;this.$pullUpToLoad({container:".announcement-content",up:{callback:function(){t.isLoadMoreData&&(t.pageIndex[t.selectedTab]++,t._initAnnouncementList(t.selectedTab))}}})}},i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"announcement"}},[n("view-box",[n("x-header",{staticClass:"announcement-header"},[n("div",{staticClass:"overwrite-title-demo",attrs:{slot:"overwrite-title"},slot:"overwrite-title"},[n("tab",{staticClass:"announcement-tabbar",attrs:{"line-width":1},model:{value:t.tabIndex,callback:function(e){t.tabIndex=e},expression:"tabIndex"}},t._l(t.tabs,function(e,a){return n("tab-item",{key:a,staticClass:"announcement-tab",attrs:{selected:t.selectedTab===e.type},on:{"on-item-click":function(n){return t.tabClick(e)}}},[t._v(t._s(e.name))])}),1)],1)]),t._v(" "),n("div",{staticClass:"announcement-content"},[t.announcementArr[t.selectedTab].length>0?n("div",{staticClass:"announcement-container"},[t._l(t.announcementArr[t.selectedTab],function(e,a){return n("group",{key:a,staticClass:"announcement-group"},[n("cell",{staticClass:"announcement-cell",attrs:{title:e.title,"inline-desc":e.createTime},nativeOn:{click:function(n){return t._viewAnnounce(e)}}},[n("badge",{staticClass:"announcement-badge",attrs:{text:t.typeData[e.type]}})],1)],1)}),t._v(" "),t.loadingText?n("div",{staticClass:"noMoreData"},[t._v("---加载中---")]):t._e(),t._v(" "),!t.isLoadMoreData&&t.isShowNoMoreDataTips[t.selectedTab]?n("div",{staticClass:"noMoreData"},[t._v("---没有更多数据了---")]):t._e()],2):n("div",{staticClass:"nodataText"},[t._v(t._s(t.noDataTips))])])],1)],1)},staticRenderFns:[]};var s=n("C7Lr")(o,i,!1,function(t){n("N4UM")},null,null);e.default=s.exports}});